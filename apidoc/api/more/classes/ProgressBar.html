<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: ProgressBar [Facets More API]</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <div class='name'>
          <span class='type'>Class</span>
          ProgressBar
        </div>
        <ol class='paths'>
          <li>
            <a href="../files/lib/more/facets/progressbar_rb.html">lib/more/facets/progressbar.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong>Object</strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <h1><a href="ProgressBar.html">ProgressBar</a></h1>
            <p>
            <a href="ProgressBar.html">ProgressBar</a> is a text-based progressbar
            library.
            </p>
            <pre>pbar = ProgressBar.new( &quot;Demo&quot;, 100 )&#x000A;100.times { pbar.inc }&#x000A;pbar.finish</pre>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public class</h3>
            <ol>
              <li><a href="#M000448">new</a></li>
            </ol>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000466">bar_mark=</a></li>
              <li><a href="#M000464">file_transfer_mode</a></li>
              <li><a href="#M000470">finish</a></li>
              <li><a href="#M000471">flush</a></li>
              <li><a href="#M000468">format=</a></li>
              <li><a href="#M000469">format_arguments=</a></li>
              <li><a href="#M000472">halt</a></li>
              <li><a href="#M000474">inc</a></li>
              <li><a href="#M000475">inspect</a></li>
              <li><a href="#M000473">set</a></li>
              <li><a href="#M000465">title=</a></li>
              <li><a href="#M000467">total_overflow=</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='methods'>
              <h2>Public class methods</h2>
              <div class='public-class method' id='method-M000448'>
                <a name='M000448'>      </a>
                <div class='synopsis'>
                  <span class='name'>new</span>
                  <span class='arguments'>(title, total, out = STDERR)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000448-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000448-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 38</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">title</span>, <span class="ruby-identifier">total</span>, <span class="ruby-identifier">out</span> = <span class="ruby-constant">STDERR</span>)&#x000A;    <span class="ruby-ivar">@title</span> = <span class="ruby-identifier">title</span>&#x000A;    <span class="ruby-ivar">@total</span> = <span class="ruby-identifier">total</span>&#x000A;    <span class="ruby-ivar">@out</span> = <span class="ruby-identifier">out</span>&#x000A;    <span class="ruby-ivar">@bar_length</span> = <span class="ruby-value">80</span>&#x000A;    <span class="ruby-ivar">@bar_mark</span> = <span class="ruby-value str">&quot;o&quot;</span>&#x000A;    <span class="ruby-ivar">@total_overflow</span> = <span class="ruby-keyword kw">true</span>&#x000A;    <span class="ruby-ivar">@current</span> = <span class="ruby-value">0</span>&#x000A;    <span class="ruby-ivar">@previous</span> = <span class="ruby-value">0</span>&#x000A;    <span class="ruby-ivar">@is_finished</span> = <span class="ruby-keyword kw">false</span>&#x000A;    <span class="ruby-ivar">@start_time</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>&#x000A;    <span class="ruby-ivar">@format</span> = <span class="ruby-value str">&quot;%-14s %3d%% %s %s&quot;</span>&#x000A;    <span class="ruby-ivar">@format_arguments</span> = [<span class="ruby-identifier">:title</span>, <span class="ruby-identifier">:percentage</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:stat</span>]&#x000A;    <span class="ruby-identifier">show_progress</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <h2>Public instance methods</h2>
              <div class='public-instance method' id='method-M000466'>
                <a name='M000466'>      </a>
                <div class='synopsis'>
                  <span class='name'>bar_mark=</span>
                  <span class='arguments'>(mark)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000466-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000466-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 189</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bar_mark=</span>(<span class="ruby-identifier">mark</span>)&#x000A;    <span class="ruby-ivar">@bar_mark</span> = <span class="ruby-constant">String</span>(<span class="ruby-identifier">mark</span>)[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">0</span>]&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000464'>
                <a name='M000464'>      </a>
                <div class='synopsis'>
                  <span class='name'>file_transfer_mode</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000464-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000464-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 181</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">file_transfer_mode</span>&#x000A;    <span class="ruby-ivar">@format_arguments</span> = [<span class="ruby-identifier">:title</span>, <span class="ruby-identifier">:percentage</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:stat_for_file_transfer</span>]&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000470'>
                <a name='M000470'>      </a>
                <div class='synopsis'>
                  <span class='name'>finish</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000470-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000470-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 205</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">finish</span>&#x000A;    <span class="ruby-ivar">@current</span> = <span class="ruby-ivar">@total</span>&#x000A;    <span class="ruby-ivar">@is_finished</span> = <span class="ruby-keyword kw">true</span>&#x000A;    <span class="ruby-identifier">show_progress</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000471'>
                <a name='M000471'>      </a>
                <div class='synopsis'>
                  <span class='name'>flush</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000471-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000471-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 211</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">flush</span>&#x000A;    <span class="ruby-ivar">@out</span>.<span class="ruby-identifier">flush</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000468'>
                <a name='M000468'>      </a>
                <div class='synopsis'>
                  <span class='name'>format=</span>
                  <span class='arguments'>(format)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000468-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000468-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 197</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">format=</span>(<span class="ruby-identifier">format</span>)&#x000A;    <span class="ruby-ivar">@format</span> = <span class="ruby-identifier">format</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000469'>
                <a name='M000469'>      </a>
                <div class='synopsis'>
                  <span class='name'>format_arguments=</span>
                  <span class='arguments'>(arguments)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000469-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000469-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 201</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">format_arguments=</span>(<span class="ruby-identifier">arguments</span>)&#x000A;    <span class="ruby-ivar">@format_arguments</span> = <span class="ruby-identifier">arguments</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000472'>
                <a name='M000472'>      </a>
                <div class='synopsis'>
                  <span class='name'>halt</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000472-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000472-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 215</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">halt</span>&#x000A;    <span class="ruby-ivar">@is_finished</span> = <span class="ruby-keyword kw">true</span>&#x000A;    <span class="ruby-identifier">show_progress</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000474'>
                <a name='M000474'>      </a>
                <div class='synopsis'>
                  <span class='name'>inc</span>
                  <span class='arguments'>(step = 1)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000474-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000474-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 235</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inc</span>(<span class="ruby-identifier">step</span> = <span class="ruby-value">1</span>)&#x000A;    <span class="ruby-ivar">@current</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">step</span>&#x000A;    <span class="ruby-ivar">@current</span> = <span class="ruby-ivar">@total</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@current</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@total</span>&#x000A;    <span class="ruby-identifier">show_progress</span>&#x000A;    <span class="ruby-ivar">@previous</span> = <span class="ruby-ivar">@current</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000475'>
                <a name='M000475'>      </a>
                <div class='synopsis'>
                  <span class='name'>inspect</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000475-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000475-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 242</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>&#x000A;    <span class="ruby-node">&quot;(ProgressBar: #{@current}/#{@total})&quot;</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000473'>
                <a name='M000473'>      </a>
                <div class='synopsis'>
                  <span class='name'>set</span>
                  <span class='arguments'>(count)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000473-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000473-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 220</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set</span>(<span class="ruby-identifier">count</span>)&#x000A;    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">count</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>&#x000A;      <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;invalid count less than zero: #{count}&quot;</span>&#x000A;    <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@total</span>&#x000A;      <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@total_overflow</span>&#x000A;        <span class="ruby-ivar">@total</span> = <span class="ruby-identifier">count</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>&#x000A;      <span class="ruby-keyword kw">else</span>&#x000A;        <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;invalid count greater than total: #{count}&quot;</span>&#x000A;      <span class="ruby-keyword kw">end</span>&#x000A;    <span class="ruby-keyword kw">end</span>&#x000A;    <span class="ruby-ivar">@current</span> = <span class="ruby-identifier">count</span>&#x000A;    <span class="ruby-identifier">show_progress</span>&#x000A;    <span class="ruby-ivar">@previous</span> = <span class="ruby-ivar">@current</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000465'>
                <a name='M000465'>      </a>
                <div class='synopsis'>
                  <span class='name'>title=</span>
                  <span class='arguments'>(str)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000465-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000465-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 185</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">title=</span>(<span class="ruby-identifier">str</span>)&#x000A;    <span class="ruby-ivar">@title</span> = <span class="ruby-identifier">str</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000467'>
                <a name='M000467'>      </a>
                <div class='synopsis'>
                  <span class='name'>total_overflow=</span>
                  <span class='arguments'>(boolv)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000467-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000467-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 193</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">total_overflow=</span>(<span class="ruby-identifier">boolv</span>)&#x000A;    <span class="ruby-ivar">@total_overflow</span> = <span class="ruby-identifier">boolv</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">true</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">false</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <h2>Private instance methods</h2>
              <div class='private-instance method' id='method-M000458'>
                <a name='M000458'>      </a>
                <div class='synopsis'>
                  <span class='name'>bar</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000458-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000458-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 116</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bar</span>&#x000A;    <span class="ruby-identifier">len</span> = <span class="ruby-identifier">percentage</span> <span class="ruby-operator">*</span> <span class="ruby-ivar">@bar_length</span> <span class="ruby-operator">/</span> <span class="ruby-value">100</span>&#x000A;    <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;|%s%s|&quot;</span>, <span class="ruby-ivar">@bar_mark</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">len</span>, <span class="ruby-value str">&quot; &quot;</span> <span class="ruby-operator">*</span>  (<span class="ruby-ivar">@bar_length</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">len</span>))&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='private-instance method' id='method-M000451'>
                <a name='M000451'>      </a>
                <div class='synopsis'>
                  <span class='name'>bytes</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000451-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000451-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 72</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bytes</span>&#x000A;    <span class="ruby-identifier">convert_bytes</span>(<span class="ruby-ivar">@current</span>)&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='private-instance method' id='method-M000449'>
                <a name='M000449'>      </a>
                <div class='synopsis'>
                  <span class='name'>convert_bytes</span>
                  <span class='arguments'>(bytes)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000449-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000449-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 55</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">convert_bytes</span> (<span class="ruby-identifier">bytes</span>)&#x000A;    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">bytes</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1024</span>&#x000A;      <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%6dB&quot;</span>, <span class="ruby-identifier">bytes</span>)&#x000A;    <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">bytes</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1024</span> <span class="ruby-operator">*</span> <span class="ruby-value">1000</span> <span class="ruby-comment cmt"># 1000kb</span>&#x000A;      <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%5.1fKB&quot;</span>, <span class="ruby-identifier">bytes</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> <span class="ruby-value">1024</span>)&#x000A;    <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">bytes</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1024</span> <span class="ruby-operator">*</span> <span class="ruby-value">1024</span> <span class="ruby-operator">*</span> <span class="ruby-value">1000</span>  <span class="ruby-comment cmt"># 1000mb</span>&#x000A;      <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%5.1fMB&quot;</span>, <span class="ruby-identifier">bytes</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> <span class="ruby-value">1024</span> <span class="ruby-operator">/</span> <span class="ruby-value">1024</span>)&#x000A;    <span class="ruby-keyword kw">else</span>&#x000A;      <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%5.1fGB&quot;</span>, <span class="ruby-identifier">bytes</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> <span class="ruby-value">1024</span> <span class="ruby-operator">/</span> <span class="ruby-value">1024</span> <span class="ruby-operator">/</span> <span class="ruby-value">1024</span>)&#x000A;    <span class="ruby-keyword kw">end</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='private-instance method' id='method-M000454'>
                <a name='M000454'>      </a>
                <div class='synopsis'>
                  <span class='name'>elapsed</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000454-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000454-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 95</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">elapsed</span>&#x000A;    <span class="ruby-identifier">elapsed</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@start_time</span>&#x000A;    <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;Time: %s&quot;</span>, <span class="ruby-identifier">format_time</span>(<span class="ruby-identifier">elapsed</span>))&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='private-instance method' id='method-M000457'>
                <a name='M000457'>      </a>
                <div class='synopsis'>
                  <span class='name'>eol</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000457-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000457-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 112</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eol</span>&#x000A;    <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@is_finished</span> <span class="ruby-keyword kw">then</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-keyword kw">else</span> <span class="ruby-value str">&quot;\r&quot;</span> <span class="ruby-keyword kw">end</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='private-instance method' id='method-M000453'>
                <a name='M000453'>      </a>
                <div class='synopsis'>
                  <span class='name'>eta</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  ETA stands for Estimated Time of Arrival.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000453-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000453-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 85</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eta</span>&#x000A;    <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@current</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>&#x000A;      <span class="ruby-value str">&quot;ETA:  --:--:--&quot;</span>&#x000A;    <span class="ruby-keyword kw">else</span>&#x000A;      <span class="ruby-identifier">elapsed</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@start_time</span>&#x000A;      <span class="ruby-identifier">eta</span> = <span class="ruby-identifier">elapsed</span> <span class="ruby-operator">*</span> <span class="ruby-ivar">@total</span> <span class="ruby-operator">/</span> <span class="ruby-ivar">@current</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">elapsed</span>;&#x000A;      <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;ETA:  %s&quot;</span>, <span class="ruby-identifier">format_time</span>(<span class="ruby-identifier">eta</span>))&#x000A;    <span class="ruby-keyword kw">end</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='private-instance method' id='method-M000452'>
                <a name='M000452'>      </a>
                <div class='synopsis'>
                  <span class='name'>format_time</span>
                  <span class='arguments'>(t)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000452-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000452-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 76</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">format_time</span>(<span class="ruby-identifier">t</span>)&#x000A;    <span class="ruby-identifier">t</span> = <span class="ruby-identifier">t</span>.<span class="ruby-identifier">to_i</span>&#x000A;    <span class="ruby-identifier">sec</span> = <span class="ruby-identifier">t</span> <span class="ruby-operator">%</span> <span class="ruby-value">60</span>&#x000A;    <span class="ruby-identifier">min</span>  = (<span class="ruby-identifier">t</span> <span class="ruby-operator">/</span> <span class="ruby-value">60</span>) <span class="ruby-operator">%</span> <span class="ruby-value">60</span>&#x000A;    <span class="ruby-identifier">hour</span> = <span class="ruby-identifier">t</span> <span class="ruby-operator">/</span> <span class="ruby-value">3600</span>&#x000A;    <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%02d:%02d:%02d&quot;</span>, <span class="ruby-identifier">hour</span>, <span class="ruby-identifier">min</span>, <span class="ruby-identifier">sec</span>);&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='private-instance method' id='method-M000461'>
                <a name='M000461'>      </a>
                <div class='synopsis'>
                  <span class='name'>get_width</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000461-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000461-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 133</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_width</span>&#x000A;    <span class="ruby-comment cmt"># FIXME: I don't know how portable it is.</span>&#x000A;    <span class="ruby-identifier">default_width</span> = <span class="ruby-value">80</span>&#x000A;    <span class="ruby-keyword kw">begin</span>&#x000A;      <span class="ruby-identifier">tiocgwinsz</span> = <span class="ruby-value">0x5413</span>&#x000A;      <span class="ruby-identifier">data</span> = [<span class="ruby-value">0</span>, <span class="ruby-value">0</span>, <span class="ruby-value">0</span>, <span class="ruby-value">0</span>].<span class="ruby-identifier">pack</span>(<span class="ruby-value str">&quot;SSSS&quot;</span>)&#x000A;      <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@out</span>.<span class="ruby-identifier">ioctl</span>(<span class="ruby-identifier">tiocgwinsz</span>, <span class="ruby-identifier">data</span>) <span class="ruby-operator">&gt;=</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">then</span>&#x000A;        <span class="ruby-identifier">rows</span>, <span class="ruby-identifier">cols</span>, <span class="ruby-identifier">xpixels</span>, <span class="ruby-identifier">ypixels</span> = <span class="ruby-identifier">data</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-value str">&quot;SSSS&quot;</span>)&#x000A;        <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">cols</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">cols</span> <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">default_width</span> <span class="ruby-keyword kw">end</span>&#x000A;      <span class="ruby-keyword kw">else</span>&#x000A;        <span class="ruby-identifier">default_width</span>&#x000A;      <span class="ruby-keyword kw">end</span>&#x000A;    <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span>&#x000A;      <span class="ruby-identifier">default_width</span>&#x000A;    <span class="ruby-keyword kw">end</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='private-instance method' id='method-M000459'>
                <a name='M000459'>      </a>
                <div class='synopsis'>
                  <span class='name'>percentage</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000459-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000459-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 121</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">percentage</span>&#x000A;    <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@total</span>.<span class="ruby-identifier">zero?</span>&#x000A;      <span class="ruby-value">100</span>&#x000A;    <span class="ruby-keyword kw">else</span>&#x000A;      <span class="ruby-ivar">@current</span>  <span class="ruby-operator">*</span> <span class="ruby-value">100</span> <span class="ruby-operator">/</span> <span class="ruby-ivar">@total</span>&#x000A;    <span class="ruby-keyword kw">end</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='private-instance method' id='method-M000462'>
                <a name='M000462'>      </a>
                <div class='synopsis'>
                  <span class='name'>show</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000462-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000462-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 150</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">show</span>&#x000A;    <span class="ruby-identifier">arguments</span> = <span class="ruby-ivar">@format_arguments</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">method</span><span class="ruby-operator">|</span> <span class="ruby-identifier">send</span>(<span class="ruby-identifier">method</span>)}&#x000A;    <span class="ruby-identifier">line</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-ivar">@format</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)&#x000A;&#x000A;    <span class="ruby-identifier">width</span> = <span class="ruby-identifier">get_width</span>&#x000A;    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">width</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>&#x000A;      <span class="ruby-ivar">@out</span>.<span class="ruby-identifier">print</span>(<span class="ruby-identifier">line</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">eol</span>)&#x000A;    <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">width</span>&#x000A;      <span class="ruby-ivar">@bar_length</span> = [<span class="ruby-ivar">@bar_length</span> <span class="ruby-operator">-</span> (<span class="ruby-identifier">line</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">width</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>), <span class="ruby-value">0</span>].<span class="ruby-identifier">max</span>&#x000A;      <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@bar_length</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">then</span> <span class="ruby-ivar">@out</span>.<span class="ruby-identifier">print</span>(<span class="ruby-identifier">line</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">eol</span>) <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">show</span> <span class="ruby-keyword kw">end</span>&#x000A;    <span class="ruby-keyword kw">else</span> <span class="ruby-comment cmt">#line.length &lt; width - 1</span>&#x000A;      <span class="ruby-ivar">@bar_length</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">width</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>&#x000A;      <span class="ruby-identifier">show</span>&#x000A;    <span class="ruby-keyword kw">end</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='private-instance method' id='method-M000463'>
                <a name='M000463'>      </a>
                <div class='synopsis'>
                  <span class='name'>show_progress</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000463-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000463-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 166</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">show_progress</span>&#x000A;    <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@total</span>.<span class="ruby-identifier">zero?</span>&#x000A;      <span class="ruby-identifier">cur_percentage</span> = <span class="ruby-value">100</span>&#x000A;      <span class="ruby-identifier">prev_percentage</span> = <span class="ruby-value">0</span>&#x000A;    <span class="ruby-keyword kw">else</span>&#x000A;      <span class="ruby-identifier">cur_percentage</span>  = (<span class="ruby-ivar">@current</span>  <span class="ruby-operator">*</span> <span class="ruby-value">100</span> <span class="ruby-operator">/</span> <span class="ruby-ivar">@total</span>).<span class="ruby-identifier">to_i</span>&#x000A;      <span class="ruby-identifier">prev_percentage</span> = (<span class="ruby-ivar">@previous</span> <span class="ruby-operator">*</span> <span class="ruby-value">100</span> <span class="ruby-operator">/</span> <span class="ruby-ivar">@total</span>).<span class="ruby-identifier">to_i</span>&#x000A;    <span class="ruby-keyword kw">end</span>&#x000A;&#x000A;    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">cur_percentage</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">prev_percentage</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@is_finished</span>&#x000A;      <span class="ruby-identifier">show</span>&#x000A;    <span class="ruby-keyword kw">end</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='private-instance method' id='method-M000455'>
                <a name='M000455'>      </a>
                <div class='synopsis'>
                  <span class='name'>stat</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000455-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000455-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 100</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">stat</span>&#x000A;    <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@is_finished</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">elapsed</span> <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">eta</span> <span class="ruby-keyword kw">end</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='private-instance method' id='method-M000456'>
                <a name='M000456'>      </a>
                <div class='synopsis'>
                  <span class='name'>stat_for_file_transfer</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000456-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000456-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 104</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">stat_for_file_transfer</span>&#x000A;    <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@is_finished</span> <span class="ruby-keyword kw">then</span> &#x000A;      <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%s %s %s&quot;</span>, <span class="ruby-identifier">bytes</span>, <span class="ruby-identifier">transfer_rate</span>, <span class="ruby-identifier">elapsed</span>)&#x000A;    <span class="ruby-keyword kw">else</span> &#x000A;      <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%s %s %s&quot;</span>, <span class="ruby-identifier">bytes</span>, <span class="ruby-identifier">transfer_rate</span>, <span class="ruby-identifier">eta</span>)&#x000A;    <span class="ruby-keyword kw">end</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='private-instance method' id='method-M000460'>
                <a name='M000460'>      </a>
                <div class='synopsis'>
                  <span class='name'>title</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000460-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000460-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 129</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">title</span>&#x000A;    <span class="ruby-ivar">@title</span>[<span class="ruby-value">0</span>,<span class="ruby-value">13</span>] <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;:&quot;</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='private-instance method' id='method-M000450'>
                <a name='M000450'>      </a>
                <div class='synopsis'>
                  <span class='name'>transfer_rate</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000450-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000450-source'><span class="ruby-comment cmt"># File lib/more/facets/progressbar.rb, line 67</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">transfer_rate</span>&#x000A;    <span class="ruby-identifier">bytes_per_second</span> = <span class="ruby-ivar">@current</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> (<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@start_time</span>)&#x000A;    <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%s/s&quot;</span>, <span class="ruby-identifier">convert_bytes</span>(<span class="ruby-identifier">bytes_per_second</span>))&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
