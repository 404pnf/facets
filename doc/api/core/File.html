<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">

  <title>Facets Core Extensions</title>

  <link rel="shortcut icon" type="image/x-icon" href="./assets/favicon.ico" />

  <link rel="stylesheet" type="text/css" href="./assets/long/css/low.css" />
  <link rel="stylesheet" type="text/css" href="./assets/long/css/screen.css" media="screen" />
  <link rel="stylesheet" type="text/css" href="./assets/long/css/print.css" media="print" />
  <link rel="stylesheet" type="text/css" href="./assets/prettify.css" />

  <link rel="alternate stylesheet" type="text/css" href="./assets/long/css/low_vision_screen.css" media="screen" title="Low vision" />

  <script type="text/javascript" src="./assets/jquery.js" ></script>
  <script type="text/javascript" src="./assets/prettify.js"></script>
  <script type="text/javascript" src="./assets/quicksearch.js"></script>
  <script type="text/javascript" src="./assets/main.js"></script>  

  <script type="text/javascript">
    $(document).ready( function() {
	    hookHighlightSyntax();
	    hookQuickSearch();
	    // $('ul.link-list a').bind( "click", highlightClickTarget );
    });
  </script>
</head>

<body>
  <div id="page">

    <div id="header">
      <div id="logo" style="font-size: 52px; font-family: times, serif; font-style: italic; color: black;">
        <img src="./assets/long/img/logo.gif" alt="" title="" height="119" align="absmiddle">Facets Core Extensions
      </div>
      <div class="site-links">
<a href="./index.html">Index</a><span class="separator"> | </span>
  <a href="http://rubyworks.github.com/facets">Home Page</a><span class="separator"> |</span>
  <a href="http://wiki.github.com/rubyworks/facets">Community</a><span class="separator"> | </span>
<a href="http://www.ruby-lang.org/en/about/">About Ruby</a>
      </div>
    </div>

    <hr class="hidden-modern">

    <div id="main-wrapper">
      <div id="main">

        

<div id="content-wrapper">

    <div id="head-wrapper-1">
        <div id="head-wrapper-2">
            <div id="head">
                <h1>File</h1>
            </div>
        </div>
    </div>

    <div id="content">

        <!-- DESCRIPTION -->

        

        <!-- REQUIRES -->

        

        <!-- CONTENTS -->

        
        

        <!-- INCLUDED MODULES -->

        

        <!-- DESCRIPTION (of what?) --->

        

        <!-- CLASSES AND MODULES -->

        

        <!-- CONSTANTS -->

        

        <!-- ATTRIBUTES -->

        

        <!-- METHODS -->

        
                <h3>Class Public methods</h3>
                <dl>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-c-append_source')" id="l_method-c-append_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-c-append"></a><b>append</b>(file, str)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-c-append_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/file/append.rb, line 7</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">append</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">str</span>)
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">file</span>, <span class="ruby-string">'ab'</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">f</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">str</span>
  }
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Append to a file.</p>

<p>CREDIT: George Moschovitis</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-c-create_source')" id="l_method-c-create_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-c-create"></a><b>create</b>(path, str='', &amp;blk)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-c-create_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/file/create.rb, line 13</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">str</span>=<span class="ruby-string">''</span>, &amp;<span class="ruby-identifier">blk</span>)
  <span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-string">'wb'</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">f</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">str</span>
    <span class="ruby-identifier">blk</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">f</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">blk</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Creates a new file, or overwrites an existing file, and writes a string
into it. Can also take a block just like File#open, which is yielded
<em>after</em> the string is writ.</p>

<pre>str = 'The content for the file'
File.create('myfile.txt', str)</pre>

<p>CREDIT: George Moschovitis</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-c-ext_source')" id="l_method-c-ext_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-c-ext"></a><b>ext</b>(filename, new_ext=nil)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-c-ext_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/file/ext.rb, line 25</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">ext</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">new_ext</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">old_ext</span> = <span class="ruby-identifier">extname</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">new_ext</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">old_ext</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp">/^\./</span>, <span class="ruby-string">''</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">new_ext</span> = <span class="ruby-string">'.'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">new_ext</span> <span class="ruby-keyword">unless</span> (<span class="ruby-identifier">new_ext</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">new_ext</span>[<span class="ruby-value">0</span>,<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-string">'.'</span>)
    <span class="ruby-identifier">filename</span>.<span class="ruby-identifier">chomp</span>(<span class="ruby-identifier">old_ext</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">new_ext</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Takes a file name string and returns or changes its extension.</p>

<p>Without a new extension argument, returns the extension of the file name.
In this respect #ext is like #extname, but unlike #extname it does not
include the dot prefix.</p>

<p>With a new extension argument, changes the exension of the file name to the
new extension and returns it.</p>

<p>Examples</p>

<pre>File.ext('file.rb')          # =&gt; 'rb'
File.ext('file.rb', 'txt')   # =&gt; 'file.txt'
File.ext('file.rb', '.txt')  # =&gt; 'file.txt'
File.ext('file.rb', '')      # =&gt; 'file'</pre>

<p>This method can be used with <a
href="String.html#method-i-file">String#file</a> for more object-oriented
notation:</p>

<pre>'file.rb'.file.ext('txt')    # =&gt; 'file.txt'</pre>

<p>CREDIT: Lavir the Whiolet</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-c-null_source')" id="l_method-c-null_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-c-null"></a><b>null</b>()
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-c-null_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/file/null.rb, line 7</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">null</span>
  <span class="ruby-keyword">case</span> <span class="ruby-constant">RUBY_PLATFORM</span>
  <span class="ruby-keyword">when</span> <span class="ruby-regexp">/mswin/</span>
    <span class="ruby-string">'NUL'</span>
  <span class="ruby-keyword">when</span> <span class="ruby-regexp">/amiga/</span>
    <span class="ruby-string">'NIL:'</span>
  <span class="ruby-keyword">when</span> <span class="ruby-regexp">/openvms/</span>
    <span class="ruby-string">'NL:'</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-string">'/dev/null'</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Platform dependent null device.</p>

<p>CREDIT: Daniel Burger</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-c-read_binary_source')" id="l_method-c-read_binary_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-c-read_binary"></a><b>read_binary</b>(fname)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-c-read_binary_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/file/read_binary.rb, line 11</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">read_binary</span>(<span class="ruby-identifier">fname</span>)
  <span class="ruby-identifier">open</span>(<span class="ruby-identifier">fname</span>, <span class="ruby-string">'rb'</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">read</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Read in a file as binary data.</p>

<p>Assuming we had a binary file ‘binary.dat’.</p>

<pre>File.read_binary('binary.dat')</pre>

<p>CREDIT: George Moschovitis</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-c-read_list_source')" id="l_method-c-read_list_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-c-read_list"></a><b>read_list</b>(filepath, options={})
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-c-read_list_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/file/read_list.rb, line 12</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">read_list</span>(<span class="ruby-identifier">filepath</span>, <span class="ruby-identifier">options</span>={})
  <span class="ruby-identifier">chomp</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:chomp</span>]
  <span class="ruby-identifier">omit</span>  = <span class="ruby-keyword">case</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:omit</span>]
          <span class="ruby-keyword">when</span> <span class="ruby-constant">Regexp</span>
            <span class="ruby-identifier">omit</span>
          <span class="ruby-keyword">when</span> <span class="ruby-keyword">nil</span>
            <span class="ruby-regexp">/^\s*\#/</span>
          <span class="ruby-keyword">else</span>
            <span class="ruby-node">/^\s*#{Regexp.escape(omit)}/</span>
          <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">list</span> = []
  <span class="ruby-identifier">readlines</span>(<span class="ruby-identifier">filepath</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">chomp</span>(<span class="ruby-identifier">chomp</span>)
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">omit</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">line</span>
    <span class="ruby-identifier">list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">list</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Reads in a file, removes blank lines and removes lines starting with ‘#’
and then returns an array of all the remaining lines.</p>

<p>Thr remark indicator can be overridden via the <tt>:omit:</tt> option,
which can be a regualar expression or a string that is match against the
start of a line.</p>

<p>CREDIT: Trans</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-c-rewrite_source')" id="l_method-c-rewrite_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-c-rewrite"></a><b>rewrite</b>(name, mode = &quot;&quot;)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-c-rewrite_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/file/rewrite.rb, line 30</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">rewrite</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">mode</span> = <span class="ruby-string">&quot;&quot;</span>) <span class="ruby-comment">#:yield:</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-identifier">raise</span>(<span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Need to supply block to File.rewrite&quot;</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">mode</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Numeric</span>) <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">flag</span>, <span class="ruby-identifier">mode</span> = <span class="ruby-identifier">mode</span>, <span class="ruby-string">&quot;&quot;</span>
    <span class="ruby-identifier">mode</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&quot;b&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">flag</span> &amp; <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">Constants</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">mode</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&quot;+&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">flag</span> &amp; <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">Constants</span><span class="ruby-operator">::</span><span class="ruby-constant">APPEND</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">mode</span>.<span class="ruby-identifier">delete!</span>(<span class="ruby-string">&quot;^b+&quot;</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">old_str</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">name</span>, <span class="ruby-node">&quot;r#{mode}&quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">read</span> } <span class="ruby-comment">#rescue &quot;&quot;</span>
  <span class="ruby-identifier">old_str</span> = <span class="ruby-identifier">old_str</span>.<span class="ruby-identifier">clone</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">new_str</span> = <span class="ruby-keyword">yield</span>(<span class="ruby-identifier">old_str</span>)
  <span class="ruby-keyword">ensure</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">old_str</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">new_str</span>
      <span class="ruby-identifier">open</span>(<span class="ruby-identifier">name</span>, <span class="ruby-node">&quot;w#{mode}&quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">new_str</span>) }
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Opens a file as a string and writes back the string to the file at the end
of the block.</p>

<p>Returns the number of written bytes or <tt>nil</tt> if the file wasn’t
modified.</p>

<p>Note that the file will even be written back in case the block raises an
exception.</p>

<p>Mode can either be “b” or “+” and specifies to open the file in binary mode
(no mapping of the plattform’s newlines to “n” is done) or to append to it.</p>

<p>Assuming we had a file ‘message.txt’ and had a binary file ‘binary.dat’.</p>

<pre># Reverse contents of &quot;message.txt&quot;
File.rewrite(&quot;message.txt&quot;) { |str| str.reverse }

# Replace &quot;foo&quot; by &quot;bar&quot; in &quot;binary.dat&quot;.
File.rewrite(&quot;binary.dat&quot;, &quot;b&quot;) { |str| str.gsub(&quot;foo&quot;, &quot;bar&quot;) }</pre>

<p>IMPORTANT: The old version of this method required in place modification of
the file string. The new version will write whatever the block returns
instead!!!</p>

<p>CREDIT: George Moschovitis</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-c-rewrite-21_source')" id="l_method-c-rewrite-21_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-c-rewrite-21"></a><b>rewrite!</b>(name, mode = &quot;&quot;)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-c-rewrite-21_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/file/rewrite.rb, line 64</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">rewrite!</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">mode</span> = <span class="ruby-string">&quot;&quot;</span>) <span class="ruby-comment">#:yield:</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-identifier">raise</span>(<span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Need to supply block to File.rewrite&quot;</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">mode</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Numeric</span>) <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">flag</span>, <span class="ruby-identifier">mode</span> = <span class="ruby-identifier">mode</span>, <span class="ruby-string">&quot;&quot;</span>
    <span class="ruby-identifier">mode</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&quot;b&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">flag</span> &amp; <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">Constants</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">mode</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&quot;+&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">flag</span> &amp; <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">Constants</span><span class="ruby-operator">::</span><span class="ruby-constant">APPEND</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">mode</span>.<span class="ruby-identifier">delete!</span>(<span class="ruby-string">&quot;^b+&quot;</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">old_str</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">name</span>, <span class="ruby-node">&quot;r#{mode}&quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">read</span> } <span class="ruby-comment">#rescue &quot;&quot;</span>
  <span class="ruby-identifier">new_str</span> = <span class="ruby-identifier">old_str</span>.<span class="ruby-identifier">clone</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">yield</span>(<span class="ruby-identifier">new_str</span>)
  <span class="ruby-keyword">ensure</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">old_str</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">new_str</span>
      <span class="ruby-identifier">open</span>(<span class="ruby-identifier">name</span>, <span class="ruby-node">&quot;w#{mode}&quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">new_str</span>) }
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>In place version of #rewrite. This version of method requires that the
string be modified in place within the block.</p>

<pre># Reverse contents of &quot;message&quot;
File.rewrite(&quot;message.txt&quot;) { |str| str.reverse! }

# Replace &quot;foo&quot; by &quot;bar&quot; in &quot;binary&quot;
File.rewrite(&quot;binary.dat&quot;, &quot;b&quot;) { |str| str.gsub!(&quot;foo&quot;, &quot;bar&quot;) }</pre>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-c-rootname_source')" id="l_method-c-rootname_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-c-rootname"></a><b>rootname</b>(path)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-c-rootname_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/file/rootname.rb, line 12</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">rootname</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-comment"># -- this should be fairly robust</span>
  <span class="ruby-identifier">path_re</span> = <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'['</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">escape</span>(<span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">Separator</span> <span class="ruby-operator">+</span> <span class="ruby-string">%{\/}</span>) <span class="ruby-operator">+</span> <span class="ruby-string">']'</span>)

  <span class="ruby-identifier">head</span>, <span class="ruby-identifier">tail</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">split</span>(<span class="ruby-identifier">path_re</span>, <span class="ruby-value">2</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-string">'.'</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">head</span>
  <span class="ruby-keyword">return</span> <span class="ruby-string">'/'</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">head</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">head</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Returns only the first portion of the directory of a file path name.</p>

<pre>File.rootname('lib/jump.rb')  #=&gt; 'lib'
File.rootname('/jump.rb')     #=&gt; '/'
File.rootname('jump.rb')      #=&gt; '.'</pre>

<p>CREDIT: Trans</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-c-sanitize_source')" id="l_method-c-sanitize_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-c-sanitize"></a><b>sanitize</b>(filename)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-c-sanitize_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/file/sanitize.rb, line 10</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">sanitize</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-identifier">filename</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">filename</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\&quot;</span>, <span class="ruby-string">&quot;/&quot;</span>)) <span class="ruby-comment"># work-around for IE</span>
  <span class="ruby-identifier">filename</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">/[^a-zA-Z0-9\.\-\+_]/</span>,<span class="ruby-string">&quot;_&quot;</span>)
  <span class="ruby-identifier">filename</span> = <span class="ruby-node">&quot;_#{filename}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">filename</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^\.+$/</span>
  <span class="ruby-identifier">filename</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Cleans up a filename to ensure it will work on a filesystem.</p>

<pre>File.sanitize(&quot;yo+baby!&quot;)   #=&gt; 'yo+baby_'
File.sanitize(&quot;.what&amp;up&quot;)  #=&gt; '.what_up'</pre>

<p>CREDIT: George Moschovitis</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-c-split_all_source')" id="l_method-c-split_all_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-c-split_all"></a><b>split_all</b>(path)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-c-split_all_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/file/split_all.rb, line 11</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">split_all</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-identifier">head</span>, <span class="ruby-identifier">tail</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">split</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-keyword">return</span> [<span class="ruby-identifier">tail</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">head</span> <span class="ruby-operator">==</span> <span class="ruby-string">'.'</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tail</span> <span class="ruby-operator">==</span> <span class="ruby-string">'/'</span>
  <span class="ruby-keyword">return</span> [<span class="ruby-identifier">head</span>, <span class="ruby-identifier">tail</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">head</span> <span class="ruby-operator">==</span> <span class="ruby-string">'/'</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">split_all</span>(<span class="ruby-identifier">head</span>) <span class="ruby-operator">+</span> [<span class="ruby-identifier">tail</span>]
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Splits a file path into an array of individual path components. This
differs from <tt>File.split</tt>, which divides the path into only two
parts, directory path and basename.</p>

<pre>File.split_all(&quot;a/b/c&quot;)  #=&gt; ['a', 'b', 'c']</pre>

<p>CREDIT: Trans</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-c-split_root_source')" id="l_method-c-split_root_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-c-split_root"></a><b>split_root</b>(path)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-c-split_root_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/file/split_root.rb, line 7</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">split_root</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-identifier">path_re</span> = <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'['</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">escape</span>(<span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">Separator</span> <span class="ruby-operator">+</span> <span class="ruby-string">%{\/}</span>) <span class="ruby-operator">+</span> <span class="ruby-string">']'</span>)
  <span class="ruby-identifier">path</span>.<span class="ruby-identifier">split</span>(<span class="ruby-identifier">path_re</span>, <span class="ruby-value">2</span>)
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Return the head of path from the rest of the path.</p>

<pre>File.split_root('etc/xdg/gtk')  #=&gt; ['etc', 'xdg/gtk']</pre>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-c-write_source')" id="l_method-c-write_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-c-write"></a><b>write</b>(path, data)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-c-write_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/file/write.rb, line 15</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">data</span>)
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-string">&quot;wb&quot;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">data</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Writes the given data to the given path and closes the file.  This is done
in binary mode, complementing <tt>IO.read</tt> in standard Ruby.</p>

<pre>str = 'The content for the file'
File.write('write.txt', str)</pre>

<p>Returns the number of bytes written.</p>

<p>CREDIT: Gavin Sinclair</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-c-writelines_source')" id="l_method-c-writelines_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-c-writelines"></a><b>writelines</b>(path, data)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-c-writelines_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/file/writelines.rb, line 19</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">writelines</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">data</span>)
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-string">&quot;wb&quot;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">file</span>.<span class="ruby-identifier">puts</span>(<span class="ruby-identifier">data</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">data</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Writes the given array of data to the given path and closes the file. This
is done in binary mode, complementing <tt>IO.readlines</tt> in standard
Ruby.</p>

<p>Note that <tt>readlines</tt> (the standard Ruby method) returns an array of
lines <em>with newlines intact</em>, whereas <tt>writelines</tt> uses
<tt>puts</tt>, and so appends newlines if necessary.  In this small way,
<tt>readlines</tt> and <tt>writelines</tt> are not exact opposites.</p>

<pre>data = ['The content', ['for the file']]
File.writelines('writelines.txt', data)</pre>

<p>Returns number of lines written.</p>

<p>CREDIT: Noah Gibbs, Gavin Sinclair</p>

                    

                    

                    </dd>
                
            
        
        

     </div>

 </div>

<hr class="hidden-modern" />

<div id="sidebar-wrapper">

    <div id="sidebar">

        <div class="navigation" style="background-color: transparent;">
          <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
          <fieldset>
            <legend>Quicksearch</legend>
            <input type="text" name="quicksearch" value="" class="quicksearch-field" style="width: 95%;" />
          </fieldset>
          </form>
        </div>

        <br/><br/>

        <!-- PARENT -->
        
        <div class="navigation">
          <h3>Parent</h3>
          <ul>
            <li><a href="lib/core/facets/file/read_binary_rb.html">read_binary.rb</a></li>
          </ul>
        </div>
        

        <!-- SUPERCLASS -->
        
          
          <div class="navigation">
            <h3>Superclass</h3>
            <ul>
            <li>
              
                <a href="Object.html">Object</a>
              
            </li>
            </ul>
          </div>
          
        

        <!-- INCLUDED MODULES -->

        

        <!-- CLASSES AND MODULES -->

        

        <!-- METHOD LIST -->
        
        
        <div class="navigation">
            <h3>Methods</h3>
            <ul class="menu quicksearch-target">
                
                <li><a href="#method-c-append">append</a></li>
                
                <li><a href="#method-c-create">create</a></li>
                
                <li><a href="#method-c-ext">ext</a></li>
                
                <li><a href="#method-c-null">null</a></li>
                
                <li><a href="#method-c-read_binary">read_binary</a></li>
                
                <li><a href="#method-c-read_list">read_list</a></li>
                
                <li><a href="#method-c-rewrite">rewrite</a></li>
                
                <li><a href="#method-c-rewrite-21">rewrite!</a></li>
                
                <li><a href="#method-c-rootname">rootname</a></li>
                
                <li><a href="#method-c-sanitize">sanitize</a></li>
                
                <li><a href="#method-c-split_all">split_all</a></li>
                
                <li><a href="#method-c-split_root">split_root</a></li>
                
                <li><a href="#method-c-write">write</a></li>
                
                <li><a href="#method-c-writelines">writelines</a></li>
                
            </ul>
        </div>
        

        <!-- IN FILES -->

        <div class="navigation">
          <h3>In Files</h3>
          <ul>
          
            <li class="file">
              <a href="./lib/core/facets/file/read_binary_rb.html" title="lib/core/facets/file/read_binary.rb">lib/core/facets/file/read_binary.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/core/facets/file/rootname_rb.html" title="lib/core/facets/file/rootname.rb">lib/core/facets/file/rootname.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/core/facets/file/split_root_rb.html" title="lib/core/facets/file/split_root.rb">lib/core/facets/file/split_root.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/core/facets/file/sanitize_rb.html" title="lib/core/facets/file/sanitize.rb">lib/core/facets/file/sanitize.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/core/facets/file/null_rb.html" title="lib/core/facets/file/null.rb">lib/core/facets/file/null.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/core/facets/file/read_list_rb.html" title="lib/core/facets/file/read_list.rb">lib/core/facets/file/read_list.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/core/facets/file/create_rb.html" title="lib/core/facets/file/create.rb">lib/core/facets/file/create.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/core/facets/file/write_rb.html" title="lib/core/facets/file/write.rb">lib/core/facets/file/write.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/core/facets/file/writelines_rb.html" title="lib/core/facets/file/writelines.rb">lib/core/facets/file/writelines.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/core/facets/file/append_rb.html" title="lib/core/facets/file/append.rb">lib/core/facets/file/append.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/core/facets/file/split_all_rb.html" title="lib/core/facets/file/split_all.rb">lib/core/facets/file/split_all.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/core/facets/file/rewrite_rb.html" title="lib/core/facets/file/rewrite.rb">lib/core/facets/file/rewrite.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/core/facets/file/ext_rb.html" title="lib/core/facets/file/ext.rb">lib/core/facets/file/ext.rb</a>
            </li>
          
          </ul>
        </div>

    </div>

</div>



        <hr class="hidden-modern">

        <div class="foot">
          <div class="site-links">
<a href="./index.html">Index</a><span class="separator"> | </span>
  <a href="http://rubyworks.github.com/facets">Home Page</a><span class="separator"> |</span>
  <a href="http://wiki.github.com/rubyworks/facets">Community</a><span class="separator"> | </span>
<a href="http://www.ruby-lang.org/en/about/">About Ruby</a>
          </div>
        </div>

      </div>
    </div> <!-- end main-wrapper -->

    <div id="search-box">
<form id="search-form" action="http://www.google.com/cse">
<table class="fieldset">
  <tbody><tr>
    <td>
      <input class="field" name="q" size="31" style="background: white url(http://www.google.com/coop/intl/en/images/google_custom_search_watermark.gif) no-repeat scroll left center; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;" onfocus="this.style.background='white'" onblur="if (/^\s*$/.test(this.value)) this.style.background='white url(http://www.google.com/coop/intl/en/images/google_custom_search_watermark.gif) left no-repeat'" type="text">
    </td>
    <td>
      <input name="cx" value="013598269713424429640:g5orptiw95w" type="hidden">
      <input name="ie" value="UTF-8" type="hidden">
      <input class="button" name="sa" value="Search" type="submit">
    </td>
  </tr>
</tbody></table>
</form>
    </div> <!-- end search-box -->

    <div id="footer">
      <div class="fine-print">
<!--
        <p>Content available in <a href="http://www.ruby-lang.org/en/">English</a>, <a href="http://www.ruby-lang.org/fr/">French</a>, <a href="http://www.ruby-lang.org/ja/">Japanese</a>, <a href="http://www.ruby-lang.org/ko/">Korean</a>, <a href="http://www.ruby-lang.org/pl/">Polish</a>, <a href="http://www.ruby-lang.org/es/">Spanish</a>, <a href="http://www.ruby-lang.org/pt/">Portuguese</a>, <a href="http://www.ruby-lang.org/zh_cn/">Simplified Chinese</a>, <a href="http://www.ruby-lang.org/zh_TW/">Traditional Chinese</a>, <a href="http://www.ruby-lang.org/id/">Bahasa Indonesia</a>, <a href="http://www.ruby-lang.org/de/">German</a>, <a href="http://www.ruby-lang.org/it/">Italian</a> and <a href="http://www.ruby-lang.org/bg/">Bulgarian</a>.</p>
-->

        <p>This website is made with Ruby and powered by <a href="http://rdocidile.github.com/rdoc-rubyfaux">RubyFaux</a> v1.2.0.
<!--
          It is proudly maintained by <a href="http://rubyidentity.org/">members of the Ruby community</a>. Please contact
          our <a href="mailto:webmaster@ruby-lang.org">webmaster</a> for questions or comments
          concerning this website.</p>
-->
        </p>
      </div>
    </div>

  </div> <!-- end page  -->
</body>
</html>
