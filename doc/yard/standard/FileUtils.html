<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf8" />
<title>Module: FileUtils</title>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (F)</a> &raquo; 
    
    
    <span class="title">FileUtils</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Module: FileUtils
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/standard/facets/fileutils/wc.rb<span class="defines">,<br />
  lib/standard/facets/fileutils/ln_r.rb,<br /> lib/standard/facets/fileutils/stage.rb,<br /> lib/standard/facets/fileutils/slice.rb,<br /> lib/standard/facets/fileutils/which.rb,<br /> lib/standard/facets/fileutils/amass.rb,<br /> lib/standard/facets/fileutils/cp_rx.rb,<br /> lib/standard/facets/fileutils/safe_ln.rb,<br /> lib/standard/facets/fileutils/whereis.rb,<br /> lib/standard/facets/fileutils/outofdate.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Defined Under Namespace</h2>
<p class="children">
   
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="FileUtils/DryRun.html" title="FileUtils::DryRun (module)">DryRun</a></span>, <span class='object_link'><a href="FileUtils/NoWrite.html" title="FileUtils::NoWrite (module)">NoWrite</a></span>, <span class='object_link'><a href="FileUtils/Verbose.html" title="FileUtils::Verbose (module)">Verbose</a></span>
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="FileUtils/Entry_.html" title="FileUtils::Entry_ (class)">Entry_</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="OPT_TABLE-constant" class="">OPT_TABLE =
          
        </dt>
        <dd><pre class="code"><span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='unless unless_mod kw'>unless</span> <span class='const_defined? fid id'>const_defined?</span><span class='lparen token'>(</span><span class='symbol val'>:OPT_TABLE</span><span class='rparen token'>)</span>
</pre></dd>
      
        <dt id="Win32Exts-constant" class="">Win32Exts =
          
        </dt>
        <dd><pre class="code"><span class='dstring node'>%w{.exe .com .bat .cmd}</span>
</pre></dd>
      
        <dt id="LINKING_SUPPORTED-constant" class="">LINKING_SUPPORTED =
          
        </dt>
        <dd><pre class="code"><span class='lbrack token'>[</span><span class='true true kw'>true</span><span class='rbrack token'>]</span>
</pre></dd>
      
    </dl>
  



  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#amass-instance_method" title="#amass (instance method)">- (Object) <strong>amass</strong>(include_globs, exclude_globs = [], ignore = []) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>An intergrated glob like method that take a set of include globs, exclude
globs and ignore globs to produce a collection of paths.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#copy_entryx-instance_method" title="#copy_entryx (instance method)">- (Object) <strong>copy_entryx</strong>(src, dest, filter, preserve = false, dereference_root = false, remove_destination = false) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Like FileUtils.copy_entry, but takes a filter proc that can return false to
skip a file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cp_rx-instance_method" title="#cp_rx (instance method)">- (Object) <strong>cp_rx</strong>(src, dest, options = {}, &amp;filter) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Like FileUtils.cp_r, but takes a filter proc that can return false to skip
a file:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#head-instance_method" title="#head (instance method)">- (Object) <strong>head</strong>(filename, lines) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>In block form, yields the first number of <tt>lines</tt> of file
<tt>filename</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#link_entry-instance_method" title="#link_entry (instance method)">- (Object) <strong>link_entry</strong>(src, dest, dereference_root = false, remove_destination = false) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Hard links a file system entry <tt>src</tt> to <tt>dest</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ln_r-instance_method" title="#ln_r (instance method)">- (Object) <strong>ln_r</strong>(src, dest, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Options: noop verbose dereference_root remove_destination.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#outofdate%3F-instance_method" title="#outofdate? (instance method)">- (Boolean) <strong>outofdate?</strong>(path, *sources) </a>
    

    
      (also: #out_of_date?)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The opposite of #uptodate?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#safe_ln-instance_method" title="#safe_ln (instance method)">- (Object) <strong>safe_ln</strong>(*args) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Attempt to do a normal file link, but fall back to a copy if the link
fails.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#slice-instance_method" title="#slice (instance method)">- (Object) <strong>slice</strong>(filename, from, to) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>In block form, yields lines <tt>from</tt>-<tt>to</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stage-instance_method" title="#stage (instance method)">- (Object) <strong>stage</strong>(stage_directory, source_directory, files, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Stage by hard linking included files to a stage directory.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tail-instance_method" title="#tail (instance method)">- (Object) <strong>tail</strong>(filename, lines) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>In block form, yields the last number of <tt>lines</tt> of file
<tt>filename</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#wc-instance_method" title="#wc (instance method)">- (Object) <strong>wc</strong>(filename, option = 'all') </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>With no arguments, returns a four element array consisting of the number of
bytes, characters, words and lines in <em>filename</em>, respectively.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#whereis-instance_method" title="#whereis (instance method)">- (Object) <strong>whereis</strong>(prog, path = ENV['PATH']) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>In block form, yields each ((<b>program</b>)) within ((<b>path</b>)).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#which-instance_method" title="#which (instance method)">- (Object) <strong>which</strong>(prog, path = ENV['PATH']) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Looks for the first occurrence of <em>program</em> within <em>path</em>.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="amass-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>amass</strong>(include_globs, exclude_globs = [], ignore = []) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>An intergrated glob like method that take a set of include globs, exclude
globs and ignore globs to produce a collection of paths.</p>

<p>The ignore_globs differ from exclude_globs in that they match by the
basename of the path rather than the whole pathname.</p>

<p>TODO: Should ignore be based on any portion of the path, not just the
basename?</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/standard/facets/fileutils/amass.rb', line 13</span>

<span class='def def kw'>def</span> <span class='amass identifier id'>amass</span><span class='lparen token'>(</span><span class='include_globs identifier id'>include_globs</span><span class='comma token'>,</span> <span class='exclude_globs identifier id'>exclude_globs</span><span class='assign token'>=</span><span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='ignore identifier id'>ignore</span><span class='assign token'>=</span><span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='include_files identifier id'>include_files</span> <span class='assign token'>=</span> <span class='include_globs identifier id'>include_globs</span><span class='dot token'>.</span><span class='flatten identifier id'>flatten</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='g identifier id'>g</span><span class='bitor op'>|</span> <span class='Dir constant id'>Dir</span><span class='dot token'>.</span><span class='glob identifier id'>glob</span><span class='lparen token'>(</span><span class='g identifier id'>g</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='flatten identifier id'>flatten</span><span class='dot token'>.</span><span class='uniq identifier id'>uniq</span>
  <span class='exclude_files identifier id'>exclude_files</span> <span class='assign token'>=</span> <span class='exclude_globs identifier id'>exclude_globs</span><span class='dot token'>.</span><span class='flatten identifier id'>flatten</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='g identifier id'>g</span><span class='bitor op'>|</span> <span class='Dir constant id'>Dir</span><span class='dot token'>.</span><span class='glob identifier id'>glob</span><span class='lparen token'>(</span><span class='g identifier id'>g</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='flatten identifier id'>flatten</span><span class='dot token'>.</span><span class='uniq identifier id'>uniq</span>

  <span class='include_globs identifier id'>include_globs</span> <span class='assign token'>=</span> <span class='include_globs identifier id'>include_globs</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='directory? fid id'>directory?</span><span class='lparen token'>(</span><span class='f identifier id'>f</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='f identifier id'>f</span><span class='comma token'>,</span> <span class='string val'>'**/*'</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='f identifier id'>f</span> <span class='rbrace token'>}</span> <span class='comment val'># Recursive!</span>
  <span class='exclude_globs identifier id'>exclude_globs</span> <span class='assign token'>=</span> <span class='exclude_globs identifier id'>exclude_globs</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='directory? fid id'>directory?</span><span class='lparen token'>(</span><span class='f identifier id'>f</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='f identifier id'>f</span><span class='comma token'>,</span> <span class='string val'>'**/*'</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='f identifier id'>f</span> <span class='rbrace token'>}</span> <span class='comment val'># Recursive!</span>

  <span class='include_files identifier id'>include_files</span> <span class='assign token'>=</span> <span class='include_globs identifier id'>include_globs</span><span class='dot token'>.</span><span class='flatten identifier id'>flatten</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='g identifier id'>g</span><span class='bitor op'>|</span> <span class='Dir constant id'>Dir</span><span class='dot token'>.</span><span class='glob identifier id'>glob</span><span class='lparen token'>(</span><span class='g identifier id'>g</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='flatten identifier id'>flatten</span><span class='dot token'>.</span><span class='uniq identifier id'>uniq</span>
  <span class='exclude_files identifier id'>exclude_files</span> <span class='assign token'>=</span> <span class='exclude_globs identifier id'>exclude_globs</span><span class='dot token'>.</span><span class='flatten identifier id'>flatten</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='g identifier id'>g</span><span class='bitor op'>|</span> <span class='Dir constant id'>Dir</span><span class='dot token'>.</span><span class='glob identifier id'>glob</span><span class='lparen token'>(</span><span class='g identifier id'>g</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='flatten identifier id'>flatten</span><span class='dot token'>.</span><span class='uniq identifier id'>uniq</span>

  <span class='files identifier id'>files</span> <span class='assign token'>=</span> <span class='include_files identifier id'>include_files</span> <span class='minus op'>-</span> <span class='exclude_files identifier id'>exclude_files</span>

  <span class='files identifier id'>files</span> <span class='assign token'>=</span> <span class='files identifier id'>files</span><span class='dot token'>.</span><span class='reject identifier id'>reject</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span> <span class='ignore identifier id'>ignore</span><span class='dot token'>.</span><span class='any? fid id'>any?</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='x identifier id'>x</span><span class='bitor op'>|</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='fnmatch? fid id'>fnmatch?</span><span class='lparen token'>(</span><span class='x identifier id'>x</span><span class='comma token'>,</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='basename identifier id'>basename</span><span class='lparen token'>(</span><span class='f identifier id'>f</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span> <span class='rbrace token'>}</span>

  <span class='files identifier id'>files</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="copy_entryx-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>copy_entryx</strong>(src, dest, filter, preserve = false, dereference_root = false, remove_destination = false) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Like FileUtils.copy_entry, but takes a filter proc that can return false to
skip a file.</p>

<p>Note that if the filter rejects a subdirectory then everything within that
subdirectory is automatically skipped as well.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34
35
36
37
38
39
40
41</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/standard/facets/fileutils/cp_rx.rb', line 32</span>

<span class='def def kw'>def</span> <span class='copy_entryx identifier id'>copy_entryx</span><span class='lparen token'>(</span><span class='src identifier id'>src</span><span class='comma token'>,</span> <span class='dest identifier id'>dest</span><span class='comma token'>,</span> <span class='filter identifier id'>filter</span><span class='comma token'>,</span> <span class='preserve identifier id'>preserve</span> <span class='assign token'>=</span> <span class='false false kw'>false</span><span class='comma token'>,</span> <span class='dereference_root identifier id'>dereference_root</span> <span class='assign token'>=</span> <span class='false false kw'>false</span><span class='comma token'>,</span> <span class='remove_destination identifier id'>remove_destination</span> <span class='assign token'>=</span> <span class='false false kw'>false</span><span class='rparen token'>)</span>
  <span class='Entry_ constant id'>Entry_</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='src identifier id'>src</span><span class='comma token'>,</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='dereference_root identifier id'>dereference_root</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='traverse identifier id'>traverse</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='ent identifier id'>ent</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='filter identifier id'>filter</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='ent identifier id'>ent</span><span class='dot token'>.</span><span class='path identifier id'>path</span><span class='rparen token'>)</span> <span class='then then kw'>then</span>
      <span class='destent identifier id'>destent</span> <span class='assign token'>=</span> <span class='Entry_ constant id'>Entry_</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='dest identifier id'>dest</span><span class='comma token'>,</span> <span class='ent identifier id'>ent</span><span class='dot token'>.</span><span class='rel identifier id'>rel</span><span class='comma token'>,</span> <span class='false false kw'>false</span><span class='rparen token'>)</span>
      <span class='File constant id'>File</span><span class='dot token'>.</span><span class='unlink identifier id'>unlink</span> <span class='destent identifier id'>destent</span><span class='dot token'>.</span><span class='path identifier id'>path</span> <span class='if if_mod kw'>if</span> <span class='remove_destination identifier id'>remove_destination</span> <span class='andop op'>&amp;&amp;</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='file? fid id'>file?</span><span class='lparen token'>(</span><span class='destent identifier id'>destent</span><span class='dot token'>.</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
      <span class='ent identifier id'>ent</span><span class='dot token'>.</span><span class='copy identifier id'>copy</span> <span class='destent identifier id'>destent</span><span class='dot token'>.</span><span class='path identifier id'>path</span>
      <span class='ent identifier id'>ent</span><span class='dot token'>.</span><span class='copy_metadata identifier id'>copy_metadata</span><span class='lparen token'>(</span><span class='destent identifier id'>destent</span><span class='dot token'>.</span><span class='path identifier id'>path</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='preserve identifier id'>preserve</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="cp_rx-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>cp_rx</strong>(src, dest, options = {}, &amp;filter) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Like FileUtils.cp_r, but takes a filter proc that can return false to skip
a file:</p>

<pre class="code"><span class='cp_rx identifier id'>cp_rx</span> <span class='string val'>&quot;bigDirectoryTree&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;dest&quot;</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='symbol val'>:noop</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='rbrace token'>}</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='name identifier id'>name</span><span class='bitor op'>|</span>
   <span class='regexp val'>/dontCopyThis$/</span><span class='dot token'>.</span><span class='match identifier id'>match</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>

<p>Note that if the filter rejects a subdirectory then everything within that
subdirectory is automatically skipped as well.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


16
17
18
19
20
21
22
23
24
25</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/standard/facets/fileutils/cp_rx.rb', line 16</span>

<span class='def def kw'>def</span> <span class='cp_rx identifier id'>cp_rx</span><span class='lparen token'>(</span><span class='src identifier id'>src</span><span class='comma token'>,</span> <span class='dest identifier id'>dest</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='filter identifier id'>filter</span><span class='rparen token'>)</span>
  <span class='fu_check_options identifier id'>fu_check_options</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='comma token'>,</span> <span class='OPT_TABLE constant id'>OPT_TABLE</span><span class='lbrack token'>[</span><span class='string val'>'cp_r'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:verbose</span><span class='rbrack token'>]</span>
    <span class='fu_output_message identifier id'>fu_output_message</span><span class='lparen token'>(</span><span class='dstring node'>&quot;cp -r#{options[:preserve] ? 'p' : ''}#{options[:remove_destination] ? ' --remove-destination' : ''} #{[src,dest].flatten.join ' '}&quot;</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='return return kw'>return</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:noop</span><span class='rbrack token'>]</span>
  <span class='fu_each_src_dest identifier id'>fu_each_src_dest</span><span class='lparen token'>(</span><span class='src identifier id'>src</span><span class='comma token'>,</span> <span class='dest identifier id'>dest</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='s identifier id'>s</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='copy_entryx identifier id'>copy_entryx</span><span class='lparen token'>(</span><span class='s identifier id'>s</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='comma token'>,</span> <span class='filter identifier id'>filter</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:preserve</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:dereference_root</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:remove_destination</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="head-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>head</strong>(filename, lines) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>In block form, yields the first number of <tt>lines</tt> of file
<tt>filename</tt>. In non-block form, it returns an array of the first
number of <tt>lines</tt>:</p>

<pre class="code"><span class='comment val'># Returns first 10 lines of 'myfile'</span>
<span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='head identifier id'>head</span><span class='lparen token'>(</span><span class='string val'>&quot;myfile&quot;</span><span class='comma token'>,</span> <span class='integer val'>10</span><span class='rparen token'>)</span>
</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


25
26
27
28
29
30
31
32
33
34
35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/standard/facets/fileutils/slice.rb', line 25</span>

<span class='def def kw'>def</span> <span class='head identifier id'>head</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='comma token'>,</span><span class='lines identifier id'>lines</span><span class='rparen token'>)</span> <span class='comment val'>#:yield:</span>
  <span class='a identifier id'>a</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='IO constant id'>IO</span><span class='dot token'>.</span><span class='foreach identifier id'>foreach</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='line identifier id'>line</span><span class='bitor op'>|</span>
      <span class='break break kw'>break</span> <span class='if if_mod kw'>if</span> <span class='lines identifier id'>lines</span> <span class='leq op'>&lt;=</span> <span class='integer val'>0</span>
      <span class='lines identifier id'>lines</span> <span class='opasgn op'>-=</span> <span class='integer val'>1</span>
      <span class='if if kw'>if</span> <span class='block_given? fid id'>block_given?</span>
        <span class='yield yield kw'>yield</span> <span class='line identifier id'>line</span>
      <span class='else else kw'>else</span>
        <span class='a identifier id'>a</span> <span class='lshft op'>&lt;&lt;</span> <span class='line identifier id'>line</span>
      <span class='end end kw'>end</span>
  <span class='rbrace token'>}</span>
  <span class='return return kw'>return</span> <span class='a identifier id'>a</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span> <span class='integer val'>? </span><span class='nil nil kw'>nil</span> <span class='colon op'>:</span> <span class='a identifier id'>a</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="link_entry-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>link_entry</strong>(src, dest, dereference_root = false, remove_destination = false) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Hard links a file system entry <tt>src</tt> to <tt>dest</tt>. If
<tt>src</tt> is a directory, this method links its contents recursively.</p>

<p>Both of <tt>src</tt> and <tt>dest</tt> must be a path name. <tt>src</tt>
must exist, <tt>dest</tt> must not exist.</p>

<p>If <tt>dereference_root</tt> is true, this method dereference tree root.</p>

<p>If <tt>remove_destination</tt> is true, this method removes each
destination file before copy.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


52
53
54
55
56
57
58</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/standard/facets/fileutils/ln_r.rb', line 52</span>

<span class='def def kw'>def</span> <span class='link_entry identifier id'>link_entry</span><span class='lparen token'>(</span><span class='src identifier id'>src</span><span class='comma token'>,</span> <span class='dest identifier id'>dest</span><span class='comma token'>,</span> <span class='dereference_root identifier id'>dereference_root</span> <span class='assign token'>=</span> <span class='false false kw'>false</span><span class='comma token'>,</span> <span class='remove_destination identifier id'>remove_destination</span> <span class='assign token'>=</span> <span class='false false kw'>false</span><span class='rparen token'>)</span>
  <span class='Entry_ constant id'>Entry_</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='src identifier id'>src</span><span class='comma token'>,</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='dereference_root identifier id'>dereference_root</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='traverse identifier id'>traverse</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='ent identifier id'>ent</span><span class='bitor op'>|</span>
    <span class='destent identifier id'>destent</span> <span class='assign token'>=</span> <span class='Entry_ constant id'>Entry_</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='dest identifier id'>dest</span><span class='comma token'>,</span> <span class='ent identifier id'>ent</span><span class='dot token'>.</span><span class='rel identifier id'>rel</span><span class='comma token'>,</span> <span class='false false kw'>false</span><span class='rparen token'>)</span>
    <span class='File constant id'>File</span><span class='dot token'>.</span><span class='unlink identifier id'>unlink</span> <span class='destent identifier id'>destent</span><span class='dot token'>.</span><span class='path identifier id'>path</span> <span class='if if_mod kw'>if</span> <span class='remove_destination identifier id'>remove_destination</span> <span class='andop op'>&amp;&amp;</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='file? fid id'>file?</span><span class='lparen token'>(</span><span class='destent identifier id'>destent</span><span class='dot token'>.</span><span class='path identifier id'>path</span><span class='rparen token'>)</span>
    <span class='ent identifier id'>ent</span><span class='dot token'>.</span><span class='link identifier id'>link</span> <span class='destent identifier id'>destent</span><span class='dot token'>.</span><span class='path identifier id'>path</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="ln_r-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>ln_r</strong>(src, dest, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Options: noop verbose dereference_root remove_destination</p>

<p>Hard link <tt>src</tt> to <tt>dest</tt>. If <tt>src</tt> is a directory,
this method links all its contents recursively. If <tt>dest</tt> is a
directory, links <tt>src</tt> to <tt>dest/src</tt>.</p>

<p><tt>src</tt> can be a list of files.</p>

<pre class="code"><span class='comment val'># Installing ruby library &quot;mylib&quot; under the site_ruby</span>
<span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='rm_r identifier id'>rm_r</span> <span class='site_ruby identifier id'>site_ruby</span> <span class='plus op'>+</span> <span class='string val'>'/mylib'</span><span class='comma token'>,</span> <span class='symbol val'>:force</span>
<span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='ln_r identifier id'>ln_r</span> <span class='string val'>'lib/'</span><span class='comma token'>,</span> <span class='site_ruby identifier id'>site_ruby</span> <span class='plus op'>+</span> <span class='string val'>'/mylib'</span>

<span class='comment val'># Examples of copying several files to target directory.</span>
<span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='ln_r identifier id'>ln_r</span> <span class='dstring node'>%w(mail.rb field.rb debug/)</span><span class='comma token'>,</span> <span class='site_ruby identifier id'>site_ruby</span> <span class='plus op'>+</span> <span class='string val'>'/tmail'</span>
<span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='ln_r identifier id'>ln_r</span> <span class='Dir constant id'>Dir</span><span class='dot token'>.</span><span class='glob identifier id'>glob</span><span class='lparen token'>(</span><span class='string val'>'*.rb'</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='string val'>'/home/aamine/lib/ruby'</span><span class='comma token'>,</span> <span class='symbol val'>:noop</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='symbol val'>:verbose</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span>

<span class='comment val'># If you want to copy all contents of a directory instead of the</span>
<span class='comment val'># directory itself, c.f. src/x -&gt; dest/x, src/y -&gt; dest/y,</span>
<span class='comment val'># use following code.</span>
<span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='ln_r identifier id'>ln_r</span> <span class='string val'>'src/.'</span><span class='comma token'>,</span> <span class='string val'>'dest'</span>     <span class='comment val'># cp_r('src', 'dest') makes src/dest,</span>
                                   <span class='comment val'># but this doesn't.</span>
</pre>

<p>TODO: Why –remove-destination and not just –force?</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


26
27
28
29
30
31
32
33
34
35</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/standard/facets/fileutils/ln_r.rb', line 26</span>

<span class='def def kw'>def</span> <span class='ln_r identifier id'>ln_r</span><span class='lparen token'>(</span><span class='src identifier id'>src</span><span class='comma token'>,</span> <span class='dest identifier id'>dest</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='fu_check_options identifier id'>fu_check_options</span> <span class='options identifier id'>options</span><span class='comma token'>,</span> <span class='OPT_TABLE constant id'>OPT_TABLE</span><span class='lbrack token'>[</span><span class='string val'>'ln_r'</span><span class='rbrack token'>]</span>
  <span class='fu_output_message identifier id'>fu_output_message</span> <span class='dstring node'>&quot;ln -r#{options[:remove_destination] ? ' --remove-destination' : ''} #{[src,dest].flatten.join ' '}&quot;</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:verbose</span><span class='rbrack token'>]</span>
  <span class='return return kw'>return</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:noop</span><span class='rbrack token'>]</span>
  <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>
  <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:dereference_root</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='true true kw'>true</span> <span class='unless unless_mod kw'>unless</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='key? fid id'>key?</span><span class='lparen token'>(</span><span class='symbol val'>:dereference_root</span><span class='rparen token'>)</span>
  <span class='fu_each_src_dest identifier id'>fu_each_src_dest</span><span class='lparen token'>(</span><span class='src identifier id'>src</span><span class='comma token'>,</span> <span class='dest identifier id'>dest</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='s identifier id'>s</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='bitor op'>|</span>
    <span class='link_entry identifier id'>link_entry</span> <span class='s identifier id'>s</span><span class='comma token'>,</span> <span class='d identifier id'>d</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:dereference_root</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:remove_destination</span><span class='rbrack token'>]</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="outofdate?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>outofdate?</strong>(path, *sources) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='out_of_date?-instance_method'>out_of_date?</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    
<p>The opposite of #uptodate?</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


7
8
9
10</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/standard/facets/fileutils/outofdate.rb', line 7</span>

<span class='def def kw'>def</span> <span class='outofdate? fid id'>outofdate?</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='sources identifier id'>sources</span><span class='rparen token'>)</span>
  <span class='comment val'>#return true unless File.exist?(path)</span>
  <span class='notop op'>!</span> <span class='uptodate? fid id'>uptodate?</span><span class='lparen token'>(</span><span class='path identifier id'>path</span><span class='comma token'>,</span> <span class='sources identifier id'>sources</span><span class='dot token'>.</span><span class='flatten identifier id'>flatten</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="safe_ln-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>safe_ln</strong>(*args) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Attempt to do a normal file link, but fall back to a copy if the link
fails.</p>

<p>CREDIT: Jim Weirich</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


13
14
15
16
17
18
19
20
21
22
23
24</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/standard/facets/fileutils/safe_ln.rb', line 13</span>

<span class='def def kw'>def</span> <span class='safe_ln identifier id'>safe_ln</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='unless unless kw'>unless</span> <span class='LINKING_SUPPORTED constant id'>LINKING_SUPPORTED</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>
    <span class='cp identifier id'>cp</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='begin begin kw'>begin</span>
      <span class='ln identifier id'>ln</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='rescue rescue kw'>rescue</span> <span class='Errno constant id'>Errno</span><span class='colon2 op'>::</span><span class='EOPNOTSUPP constant id'>EOPNOTSUPP</span>
      <span class='LINKING_SUPPORTED constant id'>LINKING_SUPPORTED</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
      <span class='cp identifier id'>cp</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="slice-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>slice</strong>(filename, from, to) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>In block form, yields lines <tt>from</tt>-<tt>to</tt>.  In non-block form,
returns an array of lines <tt>from</tt>-<tt>to</tt>:</p>

<pre class="code"><span class='comment val'># Returns lines 8-12 of 'myfile'</span>
<span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='body identifier id'>body</span><span class='lparen token'>(</span><span class='string val'>&quot;myfile&quot;</span><span class='comma token'>,</span><span class='integer val'>8</span><span class='comma token'>,</span><span class='integer val'>12</span><span class='rparen token'>)</span>
</pre>

<p>CREDIT Shashank Date, via Daniel Berger.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


15
16
17</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/standard/facets/fileutils/slice.rb', line 15</span>

<span class='def def kw'>def</span> <span class='slice identifier id'>slice</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='comma token'>,</span><span class='from identifier id'>from</span><span class='comma token'>,</span><span class='to identifier id'>to</span><span class='rparen token'>)</span> <span class='comment val'>#:yield:</span>
  <span class='IO constant id'>IO</span><span class='dot token'>.</span><span class='readlines identifier id'>readlines</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='from identifier id'>from</span><span class='minus op'>-</span><span class='float val'>1</span><span class='dot2 op'>..</span><span class='to identifier id'>to</span><span class='minus op'>-</span><span class='integer val'>1</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="stage-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>stage</strong>(stage_directory, source_directory, files, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Stage by hard linking included files to a stage directory.</p>

<p>stage_directory   -  Where to stage the files source_directory  -  Where to
find files to stage files             -  Files to link in stage relative to
source</p>

<p>TODO: Rename to #link_stage or something less likely to name clash? TODO:
Add options for :verbose, :noop and :dryrun ?</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/standard/facets/fileutils/stage.rb', line 15</span>

<span class='def def kw'>def</span> <span class='stage identifier id'>stage</span><span class='lparen token'>(</span><span class='stage_directory identifier id'>stage_directory</span><span class='comma token'>,</span> <span class='source_directory identifier id'>source_directory</span><span class='comma token'>,</span> <span class='files identifier id'>files</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='stage_directory identifier id'>stage_directory</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:noop</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:dryrun</span><span class='rbrack token'>]</span>

  <span class='stage_directory identifier id'>stage_directory</span><span class='comma token'>,</span> <span class='source_directory identifier id'>source_directory</span> <span class='assign token'>=</span> <span class='stage_directory identifier id'>stage_directory</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='source_directory identifier id'>source_directory</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
  <span class='comment val'>## ensure existance of staging area</span>
  <span class='rm_r identifier id'>rm_r</span><span class='lparen token'>(</span><span class='stage_directory identifier id'>stage_directory</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='directory? fid id'>directory?</span><span class='lparen token'>(</span><span class='stage_directory identifier id'>stage_directory</span><span class='rparen token'>)</span>
  <span class='mkdir_p identifier id'>mkdir_p</span><span class='lparen token'>(</span><span class='stage_directory identifier id'>stage_directory</span><span class='rparen token'>)</span>
  <span class='comment val'>## link files into staging area</span>
  <span class='files identifier id'>files</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span>
    <span class='src identifier id'>src</span>  <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='source_directory identifier id'>source_directory</span><span class='comma token'>,</span> <span class='f identifier id'>f</span><span class='rparen token'>)</span>
    <span class='file identifier id'>file</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='stage_directory identifier id'>stage_directory</span><span class='comma token'>,</span> <span class='f identifier id'>f</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='directory? fid id'>directory?</span><span class='lparen token'>(</span><span class='src identifier id'>src</span><span class='rparen token'>)</span>
      <span class='mkdir_p identifier id'>mkdir_p</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='exist? fid id'>exist?</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
      <span class='fdir identifier id'>fdir</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='dirname identifier id'>dirname</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='rparen token'>)</span>
      <span class='mkdir_p identifier id'>mkdir_p</span><span class='lparen token'>(</span><span class='fdir identifier id'>fdir</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='exist? fid id'>exist?</span><span class='lparen token'>(</span><span class='fdir identifier id'>fdir</span><span class='rparen token'>)</span>
      <span class='unless unless kw'>unless</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='exist? fid id'>exist?</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='rparen token'>)</span> <span class='and and kw'>and</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='mtime identifier id'>mtime</span><span class='lparen token'>(</span><span class='file identifier id'>file</span><span class='rparen token'>)</span> <span class='geq op'>&gt;=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='mtime identifier id'>mtime</span><span class='lparen token'>(</span><span class='src identifier id'>src</span><span class='rparen token'>)</span>
        <span class='ln identifier id'>ln</span><span class='lparen token'>(</span><span class='src identifier id'>src</span><span class='comma token'>,</span> <span class='file identifier id'>file</span><span class='rparen token'>)</span> <span class='comment val'>#safe_ln ?</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='return return kw'>return</span> <span class='stage_directory identifier id'>stage_directory</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="tail-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>tail</strong>(filename, lines) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>In block form, yields the last number of <tt>lines</tt> of file
<tt>filename</tt>. In non-block form, it returns the lines as an array.</p>

<p>Note that this method slurps the entire file, so I don’t recommend it for
very large files. If you want an advanced form of <tt>tail</tt>, I suggest
using file-tail, by Florian Frank (available on the RAA):</p>

<pre class="code"><span class='comment val'># Returns last 3 lines of 'myfile'</span>
<span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='tail identifier id'>tail</span><span class='lparen token'>(</span><span class='string val'>&quot;myfile&quot;</span><span class='comma token'>,</span><span class='integer val'>3</span><span class='rparen token'>)</span>
</pre>

<p>And no tail -f.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


50
51
52</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/standard/facets/fileutils/slice.rb', line 50</span>

<span class='def def kw'>def</span> <span class='tail identifier id'>tail</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='comma token'>,</span><span class='lines identifier id'>lines</span><span class='rparen token'>)</span> <span class='comment val'>#:yield</span>
  <span class='IO constant id'>IO</span><span class='dot token'>.</span><span class='readlines identifier id'>readlines</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='reverse identifier id'>reverse</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='lines identifier id'>lines</span><span class='minus op'>-</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='reverse identifier id'>reverse</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="wc-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>wc</strong>(filename, option = 'all') 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>With no arguments, returns a four element array consisting of the number of
bytes, characters, words and lines in <em>filename</em>, respectively.</p>

<p>Valid options are <tt>bytes</tt>, <tt>characters</tt> (or just
‘chars’), <tt>words</tt> and <tt>lines</tt>:</p>

<pre class="code"><span class='comment val'># Return the number of words in 'myfile'</span>
<span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='wc identifier id'>wc</span><span class='lparen token'>(</span><span class='string val'>&quot;myfile&quot;</span><span class='comma token'>,</span><span class='string val'>'words'</span><span class='rparen token'>)</span>
</pre>

<p>CREDIT: Daniel J. Berger</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/standard/facets/fileutils/wc.rb', line 17</span>

<span class='def def kw'>def</span> <span class='wc identifier id'>wc</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='comma token'>,</span><span class='option identifier id'>option</span><span class='assign token'>=</span><span class='string val'>'all'</span><span class='rparen token'>)</span>
  <span class='option identifier id'>option</span><span class='dot token'>.</span><span class='downcase! fid id'>downcase!</span>
  <span class='valid identifier id'>valid</span> <span class='assign token'>=</span> <span class='dstring node'>%w/all bytes characters chars lines words/</span>

  <span class='unless unless kw'>unless</span> <span class='valid identifier id'>valid</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='option identifier id'>option</span><span class='rparen token'>)</span>
      <span class='raise identifier id'>raise</span> <span class='dstring node'>&quot;Invalid option: '#{option}'&quot;</span>
  <span class='end end kw'>end</span>

  <span class='n identifier id'>n</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='if if kw'>if</span> <span class='option identifier id'>option</span> <span class='eq op'>==</span> <span class='string val'>'lines'</span>
      <span class='IO constant id'>IO</span><span class='dot token'>.</span><span class='foreach identifier id'>foreach</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span><span class='lbrace token'>{</span> <span class='n identifier id'>n</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span> <span class='rbrace token'>}</span>
      <span class='return return kw'>return</span> <span class='n identifier id'>n</span>
  <span class='elsif elsif kw'>elsif</span> <span class='option identifier id'>option</span> <span class='eq op'>==</span> <span class='string val'>'bytes'</span>
      <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span>
        <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='each_byte identifier id'>each_byte</span><span class='lbrace token'>{</span> <span class='n identifier id'>n</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span> <span class='rbrace token'>}</span>
      <span class='rbrace token'>}</span>
      <span class='return return kw'>return</span> <span class='n identifier id'>n</span>
  <span class='elsif elsif kw'>elsif</span> <span class='option identifier id'>option</span> <span class='eq op'>==</span> <span class='string val'>'characters'</span> <span class='orop op'>||</span> <span class='option identifier id'>option</span> <span class='eq op'>==</span> <span class='string val'>'chars'</span>
      <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span>
        <span class='while while kw'>while</span> <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='getc identifier id'>getc</span>
            <span class='n identifier id'>n</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span>
        <span class='end end kw'>end</span>
      <span class='rbrace token'>}</span>
      <span class='return return kw'>return</span> <span class='n identifier id'>n</span>
  <span class='elsif elsif kw'>elsif</span> <span class='option identifier id'>option</span> <span class='eq op'>==</span> <span class='string val'>'words'</span>
      <span class='IO constant id'>IO</span><span class='dot token'>.</span><span class='foreach identifier id'>foreach</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='line identifier id'>line</span><span class='bitor op'>|</span>
        <span class='n identifier id'>n</span> <span class='opasgn op'>+=</span> <span class='line identifier id'>line</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='dot token'>.</span><span class='length identifier id'>length</span>
      <span class='rbrace token'>}</span>
      <span class='return return kw'>return</span> <span class='n identifier id'>n</span>
  <span class='else else kw'>else</span>
      <span class='bytes identifier id'>bytes</span><span class='comma token'>,</span><span class='chars identifier id'>chars</span><span class='comma token'>,</span><span class='lines identifier id'>lines</span><span class='comma token'>,</span><span class='words identifier id'>words</span> <span class='assign token'>=</span> <span class='integer val'>0</span><span class='comma token'>,</span><span class='integer val'>0</span><span class='comma token'>,</span><span class='integer val'>0</span><span class='comma token'>,</span><span class='integer val'>0</span>
      <span class='IO constant id'>IO</span><span class='dot token'>.</span><span class='foreach identifier id'>foreach</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='line identifier id'>line</span><span class='bitor op'>|</span>
        <span class='lines identifier id'>lines</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span>
        <span class='words identifier id'>words</span> <span class='opasgn op'>+=</span> <span class='line identifier id'>line</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='dot token'>.</span><span class='length identifier id'>length</span>
        <span class='chars identifier id'>chars</span> <span class='opasgn op'>+=</span> <span class='line identifier id'>line</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>''</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='length identifier id'>length</span>
      <span class='rbrace token'>}</span>
      <span class='File constant id'>File</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='filename identifier id'>filename</span><span class='rparen token'>)</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='f identifier id'>f</span><span class='bitor op'>|</span>
        <span class='while while kw'>while</span> <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='getc identifier id'>getc</span>
            <span class='bytes identifier id'>bytes</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span>
        <span class='end end kw'>end</span>
      <span class='rbrace token'>}</span>
      <span class='return return kw'>return</span> <span class='lbrack token'>[</span><span class='bytes identifier id'>bytes</span><span class='comma token'>,</span><span class='chars identifier id'>chars</span><span class='comma token'>,</span><span class='words identifier id'>words</span><span class='comma token'>,</span><span class='lines identifier id'>lines</span><span class='rbrack token'>]</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="whereis-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>whereis</strong>(prog, path = ENV['PATH']) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>In block form, yields each ((<b>program</b>)) within ((<b>path</b>)).  In
non-block form, returns an array of each ((<b>program</b>)) within
((<b>path</b>)).  Returns ((nil)) if not found.</p>

<p>On the MS Windows platform, it looks for executables ending with .exe, .bat
and .com, which you may optionally include in the program name:</p>

<pre class="code"><span class='FileUtils constant id'>FileUtils</span><span class='dot token'>.</span><span class='whereis identifier id'>whereis</span><span class='lparen token'>(</span><span class='string val'>&quot;ruby&quot;</span><span class='rparen token'>)</span>  <span class='comment val'>#=&gt; ['/usr/local/bin/ruby','/opt/bin/ruby']</span>
</pre>

<p>CREDIT: Daniel J. Berger</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/standard/facets/fileutils/whereis.rb', line 25</span>

<span class='def def kw'>def</span> <span class='whereis identifier id'>whereis</span><span class='lparen token'>(</span><span class='prog identifier id'>prog</span><span class='comma token'>,</span> <span class='path identifier id'>path</span><span class='assign token'>=</span><span class='ENV constant id'>ENV</span><span class='lbrack token'>[</span><span class='string val'>'PATH'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='comment val'>#:yield:</span>
  <span class='dirs identifier id'>dirs</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='File constant id'>File</span><span class='colon2 op'>::</span><span class='PATH_SEPARATOR constant id'>PATH_SEPARATOR</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='dir identifier id'>dir</span><span class='bitor op'>|</span>
      <span class='comment val'># Windows checks against specific extensions</span>
      <span class='if if kw'>if</span> <span class='File constant id'>File</span><span class='colon2 op'>::</span><span class='ALT_SEPARATOR constant id'>ALT_SEPARATOR</span>
        <span class='if if kw'>if</span> <span class='prog identifier id'>prog</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='string val'>'.'</span><span class='rparen token'>)</span>
            <span class='f identifier id'>f</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='dir identifier id'>dir</span><span class='comma token'>,</span><span class='prog identifier id'>prog</span><span class='rparen token'>)</span>
            <span class='if if kw'>if</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='executable? fid id'>executable?</span><span class='lparen token'>(</span><span class='f identifier id'>f</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='File constant id'>File</span><span class='dot token'>.</span><span class='directory? fid id'>directory?</span><span class='lparen token'>(</span><span class='f identifier id'>f</span><span class='rparen token'>)</span>
              <span class='if if kw'>if</span> <span class='block_given? fid id'>block_given?</span>
                  <span class='yield yield kw'>yield</span> <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/\//</span><span class='comma token'>,</span><span class='string val'>'\\'</span><span class='rparen token'>)</span>
              <span class='else else kw'>else</span>
                  <span class='dirs identifier id'>dirs</span> <span class='lshft op'>&lt;&lt;</span> <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/\//</span><span class='comma token'>,</span><span class='string val'>'\\'</span><span class='rparen token'>)</span>
              <span class='end end kw'>end</span>
            <span class='end end kw'>end</span>
        <span class='else else kw'>else</span>
            <span class='Win32Exts constant id'>Win32Exts</span><span class='dot token'>.</span><span class='find_all identifier id'>find_all</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='ext identifier id'>ext</span><span class='bitor op'>|</span>
              <span class='f identifier id'>f</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='dir identifier id'>dir</span><span class='comma token'>,</span><span class='prog identifier id'>prog</span><span class='plus op'>+</span><span class='ext identifier id'>ext</span><span class='rparen token'>)</span>
              <span class='if if kw'>if</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='executable? fid id'>executable?</span><span class='lparen token'>(</span><span class='f identifier id'>f</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='File constant id'>File</span><span class='dot token'>.</span><span class='directory? fid id'>directory?</span><span class='lparen token'>(</span><span class='f identifier id'>f</span><span class='rparen token'>)</span>
                  <span class='if if kw'>if</span> <span class='block_given? fid id'>block_given?</span>
                    <span class='yield yield kw'>yield</span> <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/\//</span><span class='comma token'>,</span><span class='string val'>'\\'</span><span class='rparen token'>)</span>
                  <span class='else else kw'>else</span>
                    <span class='dirs identifier id'>dirs</span> <span class='lshft op'>&lt;&lt;</span> <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/\//</span><span class='comma token'>,</span><span class='string val'>'\\'</span><span class='rparen token'>)</span>
                  <span class='end end kw'>end</span>
              <span class='end end kw'>end</span>
            <span class='rbrace token'>}</span>
        <span class='end end kw'>end</span>
      <span class='else else kw'>else</span>
        <span class='f identifier id'>f</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='dir identifier id'>dir</span><span class='comma token'>,</span><span class='prog identifier id'>prog</span><span class='rparen token'>)</span>
        <span class='comment val'># Avoid /usr/lib/ruby, for example</span>
        <span class='if if kw'>if</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='executable? fid id'>executable?</span><span class='lparen token'>(</span><span class='f identifier id'>f</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='File constant id'>File</span><span class='dot token'>.</span><span class='directory? fid id'>directory?</span><span class='lparen token'>(</span><span class='f identifier id'>f</span><span class='rparen token'>)</span>
            <span class='if if kw'>if</span> <span class='block_given? fid id'>block_given?</span>
              <span class='yield yield kw'>yield</span> <span class='f identifier id'>f</span>
            <span class='else else kw'>else</span>
              <span class='dirs identifier id'>dirs</span> <span class='lshft op'>&lt;&lt;</span> <span class='f identifier id'>f</span>
            <span class='end end kw'>end</span>
        <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>
  <span class='rbrace token'>}</span>
  <span class='dirs identifier id'>dirs</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span> <span class='integer val'>? </span><span class='nil nil kw'>nil</span> <span class='colon op'>:</span> <span class='dirs identifier id'>dirs</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="which-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>which</strong>(prog, path = ENV['PATH']) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Looks for the first occurrence of <em>program</em> within <em>path</em>.</p>

<p>On the MS Windows platform, it looks for executables ending with .exe, .bat
and .com, which you may optionally include in the program name. Returns
<tt>nil</tt> if not found.</p>

<p>CREDIT: Daniel J. Berger, Michael Granger</p>

<p>– The which() method was adopted from Daniel J. Berger, via PTools which
in in turn was adopted fromt the FileWhich code posted by Michael Granger
on <a href="http://www.rubygarden.org">www.rubygarden.org</a>. ++</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/standard/facets/fileutils/which.rb', line 27</span>

<span class='def def kw'>def</span> <span class='which identifier id'>which</span><span class='lparen token'>(</span><span class='prog identifier id'>prog</span><span class='comma token'>,</span> <span class='path identifier id'>path</span><span class='assign token'>=</span><span class='ENV constant id'>ENV</span><span class='lbrack token'>[</span><span class='string val'>'PATH'</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='path identifier id'>path</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='File constant id'>File</span><span class='colon2 op'>::</span><span class='PATH_SEPARATOR constant id'>PATH_SEPARATOR</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='dir identifier id'>dir</span><span class='bitor op'>|</span>
    <span class='comment val'># Windows checks against specific extensions</span>
    <span class='if if kw'>if</span> <span class='File constant id'>File</span><span class='colon2 op'>::</span><span class='ALT_SEPARATOR constant id'>ALT_SEPARATOR</span>
      <span class='ext identifier id'>ext</span> <span class='assign token'>=</span> <span class='Win32Exts constant id'>Win32Exts</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='ext identifier id'>ext</span><span class='bitor op'>|</span>
        <span class='if if kw'>if</span> <span class='prog identifier id'>prog</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='string val'>'.'</span><span class='rparen token'>)</span> <span class='comment val'># Assume extension already included</span>
          <span class='f identifier id'>f</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='dir identifier id'>dir</span><span class='comma token'>,</span><span class='prog identifier id'>prog</span><span class='rparen token'>)</span>
        <span class='else else kw'>else</span>
          <span class='f identifier id'>f</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='dir identifier id'>dir</span><span class='comma token'>,</span><span class='prog identifier id'>prog</span><span class='plus op'>+</span><span class='ext identifier id'>ext</span><span class='rparen token'>)</span>
        <span class='end end kw'>end</span>
        <span class='File constant id'>File</span><span class='dot token'>.</span><span class='executable? fid id'>executable?</span><span class='lparen token'>(</span><span class='f identifier id'>f</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='File constant id'>File</span><span class='dot token'>.</span><span class='directory? fid id'>directory?</span><span class='lparen token'>(</span><span class='f identifier id'>f</span><span class='rparen token'>)</span>
      <span class='rbrace token'>}</span>
      <span class='if if kw'>if</span> <span class='ext identifier id'>ext</span>
        <span class='comment val'># Use backslashes, not forward slashes</span>
        <span class='if if kw'>if</span> <span class='prog identifier id'>prog</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='string val'>'.'</span><span class='rparen token'>)</span> <span class='comment val'># Assume extension already included</span>
          <span class='f identifier id'>f</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span> <span class='dir identifier id'>dir</span><span class='comma token'>,</span> <span class='prog identifier id'>prog</span> <span class='rparen token'>)</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/\//</span><span class='comma token'>,</span><span class='string val'>'\\'</span><span class='rparen token'>)</span>
        <span class='else else kw'>else</span>
          <span class='f identifier id'>f</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span> <span class='dir identifier id'>dir</span><span class='comma token'>,</span> <span class='prog identifier id'>prog</span> <span class='plus op'>+</span> <span class='ext identifier id'>ext</span> <span class='rparen token'>)</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='regexp val'>/\//</span><span class='comma token'>,</span><span class='string val'>'\\'</span><span class='rparen token'>)</span>
        <span class='end end kw'>end</span>
        <span class='return return kw'>return</span> <span class='f identifier id'>f</span>
      <span class='end end kw'>end</span>
    <span class='else else kw'>else</span>
      <span class='f identifier id'>f</span> <span class='assign token'>=</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='dir identifier id'>dir</span><span class='comma token'>,</span><span class='prog identifier id'>prog</span><span class='rparen token'>)</span>
      <span class='comment val'># Avoid /usr/lib/ruby, for example</span>
      <span class='if if kw'>if</span> <span class='File constant id'>File</span><span class='dot token'>.</span><span class='executable? fid id'>executable?</span><span class='lparen token'>(</span><span class='f identifier id'>f</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='File constant id'>File</span><span class='dot token'>.</span><span class='directory? fid id'>directory?</span><span class='lparen token'>(</span><span class='f identifier id'>f</span><span class='rparen token'>)</span>
        <span class='return return kw'>return</span> <span class='File constant id'>File</span><span class='colon2 op'>::</span><span class='join identifier id'>join</span><span class='lparen token'>(</span> <span class='dir identifier id'>dir</span><span class='comma token'>,</span> <span class='prog identifier id'>prog</span> <span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='rbrace token'>}</span>
  <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Tue May 17 02:27:05 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.7 (ruby-1.8.7).
</div>

  </body>
</html>