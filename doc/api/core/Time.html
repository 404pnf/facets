<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">

  <title>Facets Core Extensions</title>

  <link rel="shortcut icon" type="image/x-icon" href="./assets/favicon.ico" />

  <link rel="stylesheet" type="text/css" href="./assets/long/css/low.css" />
  <link rel="stylesheet" type="text/css" href="./assets/long/css/screen.css" media="screen" />
  <link rel="stylesheet" type="text/css" href="./assets/long/css/print.css" media="print" />
  <link rel="stylesheet" type="text/css" href="./assets/prettify.css" />

  <link rel="alternate stylesheet" type="text/css" href="./assets/long/css/low_vision_screen.css" media="screen" title="Low vision" />

  <script type="text/javascript" src="./assets/jquery.js" ></script>
  <script type="text/javascript" src="./assets/prettify.js"></script>
  <script type="text/javascript" src="./assets/quicksearch.js"></script>
  <script type="text/javascript" src="./assets/main.js"></script>  

  <script type="text/javascript">
    $(document).ready( function() {
	    hookHighlightSyntax();
	    hookQuickSearch();
	    // $('ul.link-list a').bind( "click", highlightClickTarget );
    });
  </script>
</head>

<body>
  <div id="page">

    <div id="header">
      <div id="logo" style="font-size: 52px; font-family: times, serif; font-style: italic; color: black;">
        <img src="./assets/long/img/logo.gif" alt="" title="" height="119" align="absmiddle">Facets Core Extensions
      </div>
      <div class="site-links">
<a href="./index.html">Index</a><span class="separator"> | </span>
  <a href="http://rubyworks.github.com/facets">Home Page</a><span class="separator"> |</span>
  <a href="http://wiki.github.com/rubyworks/facets">Community</a><span class="separator"> | </span>
<a href="http://www.ruby-lang.org/en/about/">About Ruby</a>
      </div>
    </div>

    <hr class="hidden-modern">

    <div id="main-wrapper">
      <div id="main">

        

<div id="content-wrapper">

    <div id="head-wrapper-1">
        <div id="head-wrapper-2">
            <div id="head">
                <h1>Time</h1>
            </div>
        </div>
    </div>

    <div id="content">

        <!-- DESCRIPTION -->

        

        <!-- REQUIRES -->

        

        <!-- CONTENTS -->

        
        

        <!-- INCLUDED MODULES -->

        

        <!-- DESCRIPTION (of what?) --->

        

        <!-- CLASSES AND MODULES -->

        

        <!-- CONSTANTS -->

        
        <h3>Constants</h3>
        <table border='0' cellpadding='5'>
            
            <tr valign='top'>
                <td class="attr-name">FORMAT</td>
                <td>=</td>
                <td class="attr-value">{
:db      =&gt; &quot;%Y-%m-%d %H:%M:%S&quot;,
:dbase   =&gt; &quot;%Y-%m-%d %H:%M:%S&quot;,
:datbase =&gt; &quot;%Y-%m-%d %H:%M:%S&quot;,
:utc     =&gt; &quot;%Y-%m-%d %H:%M:%S&quot;,
:number  =&gt; &quot;%Y%m%d%H%M%S&quot;,
:short   =&gt; &quot;%d %b %H:%M&quot;,
:time    =&gt; &quot;%H:%M&quot;,
:long    =&gt; &quot;%B %d, %Y %H:%M&quot;,
:day1st  =&gt; &quot;%d-%m-%Y %H:%M&quot;,
:dmYHM   =&gt; &quot;%d-%m-%Y %H:%M&quot;,
:rfc822  =&gt; &quot;%a, %d %b %Y %H:%M:%S %z&quot;,
nil      =&gt; &quot;%a %b %d %H:%M:%S %Z %Y&quot;
}</td>
            </tr>
            
            
        </table>
        

        <!-- ATTRIBUTES -->

        

        <!-- METHODS -->

        
                <h3>Class Public methods</h3>
                <dl>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-c-elapse_source')" id="l_method-c-elapse_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-c-elapse"></a><b>elapse</b>()
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-c-elapse_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/time/elapse.rb, line 11</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">elapse</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Need block&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">block_given?</span>
  <span class="ruby-identifier">t0</span> = <span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_f</span>
  <span class="ruby-keyword">yield</span>
  <span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">t0</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Tracks the elapse time of a code block.</p>

<pre>e = Time.elapse { sleep 1 }

e.assert &gt; 1</pre>

<p>CREDIT: Hal Fulton</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-c-stamp_source')" id="l_method-c-stamp_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-c-stamp"></a><b>stamp</b>(*args)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-c-stamp_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/time/stamp.rb, line 24</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">stamp</span>(*<span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">now</span>.<span class="ruby-identifier">stamp</span>(*<span class="ruby-identifier">args</span>)
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Produce time stamp for Time.now. See <a
href="Time.html#method-i-stamp">stamp</a>.</p>

<p>CREDIT: Trans</p>

                    

                    

                    </dd>
                
            
        
                <h3>Instance Public methods</h3>
                <dl>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-ago_source')" id="l_method-i-ago_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-ago"></a><b>ago</b>(*time_units)
                    
                    </dt>

                    <dd>
                    

                    
                      
                      
<p>Alias for <a href="Time.html#method-i-less">less</a></p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-change_source')" id="l_method-i-change_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-change"></a><b>change</b>(options)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-change_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/time/change.rb, line 16</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">change</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">opts</span>=<span class="ruby-identifier">options</span>; <span class="ruby-comment">#{}; options.each_pair{ |k,v| opts[k] = v.to_i }</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">send</span>(
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">utc?</span> <span class="ruby-operator">?</span> <span class="ruby-value">:utc</span> <span class="ruby-operator">:</span> <span class="ruby-value">:local</span>,
    <span class="ruby-identifier">opts</span>[<span class="ruby-value">:year</span>]  <span class="ruby-operator">||</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">year</span>,
    <span class="ruby-identifier">opts</span>[<span class="ruby-value">:month</span>] <span class="ruby-operator">||</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">month</span>,
    <span class="ruby-identifier">opts</span>[<span class="ruby-value">:day</span>]   <span class="ruby-operator">||</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">day</span>,
    <span class="ruby-identifier">opts</span>[<span class="ruby-value">:hour</span>]  <span class="ruby-operator">||</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">hour</span>,
    <span class="ruby-identifier">opts</span>[<span class="ruby-value">:min</span>]   <span class="ruby-operator">||</span> (<span class="ruby-identifier">opts</span>[<span class="ruby-value">:hour</span>] <span class="ruby-operator">?</span> <span class="ruby-value">0</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">min</span>),
    <span class="ruby-identifier">opts</span>[<span class="ruby-value">:sec</span>]   <span class="ruby-operator">||</span> ((<span class="ruby-identifier">opts</span>[<span class="ruby-value">:hour</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:min</span>]) <span class="ruby-operator">?</span> <span class="ruby-value">0</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">sec</span>),
    <span class="ruby-identifier">opts</span>[<span class="ruby-value">:usec</span>]  <span class="ruby-operator">||</span> ((<span class="ruby-identifier">opts</span>[<span class="ruby-value">:hour</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:min</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:sec</span>]) <span class="ruby-operator">?</span> <span class="ruby-value">0</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">usec</span>)
  )
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Returns a new <a href="Time.html">Time</a> where one or more of the
elements have been changed according to the <tt>options</tt> parameter. The
time options (hour, minute, sec, usec) reset cascadingly, so if only the
hour is passed, then minute, sec, and usec is set to 0. If the hour and
minute is passed, then sec and usec is set to 0.</p>

<pre>t1 = Time.at(10000)
t1.ctime   #=&gt; &quot;Wed Dec 31 21:46:40 1969&quot;

t2 = t1.change(:hour =&gt; 11)
t2.ctime   #=&gt; &quot;Wed Dec 31 11:00:00 1969&quot;</pre>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-dst_adjustment_source')" id="l_method-i-dst_adjustment_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-dst_adjustment"></a><b>dst_adjustment</b>(time)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-dst_adjustment_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/time/dst_adjustment.rb, line 11</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">dst_adjustment</span>(<span class="ruby-identifier">time</span>)
  <span class="ruby-identifier">self_dst</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">dst?</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
  <span class="ruby-identifier">time_dst</span> = <span class="ruby-identifier">time</span>.<span class="ruby-identifier">dst?</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
  <span class="ruby-identifier">seconds</span>  = (<span class="ruby-keyword">self</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">time</span>).<span class="ruby-identifier">abs</span>
  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">seconds</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">86400</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">self_dst</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">time_dst</span>)
    <span class="ruby-identifier">time</span> <span class="ruby-operator">+</span> ((<span class="ruby-identifier">self_dst</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">time_dst</span>) * <span class="ruby-value">60</span> * <span class="ruby-value">60</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">time</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Adjust DST</p>

<p>TODO: Can’t seem to get this to pass ActiveSupport tests, even though it is
essentially identical to the ActiveSupport code (see Time#since in
time/calculations.rb). It handles all but 4 tests.</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-future-3F_source')" id="l_method-i-future-3F_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-future-3F"></a><b>future?</b>(other=nil)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-future-3F_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/time/future.rb, line 9</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">future?</span>(<span class="ruby-identifier">other</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">self</span> <span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">other</span> <span class="ruby-operator">||</span> <span class="ruby-operator">::</span><span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>)
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      Not Documented
                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-hence_source')" id="l_method-i-hence_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-hence"></a><b>hence</b>(*time_units)
                    
                    </dt>

                    <dd>
                    

                    
                      
                      
<p>Alias for <a href="Time.html#method-i-shift">shift</a>.</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-in_source')" id="l_method-i-in_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-in"></a><b>in</b>(*time_units)
                    
                    </dt>

                    <dd>
                    

                    
                      
                      
<p>Alias for <a href="Time.html#method-i-shift">shift</a>.</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-less_source')" id="l_method-i-less_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-less"></a><b>less</b>(*time_units)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-less_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/time/shift.rb, line 77</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">less</span>(*<span class="ruby-identifier">time_units</span>)
  <span class="ruby-identifier">time_hash</span>  = <span class="ruby-constant">Hash</span><span class="ruby-operator">===</span><span class="ruby-identifier">time_units</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">time_units</span>.<span class="ruby-identifier">pop</span> <span class="ruby-operator">:</span> {}
  <span class="ruby-identifier">time_units</span> = <span class="ruby-identifier">time_units</span>.<span class="ruby-identifier">flatten</span>

  <span class="ruby-identifier">time_units</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">:seconds</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">time_units</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">%</span> <span class="ruby-value">2</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>

  <span class="ruby-identifier">time_hash</span>.<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">units</span>, <span class="ruby-identifier">number</span><span class="ruby-operator">|</span> <span class="ruby-identifier">time_units</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">number</span>; <span class="ruby-identifier">time_units</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">units</span> }

  <span class="ruby-identifier">neg_times</span> = []
  <span class="ruby-identifier">time_units</span>.<span class="ruby-identifier">each_slice</span>(<span class="ruby-value">2</span>){ <span class="ruby-operator">|</span><span class="ruby-identifier">number</span>, <span class="ruby-identifier">units</span><span class="ruby-operator">|</span> <span class="ruby-identifier">neg_times</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-operator">-</span><span class="ruby-identifier">number</span>; <span class="ruby-identifier">neg_times</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">units</span> }

  <span class="ruby-identifier">shift</span>(*<span class="ruby-identifier">neg_times</span>)
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Returns a new <a href="Time.html">Time</a> representing the time a number
of time-units ago. This is just like <a
href="Time.html#method-i-shift">shift</a>, but reverses the direction.</p>

<pre>t = Time.utc(2010,10,10,0,0,0)

t.less(4, :days)             #=&gt;  Time.utc(2010,10,6,0,0,0)</pre>

                    

                    
                    <div class="aka">
                        This method is also aliased as
                        
                        <a href="Time.html#method-i-ago">ago</a>
                        
                    </div>
                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-past-3F_source')" id="l_method-i-past-3F_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-past-3F"></a><b>past?</b>(other=nil)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-past-3F_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/time/future.rb, line 4</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">past?</span>(<span class="ruby-identifier">other</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">self</span> <span class="ruby-operator">&lt;</span> (<span class="ruby-identifier">other</span> <span class="ruby-operator">||</span> <span class="ruby-operator">::</span><span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>)
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      Not Documented
                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-round_to_source')" id="l_method-i-round_to_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-round_to"></a><b>round_to</b>(seconds)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-round_to_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/time/round_to.rb, line 16</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">round_to</span>(<span class="ruby-identifier">seconds</span>)
  (<span class="ruby-keyword">self</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">seconds</span> <span class="ruby-operator">/</span> <span class="ruby-value">2.0</span>).<span class="ruby-identifier">trunc</span>(<span class="ruby-identifier">seconds</span>)
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Round time at the nearest range (in seconds).</p>

<pre>t1 = Time.now
t2 = t1.round_to(60*60)
t2.min #=&gt; 0
t2.sec #=&gt; 0</pre>

<p>TODO: What about `round(:minute)`?</p>

<p>TODO: Fractional seconds should round the usec.</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-set_source')" id="l_method-i-set_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-set"></a><b>set</b>(options)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-set_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/time/set.rb, line 8</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">set</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">opts</span>={}
  <span class="ruby-identifier">options</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> 
    <span class="ruby-identifier">k</span> = <span class="ruby-value">:min</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^min/</span>
    <span class="ruby-identifier">k</span> = <span class="ruby-value">:sec</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^sec/</span>
    <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">v</span>.<span class="ruby-identifier">to_i</span> 
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">send</span>(
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">utc?</span> <span class="ruby-operator">?</span> <span class="ruby-value">:utc</span> <span class="ruby-operator">:</span> <span class="ruby-value">:local</span>,
    <span class="ruby-identifier">opts</span>[<span class="ruby-value">:year</span>]  <span class="ruby-operator">||</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">year</span>,
    <span class="ruby-identifier">opts</span>[<span class="ruby-value">:month</span>] <span class="ruby-operator">||</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">month</span>,
    <span class="ruby-identifier">opts</span>[<span class="ruby-value">:day</span>]   <span class="ruby-operator">||</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">day</span>,
    <span class="ruby-identifier">opts</span>[<span class="ruby-value">:hour</span>]  <span class="ruby-operator">||</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">hour</span>,
    <span class="ruby-identifier">opts</span>[<span class="ruby-value">:min</span>]   <span class="ruby-operator">||</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">min</span>,
    <span class="ruby-identifier">opts</span>[<span class="ruby-value">:sec</span>]   <span class="ruby-operator">||</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">sec</span>,
    <span class="ruby-identifier">opts</span>[<span class="ruby-value">:usec</span>]  <span class="ruby-operator">||</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">usec</span>
  )
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Like change but does not reset earlier times.</p>

<p>NOTE: It would be better, probably if this were called “change”. and that
<a href="Time.html#method-i-change">change</a> were called “reset”.</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-shift_source')" id="l_method-i-shift_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-shift"></a><b>shift</b>(*time_units)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-shift_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/time/shift.rb, line 22</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">shift</span>(*<span class="ruby-identifier">time_units</span>)
  <span class="ruby-identifier">time_hash</span> = <span class="ruby-constant">Hash</span><span class="ruby-operator">===</span><span class="ruby-identifier">time_units</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">time_units</span>.<span class="ruby-identifier">pop</span> <span class="ruby-operator">:</span> {}
  <span class="ruby-identifier">time_units</span> = <span class="ruby-identifier">time_units</span>.<span class="ruby-identifier">flatten</span>
  <span class="ruby-identifier">time_units</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">:seconds</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">time_units</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">%</span> <span class="ruby-value">2</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">time_hash</span>.<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">units</span>, <span class="ruby-identifier">number</span><span class="ruby-operator">|</span> <span class="ruby-identifier">time_units</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">number</span>; <span class="ruby-identifier">time_units</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">units</span> }

  <span class="ruby-identifier">time</span> = <span class="ruby-keyword">self</span>
  <span class="ruby-identifier">time_units</span>.<span class="ruby-identifier">each_slice</span>(<span class="ruby-value">2</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">number</span>, <span class="ruby-identifier">units</span><span class="ruby-operator">|</span>
    <span class="ruby-comment">#next time = time.ago(-number, units) if number &lt; 0</span>
    <span class="ruby-identifier">time</span> = (
      <span class="ruby-keyword">case</span> <span class="ruby-identifier">units</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">downcase</span>.<span class="ruby-identifier">to_sym</span>
      <span class="ruby-keyword">when</span> <span class="ruby-value">:years</span>, <span class="ruby-value">:year</span>
        <span class="ruby-identifier">time</span>.<span class="ruby-identifier">set</span>( <span class="ruby-value">:year=</span><span class="ruby-operator">&gt;</span>(<span class="ruby-identifier">year</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">number</span>) )
      <span class="ruby-keyword">when</span> <span class="ruby-value">:months</span>, <span class="ruby-value">:month</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">number</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
          <span class="ruby-identifier">new_month</span> = ((<span class="ruby-identifier">month</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">number</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>) <span class="ruby-operator">%</span> <span class="ruby-value">12</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
          <span class="ruby-identifier">y</span> = (<span class="ruby-identifier">number</span> <span class="ruby-operator">/</span> <span class="ruby-value">12</span>) <span class="ruby-operator">+</span> (<span class="ruby-identifier">new_month</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">month</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>)
          <span class="ruby-identifier">time</span>.<span class="ruby-identifier">set</span>(<span class="ruby-value">:year</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">year</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">y</span>), <span class="ruby-value">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">new_month</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">number</span> = <span class="ruby-operator">-</span><span class="ruby-identifier">number</span>
          <span class="ruby-identifier">new_month</span> = ((<span class="ruby-identifier">month</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">number</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>) <span class="ruby-operator">%</span> <span class="ruby-value">12</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
          <span class="ruby-identifier">y</span> = (<span class="ruby-identifier">number</span> <span class="ruby-operator">/</span> <span class="ruby-value">12</span>) <span class="ruby-operator">+</span> (<span class="ruby-identifier">new_month</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">month</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>)
          <span class="ruby-identifier">time</span>.<span class="ruby-identifier">set</span>(<span class="ruby-value">:year</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">year</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">y</span>), <span class="ruby-value">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">new_month</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">when</span> <span class="ruby-value">:weeks</span>, <span class="ruby-value">:week</span>
        <span class="ruby-identifier">time</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">number</span> * <span class="ruby-value">604800</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-value">:days</span>, <span class="ruby-value">:day</span>
        <span class="ruby-identifier">time</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">number</span> * <span class="ruby-value">86400</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-value">:hours</span>, <span class="ruby-value">:hour</span>
        <span class="ruby-identifier">time</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">number</span> * <span class="ruby-value">3600</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-value">:minutes</span>, <span class="ruby-value">:minute</span>, <span class="ruby-value">:mins</span>, <span class="ruby-value">:min</span>
        <span class="ruby-identifier">time</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">number</span> * <span class="ruby-value">60</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-value">:seconds</span>, <span class="ruby-value">:second</span>, <span class="ruby-value">:secs</span>, <span class="ruby-value">:sec</span>, <span class="ruby-keyword">nil</span>
        <span class="ruby-identifier">time</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">number</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;unrecognized time units -- #{units}&quot;</span>
      <span class="ruby-keyword">end</span>
    )
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">dst_adjustment</span>(<span class="ruby-identifier">time</span>)
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Returns a new <a href="Time.html">Time</a> representing the time shifted by
the time-units given. Positive number shift the time forward, negative
number shift the time  backward.</p>

<pre>t = Time.utc(2010,10,10,0,0,0)
t.shift( 4, :days)            #=&gt;  Time.utc(2010,10,14,0,0,0)
t.shift(-4, :days)            #=&gt;  Time.utc(2010,10,6,0,0,0)</pre>

<p>More than one unit of time can be given.</p>

<pre>t.shift(4, :days, 3, :hours)  #=&gt;  Time.utc(2010,10,14,3,0,0)</pre>

<p>The <a href="Time.html#method-i-shift">shift</a> method can also take a
hash.</p>

<pre>t.shift(:days=&gt;4, :hours=&gt;3)  #=&gt;  Time.utc(2010,10,14,3,0,0)</pre>

                    

                    
                    <div class="aka">
                        This method is also aliased as
                        
                        <a href="Time.html#method-i-in">in</a>
                        
                        <a href="Time.html#method-i-hence">hence</a>
                        
                    </div>
                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-stamp_source')" id="l_method-i-stamp_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-stamp"></a><b>stamp</b>(fmt = nil)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-stamp_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/time/stamp.rb, line 37</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">stamp</span>(<span class="ruby-identifier">fmt</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-constant">String</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">fmt</span>
    <span class="ruby-identifier">fmt</span> = <span class="ruby-constant">FORMAT</span>[<span class="ruby-identifier">fmt</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">strftime</span>(<span class="ruby-identifier">fmt</span>).<span class="ruby-identifier">strip</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Create a time stamp.</p>

<pre>t = Time.at(10000)
t.stamp(:short)    #=&gt; &quot;31 Dec 21:46&quot;</pre>

<p>Supported formats come from the Time::FORMAT constant.</p>

<p>CREDIT: Trans</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-to_time_source')" id="l_method-i-to_time_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-to_time"></a><b>to_time</b>()
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-to_time_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/time/to_time.rb, line 8</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_time</span>
  <span class="ruby-identifier">getlocal</span> 
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>To be able to keep Dates and Times interchangeable on conversions.</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-trunc_source')" id="l_method-i-trunc_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-trunc"></a><b>trunc</b>(amount)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-trunc_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/core/facets/time/trunc.rb, line 10</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">trunc</span>(<span class="ruby-identifier">amount</span>)
  <span class="ruby-keyword">self</span> <span class="ruby-operator">-</span> (<span class="ruby-keyword">self</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">amount</span>)
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Truncate time at give range (in seconds).</p>

<pre>t = Time.now
t = t.trunc(60*60)
t.min #=&gt; 0
t.sec #=&gt; 0</pre>

                    

                    

                    </dd>
                
            
        

     </div>

 </div>

<hr class="hidden-modern" />

<div id="sidebar-wrapper">

    <div id="sidebar">

        <div class="navigation" style="background-color: transparent;">
          <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
          <fieldset>
            <legend>Quicksearch</legend>
            <input type="text" name="quicksearch" value="" class="quicksearch-field" style="width: 95%;" />
          </fieldset>
          </form>
        </div>

        <br/><br/>

        <!-- PARENT -->
        
        <div class="navigation">
          <h3>Parent</h3>
          <ul>
            <li><a href="lib/core/facets/time/elapse_rb.html">elapse.rb</a></li>
          </ul>
        </div>
        

        <!-- SUPERCLASS -->
        
          
          <div class="navigation">
            <h3>Superclass</h3>
            <ul>
            <li>
              
                <a href="Object.html">Object</a>
              
            </li>
            </ul>
          </div>
          
        

        <!-- INCLUDED MODULES -->

        

        <!-- CLASSES AND MODULES -->

        

        <!-- METHOD LIST -->
        
        
        <div class="navigation">
            <h3>Methods</h3>
            <ul class="menu quicksearch-target">
                
                <li><a href="#method-i-ago">ago</a></li>
                
                <li><a href="#method-i-change">change</a></li>
                
                <li><a href="#method-i-dst_adjustment">dst_adjustment</a></li>
                
                <li><a href="#method-c-elapse">elapse</a></li>
                
                <li><a href="#method-i-future-3F">future?</a></li>
                
                <li><a href="#method-i-hence">hence</a></li>
                
                <li><a href="#method-i-in">in</a></li>
                
                <li><a href="#method-i-less">less</a></li>
                
                <li><a href="#method-i-past-3F">past?</a></li>
                
                <li><a href="#method-i-round_to">round_to</a></li>
                
                <li><a href="#method-i-set">set</a></li>
                
                <li><a href="#method-i-shift">shift</a></li>
                
                <li><a href="#method-c-stamp">stamp</a></li>
                
                <li><a href="#method-i-stamp">stamp</a></li>
                
                <li><a href="#method-i-to_time">to_time</a></li>
                
                <li><a href="#method-i-trunc">trunc</a></li>
                
            </ul>
        </div>
        

        <!-- IN FILES -->

        <div class="navigation">
          <h3>In Files</h3>
          <ul>
          
            <li class="file">
              <a href="./lib/core/facets/time/elapse_rb.html" title="lib/core/facets/time/elapse.rb">lib/core/facets/time/elapse.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/core/facets/time/shift_rb.html" title="lib/core/facets/time/shift.rb">lib/core/facets/time/shift.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/core/facets/time/trunc_rb.html" title="lib/core/facets/time/trunc.rb">lib/core/facets/time/trunc.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/core/facets/time/dst_adjustment_rb.html" title="lib/core/facets/time/dst_adjustment.rb">lib/core/facets/time/dst_adjustment.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/core/facets/time/future_rb.html" title="lib/core/facets/time/future.rb">lib/core/facets/time/future.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/core/facets/time/set_rb.html" title="lib/core/facets/time/set.rb">lib/core/facets/time/set.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/core/facets/time/round_to_rb.html" title="lib/core/facets/time/round_to.rb">lib/core/facets/time/round_to.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/core/facets/time/to_time_rb.html" title="lib/core/facets/time/to_time.rb">lib/core/facets/time/to_time.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/core/facets/time/change_rb.html" title="lib/core/facets/time/change.rb">lib/core/facets/time/change.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/core/facets/time/stamp_rb.html" title="lib/core/facets/time/stamp.rb">lib/core/facets/time/stamp.rb</a>
            </li>
          
          </ul>
        </div>

    </div>

</div>



        <hr class="hidden-modern">

        <div class="foot">
          <div class="site-links">
<a href="./index.html">Index</a><span class="separator"> | </span>
  <a href="http://rubyworks.github.com/facets">Home Page</a><span class="separator"> |</span>
  <a href="http://wiki.github.com/rubyworks/facets">Community</a><span class="separator"> | </span>
<a href="http://www.ruby-lang.org/en/about/">About Ruby</a>
          </div>
        </div>

      </div>
    </div> <!-- end main-wrapper -->

    <div id="search-box">
<form id="search-form" action="http://www.google.com/cse">
<table class="fieldset">
  <tbody><tr>
    <td>
      <input class="field" name="q" size="31" style="background: white url(http://www.google.com/coop/intl/en/images/google_custom_search_watermark.gif) no-repeat scroll left center; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;" onfocus="this.style.background='white'" onblur="if (/^\s*$/.test(this.value)) this.style.background='white url(http://www.google.com/coop/intl/en/images/google_custom_search_watermark.gif) left no-repeat'" type="text">
    </td>
    <td>
      <input name="cx" value="013598269713424429640:g5orptiw95w" type="hidden">
      <input name="ie" value="UTF-8" type="hidden">
      <input class="button" name="sa" value="Search" type="submit">
    </td>
  </tr>
</tbody></table>
</form>
    </div> <!-- end search-box -->

    <div id="footer">
      <div class="fine-print">
<!--
        <p>Content available in <a href="http://www.ruby-lang.org/en/">English</a>, <a href="http://www.ruby-lang.org/fr/">French</a>, <a href="http://www.ruby-lang.org/ja/">Japanese</a>, <a href="http://www.ruby-lang.org/ko/">Korean</a>, <a href="http://www.ruby-lang.org/pl/">Polish</a>, <a href="http://www.ruby-lang.org/es/">Spanish</a>, <a href="http://www.ruby-lang.org/pt/">Portuguese</a>, <a href="http://www.ruby-lang.org/zh_cn/">Simplified Chinese</a>, <a href="http://www.ruby-lang.org/zh_TW/">Traditional Chinese</a>, <a href="http://www.ruby-lang.org/id/">Bahasa Indonesia</a>, <a href="http://www.ruby-lang.org/de/">German</a>, <a href="http://www.ruby-lang.org/it/">Italian</a> and <a href="http://www.ruby-lang.org/bg/">Bulgarian</a>.</p>
-->

        <p>This website is made with Ruby and powered by <a href="http://rdocidile.github.com/rdoc-rubyfaux">RubyFaux</a> v1.2.0.
<!--
          It is proudly maintained by <a href="http://rubyidentity.org/">members of the Ruby community</a>. Please contact
          our <a href="mailto:webmaster@ruby-lang.org">webmaster</a> for questions or comments
          concerning this website.</p>
-->
        </p>
      </div>
    </div>

  </div> <!-- end page  -->
</body>
</html>
