<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

  <title>Class: Time</title>

  
    <link rel="SHORTCUT ICON" href="../assets/icon/class.png">
  

  <link type="text/css" rel="stylesheet" href="../assets/rdoc.css" media="screen" />
  <link type="text/css" rel="stylesheet" href="../assets/highlight/styles/github.css" title="GitHub" />

  <script type="text/javascript" charset="utf-8" src="../assets/jquery.js"></script>
  <script type="text/javascript" charset="utf-8" src="../assets/highlight/highlight.pack.js"></script>
  <script type="text/javascript" charset="utf-8" src="../assets/quicksearch.js"></script>
  <script type="text/javascript" charset="utf-8" src="../assets/main.js"></script>

  <script type="text/javascript">
    $(document).ready( function() {
      hookHighlightSyntax();
	    hookSourceViews();
	    hookDebuggingToggle();
	    hookQuickSearch();
	    highlightLocationTarget();

	    $('ul.link-list a').bind("click", highlightClickTarget);
    });
  </script>
</head>
<body class="class">
<div id="main">

  <div class="head">
    <h1>
      
        <img src="../assets/icon/class.png" align="absmiddle">&nbsp;
      
      <a href="../index.html">Facets Core API</a>&nbsp;
      <a href="/">Time</a>
    </h1>
  </div>

  <div id="metadata">
    <div id="project-metadata">

      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li class="file"><a href="../files/lib/core/facets/time/elapse_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/core/facets/time/elapse.rb">lib/core/facets/time/elapse.rb</a></li>
          
            <li class="file"><a href="../files/lib/core/facets/time/trunc_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/core/facets/time/trunc.rb">lib/core/facets/time/trunc.rb</a></li>
          
            <li class="file"><a href="../files/lib/core/facets/time/advance_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/core/facets/time/advance.rb">lib/core/facets/time/advance.rb</a></li>
          
            <li class="file"><a href="../files/lib/core/facets/time/round_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/core/facets/time/round.rb">lib/core/facets/time/round.rb</a></li>
          
            <li class="file"><a href="../files/lib/core/facets/time/hence_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/core/facets/time/hence.rb">lib/core/facets/time/hence.rb</a></li>
          
            <li class="file"><a href="../files/lib/core/facets/time/set_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/core/facets/time/set.rb">lib/core/facets/time/set.rb</a></li>
          
            <li class="file"><a href="../files/lib/core/facets/time/to_time_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/core/facets/time/to_time.rb">lib/core/facets/time/to_time.rb</a></li>
          
            <li class="file"><a href="../files/lib/core/facets/time/change_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/core/facets/time/change.rb">lib/core/facets/time/change.rb</a></li>
          
            <li class="file"><a href="../files/lib/core/facets/time/stamp_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/core/facets/time/stamp.rb">lib/core/facets/time/stamp.rb</a></li>
          
          </ul>
        </div>
      </div>

      <!-- What about Git info, or Hg info? This seems almost silly, albeit kind of cool. -->
      <!-- TODO: generalize this for all SCMs -->

      
    </div>

    <div id="class-metadata">

      <!-- Parent Class -->
      
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        <ul>
          
          <!-- why was this class="link" ? -->
          <li class="class"><a href="Object.html">Object</a></li>
          
        </ul>
      </div>
      

      <!-- Namespace Contents -->
      

      <!-- Method Quickref -->
      
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
            
            <li class="singleton">
              <a href="#M000472">::elapse</a>
            </li>
          
            
            <li class="singleton">
              <a href="#M000482">::stamp</a>
            </li>
          
            
            <li class="method">
              <a href="#M000474">#advance</a>
            </li>
          
            
            <li class="method">
              <a href="#M000477">#ago</a>
            </li>
          
            
            <li class="method">
              <a href="#M000481">#change</a>
            </li>
          
            
            <li class="method">
              <a href="#M000480">#dst_adjustment</a>
            </li>
          
            
            <li class="method">
              <a href="#M000478">#hence</a>
            </li>
          
            
            <li class="method">
              <a href="#M000475">#round</a>
            </li>
          
            
            <li class="method">
              <a href="#M000476">#set</a>
            </li>
          
            
            <li class="method">
              <a href="#M000483">#stamp</a>
            </li>
          
            
            <li class="method">
              <a href="#M000479">#to_time</a>
            </li>
          
            
            <li class="method">
              <a href="#M000473">#trunc</a>
            </li>
          
        </ul>
      </div>
      

      <!-- Included Modules -->
      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Information</h3>
        <ul>
        
          <li class="file"><a href="../files/doc/README_core.html">README.core</a></li>
        
          <li class="file"><a href="../files/README_rdoc.html">README.rdoc</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class Index
          <span class="search-toggle"><img src="../assets/icon/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <!-- classpage.html : classes -->
        <ul class="link-list">
        
          <li class="module"><a href="../classes/Lazy.html">Lazy</a></li>
        
          <li class="class"><a href="../classes/Lazy/Future.html">Lazy::Future</a></li>
        
          <li class="class"><a href="../classes/Lazy/Promise.html">Lazy::Promise</a></li>
        
          <li class="class"><a href="../classes/Lazy/PromiseSafe.html">Lazy::PromiseSafe</a></li>
        
          <li class="module"><a href="../classes/Enumerable.html">Enumerable</a></li>
        
          <li class="class"><a href="../classes/Object.html">Object</a></li>
        
          <li class="class"><a href="../classes/Array.html">Array</a></li>
        
          <li class="class"><a href="../classes/Binding.html">Binding</a></li>
        
          <li class="class"><a href="../classes/Class.html">Class</a></li>
        
          <li class="module"><a href="../classes/Comparable.html">Comparable</a></li>
        
          <li class="module"><a href="../classes/Denumerable.html">Denumerable</a></li>
        
          <li class="class"><a href="../classes/Denumerator.html">Denumerator</a></li>
        
          <li class="class"><a href="../classes/Dir.html">Dir</a></li>
        
          <li class="class"><a href="../classes/Enumerator.html">Enumerator</a></li>
        
          <li class="class"><a href="../classes/Exception.html">Exception</a></li>
        
          <li class="class"><a href="../classes/FalseClass.html">FalseClass</a></li>
        
          <li class="class"><a href="../classes/File.html">File</a></li>
        
          <li class="module"><a href="../classes/FileTest.html">FileTest</a></li>
        
          <li class="class"><a href="../classes/Float.html">Float</a></li>
        
          <li class="class"><a href="../classes/Functor.html">Functor</a></li>
        
          <li class="class"><a href="../classes/Hash.html">Hash</a></li>
        
          <li class="module"><a href="../classes/Indexable.html">Indexable</a></li>
        
          <li class="class"><a href="../classes/InstanceVariables.html">InstanceVariables</a></li>
        
          <li class="class"><a href="../classes/Integer.html">Integer</a></li>
        
          <li class="module"><a href="../classes/Kernel.html">Kernel</a></li>
        
          <li class="class"><a href="../classes/MatchData.html">MatchData</a></li>
        
          <li class="class"><a href="../classes/Module.html">Module</a></li>
        
          <li class="class"><a href="../classes/NilClass.html">NilClass</a></li>
        
          <li class="class"><a href="../classes/Numeric.html">Numeric</a></li>
        
          <li class="module"><a href="../classes/ObjectSpace.html">ObjectSpace</a></li>
        
          <li class="class"><a href="../classes/Proc.html">Proc</a></li>
        
          <li class="class"><a href="../classes/Range.html">Range</a></li>
        
          <li class="class"><a href="../classes/Regexp.html">Regexp</a></li>
        
          <li class="module"><a href="../classes/Stackable.html">Stackable</a></li>
        
          <li class="class"><a href="../classes/String.html">String</a></li>
        
          <li class="class"><a href="../classes/Struct.html">Struct</a></li>
        
          <li class="class"><a href="../classes/Symbol.html">Symbol</a></li>
        
          <li class="class"><a href="../classes/Time.html">Time</a></li>
        
          <li class="class"><a href="../classes/TrueClass.html">TrueClass</a></li>
        
          <li class="class"><a href="../classes/UnboundMethod.html">UnboundMethod</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>
    </div>

    <div id="validator-badges">
      
      <div style="float: right; margin-right: 5px;">
        <a href="http://validator.w3.org/check/referer"><img src="../assets/icon/check.png" alt="[Validate]" height="16" width="16" /></a>
      </div>
      Generated with <a href="http://github.com/proutils/webri">WebRI Redfish</a> 1.0.0
      <br/><br/>
    </div>
  </div>

  <div id="documentation">

    <div id="description">
      
        <h1>Time</h1>
      

      
    </div>

    <!-- Constants -->
    
    <div id="constants-list" class="section">
      <h3 class="section-header">Constants</h3>
      <dl>
      
        <dt><a name="FORMAT">FORMAT</a></dt>
        
        <dd class="description missing-docs">(Not documented)</dd>
        
      
      </dl>
    </div>
    

    <!-- Attributes -->
    

    <!-- Methods -->
    
    <div id="public-class-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="elapse-method" class="method-detail ">
        <a name="M000472"></a>

        <div class="method-heading">
        
          <span class="method-name">elapse</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Tracks the elapse time of a code block.
</p>
<pre>
  Time.elapse { sleep 1 }  #=&gt; 0.999188899993896
</pre>
<p>
CREDIT: Hal Fulton
</p>
          

          
          <div class="method-source-code"
            id="elapse-source">
<pre>
<span class="ruby-comment cmt"># File lib/core/facets/time/elapse.rb, line 9</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">elapse</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;Need block&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-identifier">t0</span> = <span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_f</span>
    <span class="ruby-keyword kw">yield</span>
    <span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">t0</span>
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="stamp-method" class="method-detail ">
        <a name="M000482"></a>

        <div class="method-heading">
        
          <span class="method-name">stamp</span><span
            class="method-args">(*args)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Produce time stamp for Time.now. See <a href="Time.html#M000482">stamp</a>.
</p>
<p>
CREDIT: Trans
</p>
          

          
          <div class="method-source-code"
            id="stamp-source">
<pre>
<span class="ruby-comment cmt"># File lib/core/facets/time/stamp.rb, line 24</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">stamp</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
    <span class="ruby-identifier">now</span>.<span class="ruby-identifier">stamp</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
    </div>
  
    <div id="public-instance-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="advance-method" class="method-detail ">
        <a name="M000474"></a>

        <div class="method-heading">
        
          <span class="method-name">advance</span><span
            class="method-args">(options)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Uses Date to provide precise <a href="Time.html">Time</a> calculations for
years, months, and days. The <tt>options</tt> parameter takes a hash with
any of these keys: <tt>:years</tt>, <tt>:months</tt>, <tt>:weeks</tt>,
<tt>:days</tt>, <tt>:hours</tt>, <tt>:minutes</tt>, <tt>:seconds</tt>.
</p>
<p>
CREDIT: ActiveSupport Team
</p>
          

          
          <div class="method-source-code"
            id="advance-source">
<pre>
<span class="ruby-comment cmt"># File lib/core/facets/time/advance.rb, line 10</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">advance</span>(<span class="ruby-identifier">options</span>)
    <span class="ruby-identifier">d</span> = <span class="ruby-identifier">to_date</span>.<span class="ruby-identifier">advance</span>(<span class="ruby-identifier">options</span>)
    <span class="ruby-identifier">time_advanced_by_date</span> = <span class="ruby-identifier">change</span>(<span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">year</span>, <span class="ruby-identifier">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">month</span>, <span class="ruby-identifier">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">day</span>)
    <span class="ruby-identifier">seconds_to_advance</span> = (<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:seconds</span>] <span class="ruby-operator">||</span> <span class="ruby-value">0</span>) <span class="ruby-operator">+</span> (<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:minutes</span>] <span class="ruby-operator">||</span> <span class="ruby-value">0</span>) <span class="ruby-operator">*</span> <span class="ruby-value">60</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:hours</span>] <span class="ruby-operator">||</span> <span class="ruby-value">0</span>) <span class="ruby-operator">*</span> <span class="ruby-value">3600</span>
    <span class="ruby-identifier">seconds_to_advance</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">time_advanced_by_date</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">time_advanced_by_date</span>.<span class="ruby-identifier">since</span>(<span class="ruby-identifier">seconds_to_advance</span>)
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="ago-method" class="method-detail ">
        <a name="M000477"></a>

        <div class="method-heading">
        
          <span class="method-name">ago</span><span
            class="method-args">(number, units=:seconds)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Returns a new <a href="Time.html">Time</a> representing the time a number
of time-units ago.
</p>
          

          
          <div class="method-source-code"
            id="ago-source">
<pre>
<span class="ruby-comment cmt"># File lib/core/facets/time/hence.rb, line 15</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ago</span>(<span class="ruby-identifier">number</span>, <span class="ruby-identifier">units</span>=<span class="ruby-identifier">:seconds</span>)
      <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">hence</span>(<span class="ruby-operator">-</span><span class="ruby-identifier">number</span>, <span class="ruby-identifier">units</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">number</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>

      <span class="ruby-identifier">time</span> = (
        <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">units</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">downcase</span>.<span class="ruby-identifier">to_sym</span>
        <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:years</span>
          <span class="ruby-identifier">set</span>(<span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">year</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">number</span>))
        <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:months</span>
          <span class="ruby-identifier">new_month</span> = ((<span class="ruby-identifier">month</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">number</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>) <span class="ruby-operator">%</span> <span class="ruby-value">12</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
          <span class="ruby-identifier">y</span> = (<span class="ruby-identifier">number</span> <span class="ruby-operator">/</span> <span class="ruby-value">12</span>) <span class="ruby-operator">+</span> (<span class="ruby-identifier">new_month</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">month</span> <span class="ruby-value">? </span><span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>)
          <span class="ruby-identifier">set</span>(<span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">year</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">y</span>), <span class="ruby-identifier">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">new_month</span>)
        <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:weeks</span>
          <span class="ruby-keyword kw">self</span> <span class="ruby-operator">-</span> (<span class="ruby-identifier">number</span> <span class="ruby-operator">*</span> <span class="ruby-value">604800</span>)
        <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:days</span>
          <span class="ruby-keyword kw">self</span> <span class="ruby-operator">-</span> (<span class="ruby-identifier">number</span> <span class="ruby-operator">*</span> <span class="ruby-value">86400</span>)
        <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:hours</span>
          <span class="ruby-keyword kw">self</span> <span class="ruby-operator">-</span> (<span class="ruby-identifier">number</span> <span class="ruby-operator">*</span> <span class="ruby-value">3600</span>)
        <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:minutes</span>
          <span class="ruby-keyword kw">self</span> <span class="ruby-operator">-</span> (<span class="ruby-identifier">number</span> <span class="ruby-operator">*</span> <span class="ruby-value">60</span>)
        <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:seconds</span>, <span class="ruby-keyword kw">nil</span>
          <span class="ruby-keyword kw">self</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">number</span>
        <span class="ruby-keyword kw">else</span>
          <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;unrecognized time units -- #{units}&quot;</span>
        <span class="ruby-keyword kw">end</span>
      )
      <span class="ruby-identifier">dst_adjustment</span>(<span class="ruby-identifier">time</span>)
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="change-method" class="method-detail ">
        <a name="M000481"></a>

        <div class="method-heading">
        
          <span class="method-name">change</span><span
            class="method-args">(options)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Returns a new <a href="Time.html">Time</a> where one or more of the
elements have been changed according to the <tt>options</tt> parameter. The
time options (hour, minute, sec, usec) reset cascadingly, so if only the
hour is passed, then minute, sec, and usec is set to 0. If the hour and
minute is passed, then sec and usec is set to 0.
</p>
<pre>
 t = Time.now            #=&gt; Sat Dec 01 14:10:15 -0500 2007
 t.change(:hour =&gt; 11)   #=&gt; Sat Dec 01 11:00:00 -0500 2007
</pre>
          

          
          <div class="method-source-code"
            id="change-source">
<pre>
<span class="ruby-comment cmt"># File lib/core/facets/time/change.rb, line 13</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">change</span>(<span class="ruby-identifier">options</span>)
    <span class="ruby-identifier">opts</span>=<span class="ruby-identifier">options</span>; <span class="ruby-comment cmt">#{}; options.each_pair{ |k,v| opts[k] = v.to_i }</span>
    <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">send</span>(
      <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">utc?</span> <span class="ruby-value">? </span><span class="ruby-operator">:</span><span class="ruby-identifier">utc</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">:local</span>,
      <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:year</span>]  <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">year</span>,
      <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:month</span>] <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">month</span>,
      <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:day</span>]   <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">day</span>,
      <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:hour</span>]  <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">hour</span>,
      <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:min</span>]   <span class="ruby-operator">||</span> (<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:hour</span>] <span class="ruby-operator">?</span> <span class="ruby-value">0</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">min</span>),
      <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:sec</span>]   <span class="ruby-operator">||</span> ((<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:hour</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:min</span>]) <span class="ruby-operator">?</span> <span class="ruby-value">0</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">sec</span>),
      <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:usec</span>]  <span class="ruby-operator">||</span> ((<span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:hour</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:min</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:sec</span>]) <span class="ruby-operator">?</span> <span class="ruby-value">0</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">usec</span>)
    )
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="dst-adjustment-method" class="method-detail ">
        <a name="M000480"></a>

        <div class="method-heading">
        
          <span class="method-name">dst_adjustment</span><span
            class="method-args">(time)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Adjust DST
</p>
<p>
TODO: Can&#8217;t seem to get this to pass ActiveSupport tests. Even though
it is essentially identical to the ActiveSupport code (see Time#since in
time/calculations.rb). It handles all but 4 tests.
</p>
          

          
          <div class="method-source-code"
            id="dst-adjustment-source">
<pre>
<span class="ruby-comment cmt"># File lib/core/facets/time/hence.rb, line 83</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dst_adjustment</span>(<span class="ruby-identifier">time</span>)
      <span class="ruby-identifier">self_dst</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">dst?</span> <span class="ruby-value">? </span><span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">time_dst</span> = <span class="ruby-identifier">time</span>.<span class="ruby-identifier">dst?</span> <span class="ruby-value">? </span><span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">seconds</span>  = (<span class="ruby-keyword kw">self</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">time</span>).<span class="ruby-identifier">abs</span>
      <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">seconds</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">86400</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">self_dst</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">time_dst</span>)
        <span class="ruby-identifier">time</span> <span class="ruby-operator">+</span> ((<span class="ruby-identifier">self_dst</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">time_dst</span>) <span class="ruby-operator">*</span> <span class="ruby-value">60</span> <span class="ruby-operator">*</span> <span class="ruby-value">60</span>)
      <span class="ruby-keyword kw">else</span>
        <span class="ruby-identifier">time</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="hence-method" class="method-detail ">
        <a name="M000478"></a>

        <div class="method-heading">
        
          <span class="method-name">hence</span><span
            class="method-args">(number, units=:seconds)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Returns a new <a href="Time.html">Time</a> representing the time a number
of time-units hence.
</p>
          

          
          <div class="method-source-code"
            id="hence-source">
<pre>
<span class="ruby-comment cmt"># File lib/core/facets/time/hence.rb, line 46</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">hence</span>(<span class="ruby-identifier">number</span>, <span class="ruby-identifier">units</span>=<span class="ruby-identifier">:seconds</span>)
      <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">ago</span>(<span class="ruby-operator">-</span><span class="ruby-identifier">number</span>, <span class="ruby-identifier">units</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">number</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>

      <span class="ruby-identifier">time</span> = (
        <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">units</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">downcase</span>.<span class="ruby-identifier">to_sym</span>
        <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:years</span>
          <span class="ruby-identifier">set</span>( <span class="ruby-identifier">:year=</span><span class="ruby-operator">&gt;</span>(<span class="ruby-identifier">year</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">number</span>) )
        <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:months</span>
          <span class="ruby-identifier">new_month</span> = ((<span class="ruby-identifier">month</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">number</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>) <span class="ruby-operator">%</span> <span class="ruby-value">12</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
          <span class="ruby-identifier">y</span> = (<span class="ruby-identifier">number</span> <span class="ruby-operator">/</span> <span class="ruby-value">12</span>) <span class="ruby-operator">+</span> (<span class="ruby-identifier">new_month</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">month</span> <span class="ruby-value">? </span><span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>)
          <span class="ruby-identifier">set</span>(<span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">year</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">y</span>), <span class="ruby-identifier">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">new_month</span>)
        <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:weeks</span>
          <span class="ruby-keyword kw">self</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">number</span> <span class="ruby-operator">*</span> <span class="ruby-value">604800</span>)
        <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:days</span>
          <span class="ruby-keyword kw">self</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">number</span> <span class="ruby-operator">*</span> <span class="ruby-value">86400</span>)
        <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:hours</span>
          <span class="ruby-keyword kw">self</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">number</span> <span class="ruby-operator">*</span> <span class="ruby-value">3600</span>)
        <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:minutes</span>
          <span class="ruby-keyword kw">self</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">number</span> <span class="ruby-operator">*</span> <span class="ruby-value">60</span>)
        <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:seconds</span>
          <span class="ruby-keyword kw">self</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">number</span>
        <span class="ruby-keyword kw">else</span>
          <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;unrecognized time units -- #{units}&quot;</span>
        <span class="ruby-keyword kw">end</span>
      )
      <span class="ruby-identifier">dst_adjustment</span>(<span class="ruby-identifier">time</span>)
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="round-method" class="method-detail ">
        <a name="M000475"></a>

        <div class="method-heading">
        
          <span class="method-name">round</span><span
            class="method-args">(amount)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Round time at the nearest range (in seconds).
</p>
<pre>
  t = Time.now
  =&gt;
  t.round(60*60) # 1 hour
  =&gt;
</pre>
          

          
          <div class="method-source-code"
            id="round-source">
<pre>
<span class="ruby-comment cmt"># File lib/core/facets/time/round.rb, line 12</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">round</span>(<span class="ruby-identifier">amount</span>)
    (<span class="ruby-keyword kw">self</span><span class="ruby-operator">+</span><span class="ruby-identifier">amount</span><span class="ruby-operator">/</span><span class="ruby-value">2.0</span>).<span class="ruby-identifier">trunc</span>(<span class="ruby-identifier">amount</span>)
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="set-method" class="method-detail ">
        <a name="M000476"></a>

        <div class="method-heading">
        
          <span class="method-name">set</span><span
            class="method-args">(options)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Like change but does not reset earlier times.
</p>
<p>
NOTE: It would be better, probably if this were called
&#8220;change&#8221;.
</p>
<pre>
      and that #change were called &quot;reset&quot;.
</pre>
          

          
          <div class="method-source-code"
            id="set-source">
<pre>
<span class="ruby-comment cmt"># File lib/core/facets/time/set.rb, line 8</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set</span>(<span class="ruby-identifier">options</span>)
    <span class="ruby-identifier">opts</span>={}; <span class="ruby-identifier">options</span>.<span class="ruby-identifier">each_pair</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">v</span>.<span class="ruby-identifier">to_i</span> }
    <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">send</span>( <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">utc?</span> <span class="ruby-value">? </span><span class="ruby-operator">:</span><span class="ruby-identifier">utc</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">:local</span>,
      <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:year</span>]  <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">year</span>,
      <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:month</span>] <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">month</span>,
      <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:day</span>]   <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">day</span>,
      <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:hour</span>]  <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">hour</span>,
      <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:min</span>]   <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">min</span>,
      <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:sec</span>]   <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">sec</span>,
      <span class="ruby-identifier">opts</span>[<span class="ruby-identifier">:usec</span>]  <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">usec</span>
    )
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="stamp-method" class="method-detail ">
        <a name="M000483"></a>

        <div class="method-heading">
        
          <span class="method-name">stamp</span><span
            class="method-args">(fmt = nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Create a time stamp.
</p>
<pre>
  Time.now.stamp(:short)    #=&gt; &quot;01 Dec 15:15&quot;
</pre>
<p>
Supported formats come from the Time::FORMAT constant.
</p>
<p>
CREDIT: Trans
</p>
          

          
          <div class="method-source-code"
            id="stamp-source">
<pre>
<span class="ruby-comment cmt"># File lib/core/facets/time/stamp.rb, line 36</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">stamp</span>(<span class="ruby-identifier">fmt</span> = <span class="ruby-keyword kw">nil</span>)
    <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">String</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">fmt</span>
      <span class="ruby-identifier">fmt</span> = <span class="ruby-constant">FORMAT</span>[<span class="ruby-identifier">fmt</span>]
    <span class="ruby-keyword kw">end</span>
    <span class="ruby-identifier">strftime</span>(<span class="ruby-identifier">fmt</span>).<span class="ruby-identifier">strip</span>
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="to-time-method" class="method-detail ">
        <a name="M000479"></a>

        <div class="method-heading">
        
          <span class="method-name">to_time</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
To be able to keep Dates and Times interchangeable on conversions.
</p>
          

          
          <div class="method-source-code"
            id="to-time-source">
<pre>
<span class="ruby-comment cmt"># File lib/core/facets/time/to_time.rb, line 8</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_time</span>
      <span class="ruby-identifier">getlocal</span> 
    <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
      <div id="trunc-method" class="method-detail ">
        <a name="M000473"></a>

        <div class="method-heading">
        
          <span class="method-name">trunc</span><span
            class="method-args">(amount)</span>
          <span class="method-click-advice">click to toggle source</span>
        
        </div>

        <div class="method-description">
          
          <p>
Truncate time at give range (in seconds).
</p>
<pre>
  t = Time.now
  =&gt;
  t.trunc(60*60) # 1 hour
  =&gt;
</pre>
          

          
          <div class="method-source-code"
            id="trunc-source">
<pre>
<span class="ruby-comment cmt"># File lib/core/facets/time/trunc.rb, line 10</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">trunc</span>(<span class="ruby-identifier">amount</span>)
    <span class="ruby-keyword kw">self</span> <span class="ruby-operator">-</span> (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">amount</span>)
  <span class="ruby-keyword kw">end</span></pre>
          </div>
          
        </div>

        
      </div>

    
    </div>
  

  </div>


  <div id="rdoc-debugging-section-dump" class="debugging-section">
  
    <p>Disabled; run with --debug to generate this.</p>
  
  </div>

</main>
</body>
</html>

