<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">

  <title>Facets Standard Extensions</title>

  <link rel="shortcut icon" type="image/x-icon" href="./assets/favicon.ico" />

  <link rel="stylesheet" type="text/css" href="./assets/long/css/low.css" />
  <link rel="stylesheet" type="text/css" href="./assets/long/css/screen.css" media="screen" />
  <link rel="stylesheet" type="text/css" href="./assets/long/css/print.css" media="print" />
  <link rel="stylesheet" type="text/css" href="./assets/prettify.css" />

  <link rel="alternate stylesheet" type="text/css" href="./assets/long/css/low_vision_screen.css" media="screen" title="Low vision" />

  <script type="text/javascript" src="./assets/jquery.js" ></script>
  <script type="text/javascript" src="./assets/prettify.js"></script>
  <script type="text/javascript" src="./assets/quicksearch.js"></script>
  <script type="text/javascript" src="./assets/main.js"></script>  

  <script type="text/javascript">
    $(document).ready( function() {
	    hookHighlightSyntax();
	    hookQuickSearch();
	    // $('ul.link-list a').bind( "click", highlightClickTarget );
    });
  </script>
</head>

<body>
  <div id="page">

    <div id="header">
      <div id="logo" style="font-size: 52px; font-family: times, serif; font-style: italic; color: black;">
        <img src="./assets/long/img/logo.gif" alt="" title="" height="119" align="absmiddle">Facets Standard Extensions
      </div>
      <div class="site-links">
<a href="./index.html">Index</a><span class="separator"> | </span>
  <a href="http://rubyworks.github.com/facets">Home Page</a><span class="separator"> |</span>
  <a href="http://wiki.github.com/rubyworks/facets">Community</a><span class="separator"> | </span>
<a href="http://www.ruby-lang.org/en/about/">About Ruby</a>
      </div>
    </div>

    <hr class="hidden-modern">

    <div id="main-wrapper">
      <div id="main">

        

<div id="content-wrapper">

    <div id="head-wrapper-1">
        <div id="head-wrapper-2">
            <div id="head">
                <h1>FileUtils</h1>
            </div>
        </div>
    </div>

    <div id="content">

        <!-- DESCRIPTION -->

        

        <!-- REQUIRES -->

        

        <!-- CONTENTS -->

        
        

        <!-- INCLUDED MODULES -->

        

        <!-- DESCRIPTION (of what?) --->

        

        <!-- CLASSES AND MODULES -->

        
        <h3>Classes and Modules</h3>
        <ul>
            
            <li><span class="type">MODULE</span> <a href="FileUtils/DryRun.html">FileUtils::DryRun</a></li>
            
            <li><span class="type">MODULE</span> <a href="FileUtils/NoWrite.html">FileUtils::NoWrite</a></li>
            
            <li><span class="type">MODULE</span> <a href="FileUtils/Verbose.html">FileUtils::Verbose</a></li>
            
        </ul>
        

        <!-- CONSTANTS -->

        
        <h3>Constants</h3>
        <table border='0' cellpadding='5'>
            
            <tr valign='top'>
                <td class="attr-name">Win32Exts</td>
                <td>=</td>
                <td class="attr-value">%w{.exe .com .bat .cmd}</td>
            </tr>
            
            
            <tr valign='top'>
                <td class="attr-name">OPT_TABLE</td>
                <td>=</td>
                <td class="attr-value">{} unless const_defined?(:OPT_TABLE)</td>
            </tr>
            
            
            <tr valign='top'>
                <td class="attr-name">LINKING_SUPPORTED</td>
                <td>=</td>
                <td class="attr-value">[true]</td>
            </tr>
            
            
        </table>
        

        <!-- ATTRIBUTES -->

        

        <!-- METHODS -->

        
        
                <h3>Instance Public methods</h3>
                <dl>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-amass_source')" id="l_method-i-amass_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-amass"></a><b>amass</b>(include_globs, exclude_globs=[], ignore=[])
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-amass_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/standard/facets/fileutils/amass.rb, line 13</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">amass</span>(<span class="ruby-identifier">include_globs</span>, <span class="ruby-identifier">exclude_globs</span>=[], <span class="ruby-identifier">ignore</span>=[])
  <span class="ruby-identifier">include_files</span> = <span class="ruby-identifier">include_globs</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-identifier">g</span>) }.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">uniq</span>
  <span class="ruby-identifier">exclude_files</span> = <span class="ruby-identifier">exclude_globs</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-identifier">g</span>) }.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">uniq</span>

  <span class="ruby-identifier">include_globs</span> = <span class="ruby-identifier">include_globs</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">f</span>) <span class="ruby-operator">?</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">f</span>, <span class="ruby-string">'**/*'</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">f</span> } <span class="ruby-comment"># Recursive!</span>
  <span class="ruby-identifier">exclude_globs</span> = <span class="ruby-identifier">exclude_globs</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">f</span>) <span class="ruby-operator">?</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">f</span>, <span class="ruby-string">'**/*'</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">f</span> } <span class="ruby-comment"># Recursive!</span>

  <span class="ruby-identifier">include_files</span> = <span class="ruby-identifier">include_globs</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-identifier">g</span>) }.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">uniq</span>
  <span class="ruby-identifier">exclude_files</span> = <span class="ruby-identifier">exclude_globs</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-identifier">g</span>) }.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">uniq</span>

  <span class="ruby-identifier">files</span> = <span class="ruby-identifier">include_files</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">exclude_files</span>

  <span class="ruby-identifier">files</span> = <span class="ruby-identifier">files</span>.<span class="ruby-identifier">reject</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">ignore</span>.<span class="ruby-identifier">any?</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">fnmatch?</span>(<span class="ruby-identifier">x</span>, <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">f</span>)) } }

  <span class="ruby-identifier">files</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>An intergrated glob like method that take a set of include globs, exclude
globs and ignore globs to produce a collection of paths.</p>

<p>The ignore_globs differ from exclude_globs in that they match by the
basename of the path rather than the whole pathname.</p>

<p>TODO: Should ignore be based on any portion of the path, not just the
basename?</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-copy_entryx_source')" id="l_method-i-copy_entryx_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-copy_entryx"></a><b>copy_entryx</b>(src, dest, filter, preserve = false, dereference_root = false, remove_destination = false)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-copy_entryx_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/standard/facets/fileutils/cp_rx.rb, line 32</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">copy_entryx</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">filter</span>, <span class="ruby-identifier">preserve</span> = <span class="ruby-keyword">false</span>, <span class="ruby-identifier">dereference_root</span> = <span class="ruby-keyword">false</span>, <span class="ruby-identifier">remove_destination</span> = <span class="ruby-keyword">false</span>)
        <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">src</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">dereference_root</span>).<span class="ruby-identifier">traverse</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
                <span class="ruby-keyword">if</span> <span class="ruby-identifier">filter</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">ent</span>.<span class="ruby-identifier">path</span>) <span class="ruby-keyword">then</span>
                        <span class="ruby-identifier">destent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">dest</span>, <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">rel</span>, <span class="ruby-keyword">false</span>)
                        <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">remove_destination</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>)
                        <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>
                        <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy_metadata</span>(<span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">preserve</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Like FileUtils.copy_entry, but takes a filter proc that can return false to
skip a file.</p>

<p>Note that if the filter rejects a subdirectory then everything within that
subdirectory is automatically skipped as well.</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-cp_rx_source')" id="l_method-i-cp_rx_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-cp_rx"></a><b>cp_rx</b>(src, dest, options = {}, &amp;filter)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-cp_rx_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/standard/facets/fileutils/cp_rx.rb, line 16</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">cp_rx</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {}, &amp;<span class="ruby-identifier">filter</span>)
        <span class="ruby-identifier">fu_check_options</span>(<span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-string">'cp_r'</span>])
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:verbose</span>]
          <span class="ruby-identifier">fu_output_message</span>(<span class="ruby-node">&quot;cp -r#{options[:preserve] ? 'p' : ''}#{options[:remove_destination] ? ' --remove-destination' : ''} #{[src,dest].flatten.join ' '}&quot;</span>)
  <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:noop</span>]
        <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
                <span class="ruby-identifier">copy_entryx</span>(<span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">filter</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:preserve</span>], <span class="ruby-identifier">options</span>[<span class="ruby-value">:dereference_root</span>], <span class="ruby-identifier">options</span>[<span class="ruby-value">:remove_destination</span>])
        <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Like FileUtils.cp_r, but takes a filter proc that can return false to skip
a file:</p>

<pre>cp_rx &quot;bigDirectoryTree&quot;, &quot;dest&quot;, {:noop =&gt; true} do |name|
   /dontCopyThis$/.match(name)
end</pre>

<p>Note that if the filter rejects a subdirectory then everything within that
subdirectory is automatically skipped as well.</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-head_source')" id="l_method-i-head_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-head"></a><b>head</b>(filename,lines)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-head_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/standard/facets/fileutils/slice.rb, line 25</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">head</span>(<span class="ruby-identifier">filename</span>,<span class="ruby-identifier">lines</span>) <span class="ruby-comment">#:yield:</span>
  <span class="ruby-identifier">a</span> = []
  <span class="ruby-constant">IO</span>.<span class="ruby-identifier">foreach</span>(<span class="ruby-identifier">filename</span>){<span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">lines</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">lines</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
        <span class="ruby-keyword">yield</span> <span class="ruby-identifier">line</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">a</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
      <span class="ruby-keyword">end</span>
  }
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">a</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>In block form, yields the first number of <tt>lines</tt> of file
<tt>filename</tt>. In non-block form, it returns an array of the first
number of <tt>lines</tt>:</p>

<pre># Returns first 10 lines of 'myfile'
FileUtils.head(&quot;myfile&quot;, 10)</pre>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-link_entry_source')" id="l_method-i-link_entry_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-link_entry"></a><b>link_entry</b>(src, dest, dereference_root = false, remove_destination = false)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-link_entry_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/standard/facets/fileutils/ln_r.rb, line 55</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">link_entry</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">dereference_root</span> = <span class="ruby-keyword">false</span>, <span class="ruby-identifier">remove_destination</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">src</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">dereference_root</span>).<span class="ruby-identifier">traverse</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">destent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">dest</span>, <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">rel</span>, <span class="ruby-keyword">false</span>)
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">remove_destination</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>)
    <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">link</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Hard links a file system entry <tt>src</tt> to <tt>dest</tt>. If
<tt>src</tt> is a directory, this method links its contents recursively.</p>

<p>Both of <tt>src</tt> and <tt>dest</tt> must be a path name. <tt>src</tt>
must exist, <tt>dest</tt> must not exist.</p>

<p>If <tt>dereference_root</tt> is true, this method dereference tree root.</p>

<p>If <tt>remove_destination</tt> is true, this method removes each
destination file before copy.</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-ln_r_source')" id="l_method-i-ln_r_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-ln_r"></a><b>ln_r</b>(src, dest, options = {})
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-ln_r_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/standard/facets/fileutils/ln_r.rb, line 29</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">ln_r</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-string">'ln_r'</span>]
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;ln -r#{options[:remove_destination] ? ' --remove-destination' : ''} #{[src,dest].flatten.join ' '}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:verbose</span>]
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:noop</span>]
  <span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dup</span>
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:dereference_root</span>] = <span class="ruby-keyword">true</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-value">:dereference_root</span>)
  <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">link_entry</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:dereference_root</span>], <span class="ruby-identifier">options</span>[<span class="ruby-value">:remove_destination</span>]
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Options: noop verbose dereference_root remove_destination</p>

<p>Hard link <tt>src</tt> to <tt>dest</tt>. If <tt>src</tt> is a directory,
this method links all its contents recursively. If <tt>dest</tt> is a
directory, links <tt>src</tt> to <tt>dest/src</tt>.</p>

<p><tt>src</tt> can be a list of files.</p>

<pre># Installing ruby library &quot;mylib&quot; under the site_ruby
FileUtils.rm_r site_ruby + '/mylib', :force
FileUtils.ln_r 'lib/', site_ruby + '/mylib'

# Examples of copying several files to target directory.
FileUtils.ln_r %w(mail.rb field.rb debug/), site_ruby + '/tmail'
FileUtils.ln_r Dir.glob('*.rb'), '/home/aamine/lib/ruby', :noop =&gt; true, :verbose =&gt; true

# If you want to copy all contents of a directory instead of the
# directory itself, c.f. src/x -&gt; dest/x, src/y -&gt; dest/y,
# use following code.
FileUtils.ln_r 'src/.', 'dest'     # cp_r('src', 'dest') makes src/dest,
                                   # but this doesn't.</pre>

<p>TODO: Why –remove-destination and not just –force?</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-out_of_date-3F_source')" id="l_method-i-out_of_date-3F_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-out_of_date-3F"></a><b>out_of_date?</b>(path, *sources)
                    
                    </dt>

                    <dd>
                    

                    
                      
                      
<p>Alias for <a href="FileUtils.html#method-i-outofdate-3F">outofdate?</a></p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-outofdate-3F_source')" id="l_method-i-outofdate-3F_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-outofdate-3F"></a><b>outofdate?</b>(path, *sources)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-outofdate-3F_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/standard/facets/fileutils/outofdate.rb, line 7</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">outofdate?</span>(<span class="ruby-identifier">path</span>, *<span class="ruby-identifier">sources</span>)
  <span class="ruby-comment">#return true unless File.exist?(path)</span>
  <span class="ruby-operator">!</span> <span class="ruby-identifier">uptodate?</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">sources</span>.<span class="ruby-identifier">flatten</span>)
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>The opposite of #uptodate?</p>

                    

                    
                    <div class="aka">
                        This method is also aliased as
                        
                        <a href="FileUtils.html#method-i-out_of_date-3F">out_of_date?</a>
                        
                    </div>
                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-safe_ln_source')" id="l_method-i-safe_ln_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-safe_ln"></a><b>safe_ln</b>(*args)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-safe_ln_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/standard/facets/fileutils/safe_ln.rb, line 13</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">safe_ln</span>(*<span class="ruby-identifier">args</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-constant">LINKING_SUPPORTED</span>[<span class="ruby-value">0</span>]
    <span class="ruby-identifier">cp</span>(*<span class="ruby-identifier">args</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">ln</span>(*<span class="ruby-identifier">args</span>)
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EOPNOTSUPP</span>
      <span class="ruby-constant">LINKING_SUPPORTED</span>[<span class="ruby-value">0</span>] = <span class="ruby-keyword">false</span>
      <span class="ruby-identifier">cp</span>(*<span class="ruby-identifier">args</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Attempt to do a normal file link, but fall back to a copy if the link
fails.</p>

<p>CREDIT: Jim Weirich</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-slice_source')" id="l_method-i-slice_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-slice"></a><b>slice</b>(filename,from,to)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-slice_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/standard/facets/fileutils/slice.rb, line 15</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">slice</span>(<span class="ruby-identifier">filename</span>,<span class="ruby-identifier">from</span>,<span class="ruby-identifier">to</span>) <span class="ruby-comment">#:yield:</span>
  <span class="ruby-constant">IO</span>.<span class="ruby-identifier">readlines</span>(<span class="ruby-identifier">filename</span>)[<span class="ruby-identifier">from</span><span class="ruby-operator">-</span><span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">to</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>]
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>In block form, yields lines <tt>from</tt>-<tt>to</tt>.  In non-block form,
returns an array of lines <tt>from</tt>-<tt>to</tt>:</p>

<pre># Returns lines 8-12 of 'myfile'
FileUtils.body(&quot;myfile&quot;,8,12)</pre>

<p>CREDIT Shashank <a href="Date.html">Date</a>, via Daniel Berger.</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-stage_source')" id="l_method-i-stage_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-stage"></a><b>stage</b>(stage_directory, source_directory, files, options={})
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-stage_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/standard/facets/fileutils/stage.rb, line 15</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">stage</span>(<span class="ruby-identifier">stage_directory</span>, <span class="ruby-identifier">source_directory</span>, <span class="ruby-identifier">files</span>, <span class="ruby-identifier">options</span>={})
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">stage_directory</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:noop</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:dryrun</span>]

  <span class="ruby-identifier">stage_directory</span>, <span class="ruby-identifier">source_directory</span> = <span class="ruby-identifier">stage_directory</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">source_directory</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-comment">## ensure existance of staging area</span>
  <span class="ruby-identifier">rm_r</span>(<span class="ruby-identifier">stage_directory</span>) <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">stage_directory</span>)
  <span class="ruby-identifier">mkdir_p</span>(<span class="ruby-identifier">stage_directory</span>)
  <span class="ruby-comment">## link files into staging area</span>
  <span class="ruby-identifier">files</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">src</span>  = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">source_directory</span>, <span class="ruby-identifier">f</span>)
    <span class="ruby-identifier">file</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">stage_directory</span>, <span class="ruby-identifier">f</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">src</span>)
      <span class="ruby-identifier">mkdir_p</span>(<span class="ruby-identifier">file</span>) <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">file</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">fdir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">file</span>)
      <span class="ruby-identifier">mkdir_p</span>(<span class="ruby-identifier">fdir</span>) <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">fdir</span>)
      <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">file</span>) <span class="ruby-keyword">and</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">mtime</span>(<span class="ruby-identifier">file</span>) <span class="ruby-operator">&gt;=</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">mtime</span>(<span class="ruby-identifier">src</span>)
        <span class="ruby-identifier">ln</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">file</span>) <span class="ruby-comment">#safe_ln ?</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">stage_directory</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Stage by hard linking included files to a stage directory.</p>

<p>stage_directory   -  Where to stage the files source_directory  -  Where to
find files to stage files             -  Files to link in stage relative to
source</p>

<p>TODO: Rename to #link_stage or something less likely to name clash? TODO:
Add options for :verbose, :noop and :dryrun ?</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-tail_source')" id="l_method-i-tail_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-tail"></a><b>tail</b>(filename,lines)
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-tail_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/standard/facets/fileutils/slice.rb, line 50</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">tail</span>(<span class="ruby-identifier">filename</span>,<span class="ruby-identifier">lines</span>) <span class="ruby-comment">#:yield</span>
  <span class="ruby-constant">IO</span>.<span class="ruby-identifier">readlines</span>(<span class="ruby-identifier">filename</span>).<span class="ruby-identifier">reverse</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-identifier">lines</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>].<span class="ruby-identifier">reverse</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>In block form, yields the last number of <tt>lines</tt> of file
<tt>filename</tt>. In non-block form, it returns the lines as an array.</p>

<p>Note that this method slurps the entire file, so I don’t recommend it for
very large files. If you want an advanced form of <tt>tail</tt>, I suggest
using file-tail, by Florian Frank (available on the RAA):</p>

<pre># Returns last 3 lines of 'myfile'
FileUtils.tail(&quot;myfile&quot;,3)</pre>

<p>And no tail -f.</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-wc_source')" id="l_method-i-wc_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-wc"></a><b>wc</b>(filename,option='all')
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-wc_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/standard/facets/fileutils/wc.rb, line 17</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">wc</span>(<span class="ruby-identifier">filename</span>,<span class="ruby-identifier">option</span>=<span class="ruby-string">'all'</span>)
  <span class="ruby-identifier">option</span>.<span class="ruby-identifier">downcase!</span>
  <span class="ruby-identifier">valid</span> = <span class="ruby-node">%all bytes characters chars lines words/</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">valid</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">option</span>)
      <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Invalid option: '#{option}'&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">n</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">option</span> <span class="ruby-operator">==</span> <span class="ruby-string">'lines'</span>
      <span class="ruby-constant">IO</span>.<span class="ruby-identifier">foreach</span>(<span class="ruby-identifier">filename</span>){ <span class="ruby-identifier">n</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span> }
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">n</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">option</span> <span class="ruby-operator">==</span> <span class="ruby-string">'bytes'</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">filename</span>){ <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">f</span>.<span class="ruby-identifier">each_byte</span>{ <span class="ruby-identifier">n</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span> }
      }
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">n</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">option</span> <span class="ruby-operator">==</span> <span class="ruby-string">'characters'</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">option</span> <span class="ruby-operator">==</span> <span class="ruby-string">'chars'</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">filename</span>){ <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">while</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">getc</span>
            <span class="ruby-identifier">n</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">end</span>
      }
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">n</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">option</span> <span class="ruby-operator">==</span> <span class="ruby-string">'words'</span>
      <span class="ruby-constant">IO</span>.<span class="ruby-identifier">foreach</span>(<span class="ruby-identifier">filename</span>){ <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">n</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">split</span>.<span class="ruby-identifier">length</span>
      }
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">n</span>
  <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">bytes</span>,<span class="ruby-identifier">chars</span>,<span class="ruby-identifier">lines</span>,<span class="ruby-identifier">words</span> = <span class="ruby-value">0</span>,<span class="ruby-value">0</span>,<span class="ruby-value">0</span>,<span class="ruby-value">0</span>
      <span class="ruby-constant">IO</span>.<span class="ruby-identifier">foreach</span>(<span class="ruby-identifier">filename</span>){ <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">lines</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">words</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">split</span>.<span class="ruby-identifier">length</span>
        <span class="ruby-identifier">chars</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">''</span>).<span class="ruby-identifier">length</span>
      }
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">filename</span>){ <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">while</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">getc</span>
            <span class="ruby-identifier">bytes</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">end</span>
      }
      <span class="ruby-keyword">return</span> [<span class="ruby-identifier">bytes</span>,<span class="ruby-identifier">chars</span>,<span class="ruby-identifier">words</span>,<span class="ruby-identifier">lines</span>]
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>With no arguments, returns a four element array consisting of the number of
bytes, characters, words and lines in <em>filename</em>, respectively.</p>

<p>Valid options are <tt>bytes</tt>, <tt>characters</tt> (or just ‘chars’),
<tt>words</tt> and <tt>lines</tt>:</p>

<pre># Return the number of words in 'myfile'
FileUtils.wc(&quot;myfile&quot;,'words')</pre>

<p>CREDIT: Daniel J. Berger</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-whereis_source')" id="l_method-i-whereis_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-whereis"></a><b>whereis</b>(prog, path=ENV['PATH'])
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-whereis_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/standard/facets/fileutils/whereis.rb, line 25</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">whereis</span>(<span class="ruby-identifier">prog</span>, <span class="ruby-identifier">path</span>=<span class="ruby-constant">ENV</span>[<span class="ruby-string">'PATH'</span>]) <span class="ruby-comment">#:yield:</span>
  <span class="ruby-identifier">dirs</span> = []
  <span class="ruby-identifier">path</span>.<span class="ruby-identifier">split</span>(<span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">PATH_SEPARATOR</span>).<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
      <span class="ruby-comment"># Windows checks against specific extensions</span>
      <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">ALT_SEPARATOR</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">prog</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">'.'</span>)
            <span class="ruby-identifier">f</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">dir</span>,<span class="ruby-identifier">prog</span>)
            <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">executable?</span>(<span class="ruby-identifier">f</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">f</span>)
              <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
                  <span class="ruby-keyword">yield</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\//</span>,<span class="ruby-string">'\'</span>)
              <span class="ruby-keyword">else</span>
                  <span class="ruby-identifier">dirs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\//</span>,<span class="ruby-string">'\'</span>)
              <span class="ruby-keyword">end</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">else</span>
            <span class="ruby-constant">Win32Exts</span>.<span class="ruby-identifier">find_all</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">ext</span><span class="ruby-operator">|</span>
              <span class="ruby-identifier">f</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">dir</span>,<span class="ruby-identifier">prog</span><span class="ruby-operator">+</span><span class="ruby-identifier">ext</span>)
              <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">executable?</span>(<span class="ruby-identifier">f</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">f</span>)
                  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
                    <span class="ruby-keyword">yield</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\//</span>,<span class="ruby-string">'\'</span>)
                  <span class="ruby-keyword">else</span>
                    <span class="ruby-identifier">dirs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\//</span>,<span class="ruby-string">'\'</span>)
                  <span class="ruby-keyword">end</span>
              <span class="ruby-keyword">end</span>
            }
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">f</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">dir</span>,<span class="ruby-identifier">prog</span>)
        <span class="ruby-comment"># Avoid /usr/lib/ruby, for example</span>
        <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">executable?</span>(<span class="ruby-identifier">f</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">f</span>)
            <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
              <span class="ruby-keyword">yield</span> <span class="ruby-identifier">f</span>
            <span class="ruby-keyword">else</span>
              <span class="ruby-identifier">dirs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">f</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
  }
  <span class="ruby-identifier">dirs</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">dirs</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>In block form, yields each ((<b>program</b>)) within ((<b>path</b>)).  In
non-block form, returns an array of each ((<b>program</b>)) within
((<b>path</b>)).  Returns (({nil})) if not found.</p>

<p>On the MS Windows platform, it looks for executables ending with .exe, .bat
and .com, which you may optionally include in the program name:</p>

<pre>FileUtils.whereis(&quot;ruby&quot;)  #=&gt; ['/usr/local/bin/ruby','/opt/bin/ruby']</pre>

<p>CREDIT: Daniel J. Berger</p>

                    

                    

                    </dd>
                
                    <p class="source-link" style="float: right;">
                        <a href="javascript:toggleSource('method-i-which_source')" id="l_method-i-which_source"><img src="./assets/long/img/rb.png" alt="[+]"></a>
                        
                    </p>

                    <dt>
                    
                      <a name="method-i-which"></a><b>which</b>(prog, path=ENV['PATH'])
                    
                    </dt>

                    <dd>
                    
                      
                        <div id="method-i-which_source" style="display: none;">
                            <pre class="code"><code><span class="ruby-comment"># File lib/standard/facets/fileutils/which.rb, line 27</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">which</span>(<span class="ruby-identifier">prog</span>, <span class="ruby-identifier">path</span>=<span class="ruby-constant">ENV</span>[<span class="ruby-string">'PATH'</span>])
  <span class="ruby-identifier">path</span>.<span class="ruby-identifier">split</span>(<span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">PATH_SEPARATOR</span>).<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
    <span class="ruby-comment"># Windows checks against specific extensions</span>
    <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">ALT_SEPARATOR</span>
      <span class="ruby-identifier">ext</span> = <span class="ruby-constant">Win32Exts</span>.<span class="ruby-identifier">find</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">ext</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">prog</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">'.'</span>) <span class="ruby-comment"># Assume extension already included</span>
          <span class="ruby-identifier">f</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">dir</span>,<span class="ruby-identifier">prog</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">f</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">dir</span>,<span class="ruby-identifier">prog</span><span class="ruby-operator">+</span><span class="ruby-identifier">ext</span>)
        <span class="ruby-keyword">end</span>
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">executable?</span>(<span class="ruby-identifier">f</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">f</span>)
      }
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">ext</span>
        <span class="ruby-comment"># Use backslashes, not forward slashes</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">prog</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">'.'</span>) <span class="ruby-comment"># Assume extension already included</span>
          <span class="ruby-identifier">f</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>( <span class="ruby-identifier">dir</span>, <span class="ruby-identifier">prog</span> ).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\//</span>,<span class="ruby-string">'\'</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">f</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>( <span class="ruby-identifier">dir</span>, <span class="ruby-identifier">prog</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">ext</span> ).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\//</span>,<span class="ruby-string">'\'</span>)
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">f</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">f</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">dir</span>,<span class="ruby-identifier">prog</span>)
      <span class="ruby-comment"># Avoid /usr/lib/ruby, for example</span>
      <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">executable?</span>(<span class="ruby-identifier">f</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">f</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-identifier">join</span>( <span class="ruby-identifier">dir</span>, <span class="ruby-identifier">prog</span> )
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  }
  <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></code></pre>
                        </div>
                    

                    
                      
                      
<p>Looks for the first occurrence of <em>program</em> within <em>path</em>.</p>

<p>On the MS Windows platform, it looks for executables ending with .exe, .bat
and .com, which you may optionally include in the program name. Returns
<tt>nil</tt> if not found.</p>

<p>CREDIT: Daniel J. Berger, Michael Granger</p>

                    

                    

                    </dd>
                
            
        

     </div>

 </div>

<hr class="hidden-modern" />

<div id="sidebar-wrapper">

    <div id="sidebar">

        <div class="navigation" style="background-color: transparent;">
          <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
          <fieldset>
            <legend>Quicksearch</legend>
            <input type="text" name="quicksearch" value="" class="quicksearch-field" style="width: 95%;" />
          </fieldset>
          </form>
        </div>

        <br/><br/>

        <!-- PARENT -->
        
        <div class="navigation">
          <h3>Parent</h3>
          <ul>
            <li><a href="lib/standard/facets/fileutils/safe_ln_rb.html">safe_ln.rb</a></li>
          </ul>
        </div>
        

        <!-- SUPERCLASS -->
        

        <!-- INCLUDED MODULES -->

        

        <!-- CLASSES AND MODULES -->

        
        <div class="navigation">
          <h3>Classes and Modules</h3>
          <ul>
              
              <li><a href="FileUtils/DryRun.html">DryRun</a></li>
              
              <li><a href="FileUtils/NoWrite.html">NoWrite</a></li>
              
              <li><a href="FileUtils/Verbose.html">Verbose</a></li>
              
          </ul>
        </div>
        

        <!-- METHOD LIST -->
        
        
        <div class="navigation">
            <h3>Methods</h3>
            <ul class="menu quicksearch-target">
                
                <li><a href="#method-i-amass">amass</a></li>
                
                <li><a href="#method-i-copy_entryx">copy_entryx</a></li>
                
                <li><a href="#method-i-cp_rx">cp_rx</a></li>
                
                <li><a href="#method-i-head">head</a></li>
                
                <li><a href="#method-i-link_entry">link_entry</a></li>
                
                <li><a href="#method-i-ln_r">ln_r</a></li>
                
                <li><a href="#method-i-out_of_date-3F">out_of_date?</a></li>
                
                <li><a href="#method-i-outofdate-3F">outofdate?</a></li>
                
                <li><a href="#method-i-safe_ln">safe_ln</a></li>
                
                <li><a href="#method-i-slice">slice</a></li>
                
                <li><a href="#method-i-stage">stage</a></li>
                
                <li><a href="#method-i-tail">tail</a></li>
                
                <li><a href="#method-i-wc">wc</a></li>
                
                <li><a href="#method-i-whereis">whereis</a></li>
                
                <li><a href="#method-i-which">which</a></li>
                
            </ul>
        </div>
        

        <!-- IN FILES -->

        <div class="navigation">
          <h3>In Files</h3>
          <ul>
          
            <li class="file">
              <a href="./lib/standard/facets/fileutils/which_rb.html" title="lib/standard/facets/fileutils/which.rb">lib/standard/facets/fileutils/which.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/standard/facets/fileutils/whereis_rb.html" title="lib/standard/facets/fileutils/whereis.rb">lib/standard/facets/fileutils/whereis.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/standard/facets/fileutils/ln_r_rb.html" title="lib/standard/facets/fileutils/ln_r.rb">lib/standard/facets/fileutils/ln_r.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/standard/facets/fileutils/cp_rx_rb.html" title="lib/standard/facets/fileutils/cp_rx.rb">lib/standard/facets/fileutils/cp_rx.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/standard/facets/fileutils/amass_rb.html" title="lib/standard/facets/fileutils/amass.rb">lib/standard/facets/fileutils/amass.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/standard/facets/fileutils/wc_rb.html" title="lib/standard/facets/fileutils/wc.rb">lib/standard/facets/fileutils/wc.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/standard/facets/fileutils/slice_rb.html" title="lib/standard/facets/fileutils/slice.rb">lib/standard/facets/fileutils/slice.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/standard/facets/fileutils/outofdate_rb.html" title="lib/standard/facets/fileutils/outofdate.rb">lib/standard/facets/fileutils/outofdate.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/standard/facets/fileutils/stage_rb.html" title="lib/standard/facets/fileutils/stage.rb">lib/standard/facets/fileutils/stage.rb</a>
            </li>
          
            <li class="file">
              <a href="./lib/standard/facets/fileutils/safe_ln_rb.html" title="lib/standard/facets/fileutils/safe_ln.rb">lib/standard/facets/fileutils/safe_ln.rb</a>
            </li>
          
          </ul>
        </div>

    </div>

</div>



        <hr class="hidden-modern">

        <div class="foot">
          <div class="site-links">
<a href="./index.html">Index</a><span class="separator"> | </span>
  <a href="http://rubyworks.github.com/facets">Home Page</a><span class="separator"> |</span>
  <a href="http://wiki.github.com/rubyworks/facets">Community</a><span class="separator"> | </span>
<a href="http://www.ruby-lang.org/en/about/">About Ruby</a>
          </div>
        </div>

      </div>
    </div> <!-- end main-wrapper -->

    <div id="search-box">
<form id="search-form" action="http://www.google.com/cse">
<table class="fieldset">
  <tbody><tr>
    <td>
      <input class="field" name="q" size="31" style="background: white url(http://www.google.com/coop/intl/en/images/google_custom_search_watermark.gif) no-repeat scroll left center; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;" onfocus="this.style.background='white'" onblur="if (/^\s*$/.test(this.value)) this.style.background='white url(http://www.google.com/coop/intl/en/images/google_custom_search_watermark.gif) left no-repeat'" type="text">
    </td>
    <td>
      <input name="cx" value="013598269713424429640:g5orptiw95w" type="hidden">
      <input name="ie" value="UTF-8" type="hidden">
      <input class="button" name="sa" value="Search" type="submit">
    </td>
  </tr>
</tbody></table>
</form>
    </div> <!-- end search-box -->

    <div id="footer">
      <div class="fine-print">
<!--
        <p>Content available in <a href="http://www.ruby-lang.org/en/">English</a>, <a href="http://www.ruby-lang.org/fr/">French</a>, <a href="http://www.ruby-lang.org/ja/">Japanese</a>, <a href="http://www.ruby-lang.org/ko/">Korean</a>, <a href="http://www.ruby-lang.org/pl/">Polish</a>, <a href="http://www.ruby-lang.org/es/">Spanish</a>, <a href="http://www.ruby-lang.org/pt/">Portuguese</a>, <a href="http://www.ruby-lang.org/zh_cn/">Simplified Chinese</a>, <a href="http://www.ruby-lang.org/zh_TW/">Traditional Chinese</a>, <a href="http://www.ruby-lang.org/id/">Bahasa Indonesia</a>, <a href="http://www.ruby-lang.org/de/">German</a>, <a href="http://www.ruby-lang.org/it/">Italian</a> and <a href="http://www.ruby-lang.org/bg/">Bulgarian</a>.</p>
-->

        <p>This website is made with Ruby and powered by <a href="http://rdocidile.github.com/rdoc-rubyfaux">RubyFaux</a> v1.2.0.
<!--
          It is proudly maintained by <a href="http://rubyidentity.org/">members of the Ruby community</a>. Please contact
          our <a href="mailto:webmaster@ruby-lang.org">webmaster</a> for questions or comments
          concerning this website.</p>
-->
        </p>
      </div>
    </div>

  </div> <!-- end page  -->
</body>
</html>
