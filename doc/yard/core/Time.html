<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf8" />
<title>Class: Time</title>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (T)</a> &raquo; 
    
    
    <span class="title">Time</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Time
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Time</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/core/facets/time/set.rb<span class="defines">,<br />
  lib/core/facets/time/stamp.rb,<br /> lib/core/facets/time/trunc.rb,<br /> lib/core/facets/time/shift.rb,<br /> lib/core/facets/time/future.rb,<br /> lib/core/facets/time/change.rb,<br /> lib/core/facets/time/elapse.rb,<br /> lib/core/facets/time/to_time.rb,<br /> lib/core/facets/time/round_to.rb,<br /> lib/core/facets/time/dst_adjustment.rb</span>
</dd>
  
</dl>
<div class="clear"></div>


  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="FORMAT-constant" class="">FORMAT =
          
        </dt>
        <dd><pre class="code"><span class='lbrace token'>{</span>
  <span class='symbol val'>:db</span>      <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;%Y-%m-%d %H:%M:%S&quot;</span><span class='comma token'>,</span>
  <span class='symbol val'>:dbase</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;%Y-%m-%d %H:%M:%S&quot;</span><span class='comma token'>,</span>
  <span class='symbol val'>:datbase</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;%Y-%m-%d %H:%M:%S&quot;</span><span class='comma token'>,</span>
  <span class='symbol val'>:utc</span>     <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;%Y-%m-%d %H:%M:%S&quot;</span><span class='comma token'>,</span>
  <span class='symbol val'>:number</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;%Y%m%d%H%M%S&quot;</span><span class='comma token'>,</span>
  <span class='symbol val'>:short</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;%d %b %H:%M&quot;</span><span class='comma token'>,</span>
  <span class='symbol val'>:time</span>    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;%H:%M&quot;</span><span class='comma token'>,</span>
  <span class='symbol val'>:long</span>    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;%B %d, %Y %H:%M&quot;</span><span class='comma token'>,</span>
  <span class='symbol val'>:day1st</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;%d-%m-%Y %H:%M&quot;</span><span class='comma token'>,</span>
  <span class='symbol val'>:dmYHM</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;%d-%m-%Y %H:%M&quot;</span><span class='comma token'>,</span>
  <span class='symbol val'>:rfc822</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;%a, %d %b %Y %H:%M:%S %z&quot;</span><span class='comma token'>,</span>
  <span class='nil nil kw'>nil</span>      <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;%a %b %d %H:%M:%S %Z %Y&quot;</span>
<span class='rbrace token'>}</span>
</pre></dd>
      
    </dl>
  



  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#elapse-class_method" title="elapse (class method)">+ (Object) <strong>elapse</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Tracks the elapse time of a code block.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stamp-class_method" title="stamp (class method)">+ (Object) <strong>stamp</strong>(*args) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Produce time stamp for Time.now.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#change-instance_method" title="#change (instance method)">- (Object) <strong>change</strong>(options) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a new Time where one or more of the elements have been changed
according to the <tt>options</tt> parameter.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dst_adjustment-instance_method" title="#dst_adjustment (instance method)">- (Object) <strong>dst_adjustment</strong>(time) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Adjust DST.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#future%3F-instance_method" title="#future? (instance method)">- (Boolean) <strong>future?</strong>(other = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#less-instance_method" title="#less (instance method)">- (Object) <strong>less</strong>(*time_units) </a>
    

    
      (also: #ago)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a new Time representing the time a number of time-units ago.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#past%3F-instance_method" title="#past? (instance method)">- (Boolean) <strong>past?</strong>(other = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#round_to-instance_method" title="#round_to (instance method)">- (Object) <strong>round_to</strong>(seconds) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Round time at the nearest range (in seconds).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set-instance_method" title="#set (instance method)">- (Object) <strong>set</strong>(options) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Like change but does not reset earlier times.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#shift-instance_method" title="#shift (instance method)">- (Object) <strong>shift</strong>(*time_units) </a>
    

    
      (also: #hence, #in)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a new Time representing the time shifted by the time-units given.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stamp-instance_method" title="#stamp (instance method)">- (Object) <strong>stamp</strong>(fmt = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create a time stamp.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_time-instance_method" title="#to_time (instance method)">- (Object) <strong>to_time</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>To be able to keep Dates and Times interchangeable on conversions.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#trunc-instance_method" title="#trunc (instance method)">- (Object) <strong>trunc</strong>(amount) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Truncate time at give range (in seconds).</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="elapse-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>elapse</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Tracks the elapse time of a code block.</p>

<pre class="code"><span class='e identifier id'>e</span> <span class='assign token'>=</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='elapse identifier id'>elapse</span> <span class='lbrace token'>{</span> <span class='sleep identifier id'>sleep</span> <span class='integer val'>1</span> <span class='rbrace token'>}</span>

<span class='e identifier id'>e</span><span class='dot token'>.</span><span class='assert identifier id'>assert</span> <span class='gt op'>&gt;</span> <span class='integer val'>1</span>
</pre>

<p>CREDIT: Hal Fulton</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


11
12
13
14
15
16</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/core/facets/time/elapse.rb', line 11</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='elapse identifier id'>elapse</span>
  <span class='raise identifier id'>raise</span> <span class='string val'>&quot;Need block&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='block_given? fid id'>block_given?</span>
  <span class='t0 identifier id'>t0</span> <span class='assign token'>=</span> <span class='now identifier id'>now</span><span class='dot token'>.</span><span class='to_f identifier id'>to_f</span>
  <span class='yield yield kw'>yield</span>
  <span class='now identifier id'>now</span><span class='dot token'>.</span><span class='to_f identifier id'>to_f</span> <span class='minus op'>-</span> <span class='t0 identifier id'>t0</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="stamp-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>stamp</strong>(*args) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Produce time stamp for Time.now. See #stamp.</p>

<p>CREDIT: Trans</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


24
25
26</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/core/facets/time/stamp.rb', line 24</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='stamp identifier id'>stamp</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='now identifier id'>now</span><span class='dot token'>.</span><span class='stamp identifier id'>stamp</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="change-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>change</strong>(options) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns a new Time where one or more of the elements have been changed
according to the <tt>options</tt> parameter. The time options (hour,
minute, sec, usec) reset cascadingly, so if only the hour is passed, then
minute, sec, and usec is set to 0. If the hour and minute is passed, then
sec and usec is set to 0.</p>

<pre class="code"><span class='t1 identifier id'>t1</span> <span class='assign token'>=</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='at identifier id'>at</span><span class='lparen token'>(</span><span class='integer val'>10000</span><span class='rparen token'>)</span>
<span class='t1 identifier id'>t1</span><span class='dot token'>.</span><span class='ctime identifier id'>ctime</span>   <span class='comment val'>#=&gt; &quot;Wed Dec 31 21:46:40 1969&quot;</span>

<span class='t2 identifier id'>t2</span> <span class='assign token'>=</span> <span class='t1 identifier id'>t1</span><span class='dot token'>.</span><span class='change identifier id'>change</span><span class='lparen token'>(</span><span class='symbol val'>:hour</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>11</span><span class='rparen token'>)</span>
<span class='t2 identifier id'>t2</span><span class='dot token'>.</span><span class='ctime identifier id'>ctime</span>   <span class='comment val'>#=&gt; &quot;Wed Dec 31 11:00:00 1969&quot;</span>
</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


16
17
18
19
20
21
22
23
24
25
26
27
28</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/core/facets/time/change.rb', line 16</span>

<span class='def def kw'>def</span> <span class='change identifier id'>change</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='opts identifier id'>opts</span><span class='assign token'>=</span><span class='options identifier id'>options</span><span class='semicolon token'>;</span> <span class='comment val'>#{}; options.each_pair{ |k,v| opts[k] = v.to_i }</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='utc? fid id'>utc?</span> <span class='integer val'>? </span><span class='symbol val'>:utc</span> <span class='colon op'>:</span> <span class='symbol val'>:local</span><span class='comma token'>,</span>
    <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:year</span><span class='rbrack token'>]</span>  <span class='orop op'>||</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='year identifier id'>year</span><span class='comma token'>,</span>
    <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:month</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='month identifier id'>month</span><span class='comma token'>,</span>
    <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:day</span><span class='rbrack token'>]</span>   <span class='orop op'>||</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='day identifier id'>day</span><span class='comma token'>,</span>
    <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:hour</span><span class='rbrack token'>]</span>  <span class='orop op'>||</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='hour identifier id'>hour</span><span class='comma token'>,</span>
    <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:min</span><span class='rbrack token'>]</span>   <span class='orop op'>||</span> <span class='lparen token'>(</span><span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:hour</span><span class='rbrack token'>]</span> <span class='question op'>?</span> <span class='integer val'>0</span> <span class='colon op'>:</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='min identifier id'>min</span><span class='rparen token'>)</span><span class='comma token'>,</span>
    <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:sec</span><span class='rbrack token'>]</span>   <span class='orop op'>||</span> <span class='lparen token'>(</span><span class='lparen token'>(</span><span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:hour</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:min</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='integer val'>0</span> <span class='colon op'>:</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='sec identifier id'>sec</span><span class='rparen token'>)</span><span class='comma token'>,</span>
    <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:usec</span><span class='rbrack token'>]</span>  <span class='orop op'>||</span> <span class='lparen token'>(</span><span class='lparen token'>(</span><span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:hour</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:min</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:sec</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='integer val'>0</span> <span class='colon op'>:</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='usec identifier id'>usec</span><span class='rparen token'>)</span>
  <span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="dst_adjustment-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>dst_adjustment</strong>(time) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Adjust DST</p>

<p>TODO: Can’t seem to get this to pass ActiveSupport tests, even though it
is essentially identical to the ActiveSupport code (see Time#since in
time/calculations.rb). It handles all but 4 tests.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


11
12
13
14
15
16
17
18
19
20</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/core/facets/time/dst_adjustment.rb', line 11</span>

<span class='def def kw'>def</span> <span class='dst_adjustment identifier id'>dst_adjustment</span><span class='lparen token'>(</span><span class='time identifier id'>time</span><span class='rparen token'>)</span>
  <span class='self_dst identifier id'>self_dst</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='dst? fid id'>dst?</span> <span class='integer val'>? </span><span class='integer val'>1</span> <span class='colon op'>:</span> <span class='integer val'>0</span>
  <span class='time_dst identifier id'>time_dst</span> <span class='assign token'>=</span> <span class='time identifier id'>time</span><span class='dot token'>.</span><span class='dst? fid id'>dst?</span> <span class='integer val'>? </span><span class='integer val'>1</span> <span class='colon op'>:</span> <span class='integer val'>0</span>
  <span class='seconds identifier id'>seconds</span>  <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='self self kw'>self</span> <span class='minus op'>-</span> <span class='time identifier id'>time</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='abs identifier id'>abs</span>
  <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='seconds identifier id'>seconds</span> <span class='geq op'>&gt;=</span> <span class='integer val'>86400</span> <span class='andop op'>&amp;&amp;</span> <span class='self_dst identifier id'>self_dst</span> <span class='neq op'>!=</span> <span class='time_dst identifier id'>time_dst</span><span class='rparen token'>)</span>
    <span class='time identifier id'>time</span> <span class='plus op'>+</span> <span class='lparen token'>(</span><span class='lparen token'>(</span><span class='self_dst identifier id'>self_dst</span> <span class='minus op'>-</span> <span class='time_dst identifier id'>time_dst</span><span class='rparen token'>)</span> <span class='mult op'>*</span> <span class='integer val'>60</span> <span class='mult op'>*</span> <span class='integer val'>60</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='time identifier id'>time</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="future?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>future?</strong>(other = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/core/facets/time/future.rb', line 9</span>

<span class='def def kw'>def</span> <span class='future? fid id'>future?</span><span class='lparen token'>(</span><span class='other identifier id'>other</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span> <span class='gt op'>&gt;</span> <span class='lparen token'>(</span><span class='other identifier id'>other</span> <span class='orop op'>||</span> <span class='colon3 op'>::</span><span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="less-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>less</strong>(*time_units) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='ago-instance_method'>ago</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns a new Time representing the time a number of time-units ago. This
is just like #shift, but reverses the direction.</p>

<pre class="code"><span class='t identifier id'>t</span> <span class='assign token'>=</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='utc identifier id'>utc</span><span class='lparen token'>(</span><span class='integer val'>2010</span><span class='comma token'>,</span><span class='integer val'>10</span><span class='comma token'>,</span><span class='integer val'>10</span><span class='comma token'>,</span><span class='integer val'>0</span><span class='comma token'>,</span><span class='integer val'>0</span><span class='comma token'>,</span><span class='integer val'>0</span><span class='rparen token'>)</span>

<span class='t identifier id'>t</span><span class='dot token'>.</span><span class='less identifier id'>less</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='comma token'>,</span> <span class='symbol val'>:days</span><span class='rparen token'>)</span>             <span class='comment val'>#=&gt;  Time.utc(2010,10,6,0,0,0)</span>
</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


77
78
79
80
81
82
83
84
85
86
87
88
89</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/core/facets/time/shift.rb', line 77</span>

<span class='def def kw'>def</span> <span class='less identifier id'>less</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='time_units identifier id'>time_units</span><span class='rparen token'>)</span>
  <span class='time_hash identifier id'>time_hash</span>  <span class='assign token'>=</span> <span class='Hash constant id'>Hash</span><span class='eqq op'>===</span><span class='time_units identifier id'>time_units</span><span class='dot token'>.</span><span class='last identifier id'>last</span> <span class='integer val'>? </span><span class='time_units identifier id'>time_units</span><span class='dot token'>.</span><span class='pop identifier id'>pop</span> <span class='colon op'>:</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='time_units identifier id'>time_units</span> <span class='assign token'>=</span> <span class='time_units identifier id'>time_units</span><span class='dot token'>.</span><span class='flatten identifier id'>flatten</span>

  <span class='time_units identifier id'>time_units</span> <span class='lshft op'>&lt;&lt;</span> <span class='symbol val'>:seconds</span> <span class='if if_mod kw'>if</span> <span class='time_units identifier id'>time_units</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='mod op'>%</span> <span class='integer val'>2</span> <span class='eq op'>==</span> <span class='integer val'>1</span>

  <span class='time_hash identifier id'>time_hash</span><span class='dot token'>.</span><span class='each identifier id'>each</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='units identifier id'>units</span><span class='comma token'>,</span> <span class='number identifier id'>number</span><span class='bitor op'>|</span> <span class='time_units identifier id'>time_units</span> <span class='lshft op'>&lt;&lt;</span> <span class='number identifier id'>number</span><span class='semicolon token'>;</span> <span class='time_units identifier id'>time_units</span> <span class='lshft op'>&lt;&lt;</span> <span class='units identifier id'>units</span> <span class='rbrace token'>}</span>

  <span class='neg_times identifier id'>neg_times</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='time_units identifier id'>time_units</span><span class='dot token'>.</span><span class='each_slice identifier id'>each_slice</span><span class='lparen token'>(</span><span class='integer val'>2</span><span class='rparen token'>)</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='number identifier id'>number</span><span class='comma token'>,</span> <span class='units identifier id'>units</span><span class='bitor op'>|</span> <span class='neg_times identifier id'>neg_times</span> <span class='lshft op'>&lt;&lt;</span> <span class='minus op'>-</span><span class='number identifier id'>number</span><span class='semicolon token'>;</span> <span class='neg_times identifier id'>neg_times</span> <span class='lshft op'>&lt;&lt;</span> <span class='units identifier id'>units</span> <span class='rbrace token'>}</span>

  <span class='shift identifier id'>shift</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='neg_times identifier id'>neg_times</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="past?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>past?</strong>(other = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


4
5
6</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/core/facets/time/future.rb', line 4</span>

<span class='def def kw'>def</span> <span class='past? fid id'>past?</span><span class='lparen token'>(</span><span class='other identifier id'>other</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span> <span class='lt op'>&lt;</span> <span class='lparen token'>(</span><span class='other identifier id'>other</span> <span class='orop op'>||</span> <span class='colon3 op'>::</span><span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="round_to-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>round_to</strong>(seconds) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Round time at the nearest range (in seconds).</p>

<pre class="code"><span class='t1 identifier id'>t1</span> <span class='assign token'>=</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span>
<span class='t2 identifier id'>t2</span> <span class='assign token'>=</span> <span class='t1 identifier id'>t1</span><span class='dot token'>.</span><span class='round_to identifier id'>round_to</span><span class='lparen token'>(</span><span class='integer val'>60</span><span class='mult op'>*</span><span class='integer val'>60</span><span class='rparen token'>)</span>
<span class='t2 identifier id'>t2</span><span class='dot token'>.</span><span class='min identifier id'>min</span> <span class='comment val'>#=&gt; 0</span>
<span class='t2 identifier id'>t2</span><span class='dot token'>.</span><span class='sec identifier id'>sec</span> <span class='comment val'>#=&gt; 0</span>
</pre>

<p>TODO: What about `round(:minute)`?</p>

<p>TODO: Fractional seconds should round the usec.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


16
17
18</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/core/facets/time/round_to.rb', line 16</span>

<span class='def def kw'>def</span> <span class='round_to identifier id'>round_to</span><span class='lparen token'>(</span><span class='seconds identifier id'>seconds</span><span class='rparen token'>)</span>
  <span class='lparen token'>(</span><span class='self self kw'>self</span> <span class='plus op'>+</span> <span class='seconds identifier id'>seconds</span> <span class='div op'>/</span> <span class='float val'>2.0</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='trunc identifier id'>trunc</span><span class='lparen token'>(</span><span class='seconds identifier id'>seconds</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="set-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>set</strong>(options) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Like change but does not reset earlier times.</p>

<p>NOTE: It would be better, probably if this were called “change”. and
that #change were called “reset”.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/core/facets/time/set.rb', line 8</span>

<span class='def def kw'>def</span> <span class='set identifier id'>set</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='opts identifier id'>opts</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='each_pair identifier id'>each_pair</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='k identifier id'>k</span><span class='comma token'>,</span><span class='v identifier id'>v</span><span class='bitor op'>|</span> 
    <span class='k identifier id'>k</span> <span class='assign token'>=</span> <span class='symbol val'>:min</span> <span class='if if_mod kw'>if</span> <span class='k identifier id'>k</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='match op'>=~</span> <span class='regexp val'>/^min/</span>
    <span class='k identifier id'>k</span> <span class='assign token'>=</span> <span class='symbol val'>:sec</span> <span class='if if_mod kw'>if</span> <span class='k identifier id'>k</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='match op'>=~</span> <span class='regexp val'>/^sec/</span>
    <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='k identifier id'>k</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='v identifier id'>v</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span> 
  <span class='end end kw'>end</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='utc? fid id'>utc?</span> <span class='integer val'>? </span><span class='symbol val'>:utc</span> <span class='colon op'>:</span> <span class='symbol val'>:local</span><span class='comma token'>,</span>
    <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:year</span><span class='rbrack token'>]</span>  <span class='orop op'>||</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='year identifier id'>year</span><span class='comma token'>,</span>
    <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:month</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='month identifier id'>month</span><span class='comma token'>,</span>
    <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:day</span><span class='rbrack token'>]</span>   <span class='orop op'>||</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='day identifier id'>day</span><span class='comma token'>,</span>
    <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:hour</span><span class='rbrack token'>]</span>  <span class='orop op'>||</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='hour identifier id'>hour</span><span class='comma token'>,</span>
    <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:min</span><span class='rbrack token'>]</span>   <span class='orop op'>||</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='min identifier id'>min</span><span class='comma token'>,</span>
    <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:sec</span><span class='rbrack token'>]</span>   <span class='orop op'>||</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='sec identifier id'>sec</span><span class='comma token'>,</span>
    <span class='opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:usec</span><span class='rbrack token'>]</span>  <span class='orop op'>||</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='usec identifier id'>usec</span>
  <span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="shift-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>shift</strong>(*time_units) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='hence-instance_method'>hence</span>, <span id='in-instance_method'>in</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns a new Time representing the time shifted by the time-units given.
Positive number shift the time forward, negative number shift the time 
backward.</p>

<pre class="code"><span class='t identifier id'>t</span> <span class='assign token'>=</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='utc identifier id'>utc</span><span class='lparen token'>(</span><span class='integer val'>2010</span><span class='comma token'>,</span><span class='integer val'>10</span><span class='comma token'>,</span><span class='integer val'>10</span><span class='comma token'>,</span><span class='integer val'>0</span><span class='comma token'>,</span><span class='integer val'>0</span><span class='comma token'>,</span><span class='integer val'>0</span><span class='rparen token'>)</span>
<span class='t identifier id'>t</span><span class='dot token'>.</span><span class='shift identifier id'>shift</span><span class='lparen token'>(</span> <span class='integer val'>4</span><span class='comma token'>,</span> <span class='symbol val'>:days</span><span class='rparen token'>)</span>            <span class='comment val'>#=&gt;  Time.utc(2010,10,14,0,0,0)</span>
<span class='t identifier id'>t</span><span class='dot token'>.</span><span class='shift identifier id'>shift</span><span class='lparen token'>(</span><span class='integer val'>-4</span><span class='comma token'>,</span> <span class='symbol val'>:days</span><span class='rparen token'>)</span>            <span class='comment val'>#=&gt;  Time.utc(2010,10,6,0,0,0)</span>
</pre>

<p>More than one unit of time can be given.</p>

<pre class="code"><span class='t identifier id'>t</span><span class='dot token'>.</span><span class='shift identifier id'>shift</span><span class='lparen token'>(</span><span class='integer val'>4</span><span class='comma token'>,</span> <span class='symbol val'>:days</span><span class='comma token'>,</span> <span class='integer val'>3</span><span class='comma token'>,</span> <span class='symbol val'>:hours</span><span class='rparen token'>)</span>  <span class='comment val'>#=&gt;  Time.utc(2010,10,14,3,0,0)</span>
</pre>

<p>The #shift method can also take a hash.</p>

<pre class="code"><span class='t identifier id'>t</span><span class='dot token'>.</span><span class='shift identifier id'>shift</span><span class='lparen token'>(</span><span class='symbol val'>:days=</span><span class='gt op'>&gt;</span><span class='integer val'>4</span><span class='comma token'>,</span> <span class='symbol val'>:hours=</span><span class='gt op'>&gt;</span><span class='integer val'>3</span><span class='rparen token'>)</span>  <span class='comment val'>#=&gt;  Time.utc(2010,10,14,3,0,0)</span>
</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/core/facets/time/shift.rb', line 22</span>

<span class='def def kw'>def</span> <span class='shift identifier id'>shift</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='time_units identifier id'>time_units</span><span class='rparen token'>)</span>
  <span class='time_hash identifier id'>time_hash</span> <span class='assign token'>=</span> <span class='Hash constant id'>Hash</span><span class='eqq op'>===</span><span class='time_units identifier id'>time_units</span><span class='dot token'>.</span><span class='last identifier id'>last</span> <span class='integer val'>? </span><span class='time_units identifier id'>time_units</span><span class='dot token'>.</span><span class='pop identifier id'>pop</span> <span class='colon op'>:</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='time_units identifier id'>time_units</span> <span class='assign token'>=</span> <span class='time_units identifier id'>time_units</span><span class='dot token'>.</span><span class='flatten identifier id'>flatten</span>
  <span class='time_units identifier id'>time_units</span> <span class='lshft op'>&lt;&lt;</span> <span class='symbol val'>:seconds</span> <span class='if if_mod kw'>if</span> <span class='time_units identifier id'>time_units</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='mod op'>%</span> <span class='integer val'>2</span> <span class='eq op'>==</span> <span class='integer val'>1</span>
  <span class='time_hash identifier id'>time_hash</span><span class='dot token'>.</span><span class='each identifier id'>each</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='units identifier id'>units</span><span class='comma token'>,</span> <span class='number identifier id'>number</span><span class='bitor op'>|</span> <span class='time_units identifier id'>time_units</span> <span class='lshft op'>&lt;&lt;</span> <span class='number identifier id'>number</span><span class='semicolon token'>;</span> <span class='time_units identifier id'>time_units</span> <span class='lshft op'>&lt;&lt;</span> <span class='units identifier id'>units</span> <span class='rbrace token'>}</span>

  <span class='time identifier id'>time</span> <span class='assign token'>=</span> <span class='self self kw'>self</span>
  <span class='time_units identifier id'>time_units</span><span class='dot token'>.</span><span class='each_slice identifier id'>each_slice</span><span class='lparen token'>(</span><span class='integer val'>2</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='number identifier id'>number</span><span class='comma token'>,</span> <span class='units identifier id'>units</span><span class='bitor op'>|</span>
    <span class='comment val'>#next time = time.ago(-number, units) if number &lt; 0</span>
    <span class='time identifier id'>time</span> <span class='assign token'>=</span> <span class='lparen token'>(</span>
      <span class='case case kw'>case</span> <span class='units identifier id'>units</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span>
      <span class='when when kw'>when</span> <span class='symbol val'>:years</span><span class='comma token'>,</span> <span class='symbol val'>:year</span>
        <span class='time identifier id'>time</span><span class='dot token'>.</span><span class='set identifier id'>set</span><span class='lparen token'>(</span> <span class='symbol val'>:year=</span><span class='gt op'>&gt;</span><span class='lparen token'>(</span><span class='year identifier id'>year</span> <span class='plus op'>+</span> <span class='number identifier id'>number</span><span class='rparen token'>)</span> <span class='rparen token'>)</span>
      <span class='when when kw'>when</span> <span class='symbol val'>:months</span><span class='comma token'>,</span> <span class='symbol val'>:month</span>
        <span class='if if kw'>if</span> <span class='number identifier id'>number</span> <span class='gt op'>&gt;</span> <span class='integer val'>0</span>
          <span class='new_month identifier id'>new_month</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='lparen token'>(</span><span class='month identifier id'>month</span> <span class='plus op'>+</span> <span class='number identifier id'>number</span> <span class='minus op'>-</span> <span class='integer val'>1</span><span class='rparen token'>)</span> <span class='mod op'>%</span> <span class='integer val'>12</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='integer val'>1</span>
          <span class='y identifier id'>y</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='number identifier id'>number</span> <span class='div op'>/</span> <span class='integer val'>12</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='lparen token'>(</span><span class='new_month identifier id'>new_month</span> <span class='lt op'>&lt;</span> <span class='month identifier id'>month</span> <span class='integer val'>? </span><span class='integer val'>1</span> <span class='colon op'>:</span> <span class='integer val'>0</span><span class='rparen token'>)</span>
          <span class='time identifier id'>time</span><span class='dot token'>.</span><span class='set identifier id'>set</span><span class='lparen token'>(</span><span class='symbol val'>:year</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lparen token'>(</span><span class='year identifier id'>year</span> <span class='plus op'>+</span> <span class='y identifier id'>y</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='symbol val'>:month</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='new_month identifier id'>new_month</span><span class='rparen token'>)</span>
        <span class='else else kw'>else</span>
          <span class='number identifier id'>number</span> <span class='assign token'>=</span> <span class='minus op'>-</span><span class='number identifier id'>number</span>
          <span class='new_month identifier id'>new_month</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='lparen token'>(</span><span class='month identifier id'>month</span> <span class='minus op'>-</span> <span class='number identifier id'>number</span> <span class='minus op'>-</span> <span class='integer val'>1</span><span class='rparen token'>)</span> <span class='mod op'>%</span> <span class='integer val'>12</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='integer val'>1</span>
          <span class='y identifier id'>y</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='number identifier id'>number</span> <span class='div op'>/</span> <span class='integer val'>12</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='lparen token'>(</span><span class='new_month identifier id'>new_month</span> <span class='gt op'>&gt;</span> <span class='month identifier id'>month</span> <span class='integer val'>? </span><span class='integer val'>1</span> <span class='colon op'>:</span> <span class='integer val'>0</span><span class='rparen token'>)</span>
          <span class='time identifier id'>time</span><span class='dot token'>.</span><span class='set identifier id'>set</span><span class='lparen token'>(</span><span class='symbol val'>:year</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lparen token'>(</span><span class='year identifier id'>year</span> <span class='minus op'>-</span> <span class='y identifier id'>y</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='symbol val'>:month</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='new_month identifier id'>new_month</span><span class='rparen token'>)</span>
        <span class='end end kw'>end</span>
      <span class='when when kw'>when</span> <span class='symbol val'>:weeks</span><span class='comma token'>,</span> <span class='symbol val'>:week</span>
        <span class='time identifier id'>time</span> <span class='plus op'>+</span> <span class='lparen token'>(</span><span class='number identifier id'>number</span> <span class='mult op'>*</span> <span class='integer val'>604800</span><span class='rparen token'>)</span>
      <span class='when when kw'>when</span> <span class='symbol val'>:days</span><span class='comma token'>,</span> <span class='symbol val'>:day</span>
        <span class='time identifier id'>time</span> <span class='plus op'>+</span> <span class='lparen token'>(</span><span class='number identifier id'>number</span> <span class='mult op'>*</span> <span class='integer val'>86400</span><span class='rparen token'>)</span>
      <span class='when when kw'>when</span> <span class='symbol val'>:hours</span><span class='comma token'>,</span> <span class='symbol val'>:hour</span>
        <span class='time identifier id'>time</span> <span class='plus op'>+</span> <span class='lparen token'>(</span><span class='number identifier id'>number</span> <span class='mult op'>*</span> <span class='integer val'>3600</span><span class='rparen token'>)</span>
      <span class='when when kw'>when</span> <span class='symbol val'>:minutes</span><span class='comma token'>,</span> <span class='symbol val'>:minute</span><span class='comma token'>,</span> <span class='symbol val'>:mins</span><span class='comma token'>,</span> <span class='symbol val'>:min</span>
        <span class='time identifier id'>time</span> <span class='plus op'>+</span> <span class='lparen token'>(</span><span class='number identifier id'>number</span> <span class='mult op'>*</span> <span class='integer val'>60</span><span class='rparen token'>)</span>
      <span class='when when kw'>when</span> <span class='symbol val'>:seconds</span><span class='comma token'>,</span> <span class='symbol val'>:second</span><span class='comma token'>,</span> <span class='symbol val'>:secs</span><span class='comma token'>,</span> <span class='symbol val'>:sec</span><span class='comma token'>,</span> <span class='nil nil kw'>nil</span>
        <span class='time identifier id'>time</span> <span class='plus op'>+</span> <span class='number identifier id'>number</span>
      <span class='else else kw'>else</span>
        <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;unrecognized time units -- #{units}&quot;</span>
      <span class='end end kw'>end</span>
    <span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='dst_adjustment identifier id'>dst_adjustment</span><span class='lparen token'>(</span><span class='time identifier id'>time</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="stamp-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>stamp</strong>(fmt = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Create a time stamp.</p>

<pre class="code"><span class='t identifier id'>t</span> <span class='assign token'>=</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='at identifier id'>at</span><span class='lparen token'>(</span><span class='integer val'>10000</span><span class='rparen token'>)</span>
<span class='t identifier id'>t</span><span class='dot token'>.</span><span class='stamp identifier id'>stamp</span><span class='lparen token'>(</span><span class='symbol val'>:short</span><span class='rparen token'>)</span>    <span class='comment val'>#=&gt; &quot;31 Dec 21:46&quot;</span>
</pre>

<p>Supported formats come from the Time::FORMAT constant.</p>

<p>CREDIT: Trans</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


37
38
39
40
41
42</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/core/facets/time/stamp.rb', line 37</span>

<span class='def def kw'>def</span> <span class='stamp identifier id'>stamp</span><span class='lparen token'>(</span><span class='fmt identifier id'>fmt</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='unless unless kw'>unless</span> <span class='String constant id'>String</span> <span class='eqq op'>===</span> <span class='fmt identifier id'>fmt</span>
    <span class='fmt identifier id'>fmt</span> <span class='assign token'>=</span> <span class='FORMAT constant id'>FORMAT</span><span class='lbrack token'>[</span><span class='fmt identifier id'>fmt</span><span class='rbrack token'>]</span>
  <span class='end end kw'>end</span>
  <span class='strftime identifier id'>strftime</span><span class='lparen token'>(</span><span class='fmt identifier id'>fmt</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='strip identifier id'>strip</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="to_time-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>to_time</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>To be able to keep Dates and Times interchangeable on conversions.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


8
9
10</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/core/facets/time/to_time.rb', line 8</span>

<span class='def def kw'>def</span> <span class='to_time identifier id'>to_time</span>
  <span class='getlocal identifier id'>getlocal</span> 
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="trunc-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>trunc</strong>(amount) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Truncate time at give range (in seconds).</p>

<pre class="code"><span class='t identifier id'>t</span> <span class='assign token'>=</span> <span class='Time constant id'>Time</span><span class='dot token'>.</span><span class='now identifier id'>now</span>
<span class='t identifier id'>t</span> <span class='assign token'>=</span> <span class='t identifier id'>t</span><span class='dot token'>.</span><span class='trunc identifier id'>trunc</span><span class='lparen token'>(</span><span class='integer val'>60</span><span class='mult op'>*</span><span class='integer val'>60</span><span class='rparen token'>)</span>
<span class='t identifier id'>t</span><span class='dot token'>.</span><span class='min identifier id'>min</span> <span class='comment val'>#=&gt; 0</span>
<span class='t identifier id'>t</span><span class='dot token'>.</span><span class='sec identifier id'>sec</span> <span class='comment val'>#=&gt; 0</span>
</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


10
11
12</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/core/facets/time/trunc.rb', line 10</span>

<span class='def def kw'>def</span> <span class='trunc identifier id'>trunc</span><span class='lparen token'>(</span><span class='amount identifier id'>amount</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span> <span class='minus op'>-</span> <span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span> <span class='mod op'>%</span> <span class='amount identifier id'>amount</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Tue May 17 02:26:46 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.7 (ruby-1.8.7).
</div>

  </body>
</html>