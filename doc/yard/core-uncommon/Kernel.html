<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf8" />
<title>Module: Kernel</title>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (K)</a> &raquo; 
    
    
    <span class="title">Kernel</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Module: Kernel
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/core-uncommon/facets/kernel/y.rb<span class="defines">,<br />
  lib/core-uncommon/facets/kernel/memo.rb,<br /> lib/core-uncommon/facets/kernel/demo.rb,<br /> lib/core-uncommon/facets/kernel/eigenclass.rb,<br /> lib/core-uncommon/facets/kernel/trap_chain.rb</span>
</dd>
  
</dl>
<div class="clear"></div>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#demo-instance_method" title="#demo (instance method)">- (Object) <strong>demo</strong>(out = $stdout, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>For debugging and showing examples.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#eigenclass-instance_method" title="#eigenclass (instance method)">- (Object) <strong>eigenclass</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>During this trying time when no one can get their techie catchwords to
stick to the refrigerator no matter how hard they slap it with the
enchanted magnetic spatula, it’s good to know that the contrived phrases
really do fly, graceful and unclasped and bearing north toward chilled
shrimp.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#memo-instance_method" title="#memo (instance method)">- (Object) <strong>memo</strong>(*args, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Memoize a method.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#trap_chain-instance_method" title="#trap_chain (instance method)">- (Object) <strong>trap_chain</strong>(signal_name, *args, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Calling Kernel#trap() by itself will replace any previously registered
handler code.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#Y-instance_method" title="#Y (instance method)">- (Object) <strong>Y</strong>(*args, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Y-combinator.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="demo-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>demo</strong>(out = $stdout, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>For debugging and showing examples. Currently this takes an argument of a
string in a block…</p>

<pre class="code"><span class='demo identifier id'>demo</span> <span class='lbrace token'>{</span><span class='string val'>%{ a = [1,2,3] }</span><span class='rbrace token'>}</span>
<span class='demo identifier id'>demo</span> <span class='lbrace token'>{</span><span class='string val'>%{ a.slice(1,2) }</span><span class='rbrace token'>}</span>
<span class='demo identifier id'>demo</span> <span class='lbrace token'>{</span><span class='string val'>%{ a.map { |x| x**3 } }</span><span class='rbrace token'>}</span>
</pre>

<p>produces …</p>

<pre class="code"><span class='a identifier id'>a</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='integer val'>1</span><span class='comma token'>,</span><span class='integer val'>2</span><span class='comma token'>,</span><span class='integer val'>3</span><span class='rbrack token'>]</span>             <span class='comment val'>#=&gt;  [1, 2, 3]</span>
<span class='a identifier id'>a</span><span class='dot token'>.</span><span class='slice identifier id'>slice</span><span class='lparen token'>(</span><span class='integer val'>1</span><span class='comma token'>,</span><span class='integer val'>2</span><span class='rparen token'>)</span>            <span class='comment val'>#=&gt;  [2, 3]</span>
<span class='a identifier id'>a</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='x identifier id'>x</span><span class='bitor op'>|</span> <span class='x identifier id'>x</span><span class='pow op'>**</span><span class='integer val'>3</span> <span class='rbrace token'>}</span>      <span class='comment val'>#=&gt;  [1, 8, 27]</span>
</pre>

<p>TODO: Is there a way to do this without the eval string in block?
Preferably just a block and no string.</p>

<p>NOTE: This is not (presently) a common core extension and is not loaded
automatically when using <tt>require 'facets'</tt>.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/core-uncommon/facets/kernel/demo.rb', line 22</span>

<span class='def def kw'>def</span> <span class='demo identifier id'>demo</span><span class='lparen token'>(</span><span class='out identifier id'>out</span><span class='assign token'>=</span><span class='$stdout gvar id'>$stdout</span><span class='comma token'>,</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='out identifier id'>out</span> <span class='lshft op'>&lt;&lt;</span> <span class='sprintf identifier id'>sprintf</span><span class='lparen token'>(</span><span class='string val'>&quot;%-25s#=&gt;  %s\n&quot;</span><span class='comma token'>,</span> <span class='expr identifier id'>expr</span> <span class='assign token'>=</span> <span class='block identifier id'>block</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='comma token'>,</span> <span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='expr identifier id'>expr</span><span class='comma token'>,</span> <span class='block identifier id'>block</span><span class='dot token'>.</span><span class='binding identifier id'>binding</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='inspect identifier id'>inspect</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="eigenclass-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>eigenclass</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>During this trying time when no one can get their techie catchwords to
stick to the refrigerator no matter how hard they slap it with the
enchanted magnetic spatula, it’s good to know that the contrived phrases
really do fly, graceful and unclasped and bearing north toward chilled
shrimp. I know what my Hallowe’en pumpkin is going to say.</p>

<p>NOTE: This is not (presently) a common core extension and is not loaded
automatically when using <tt>require 'facets'</tt>.</p>

<p>CREDIT: WhyTheLuckyStiff</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


16
17
18</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/core-uncommon/facets/kernel/eigenclass.rb', line 16</span>

<span class='def def kw'>def</span> <span class='eigenclass identifier id'>eigenclass</span>
  <span class='lparen token'>(</span><span class='class class kw'>class</span> <span class='lshft op'>&lt;&lt;</span> <span class='self self kw'>self</span><span class='semicolon token'>;</span> <span class='self self kw'>self</span><span class='semicolon token'>;</span> <span class='end end kw'>end</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="memo-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>memo</strong>(*args, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Memoize a method.</p>

<pre class="code"><span class='class class kw'>class</span> <span class='MemoExample constant id'>MemoExample</span>
  <span class='attr_accessor identifier id'>attr_accessor</span> <span class='symbol val'>:a</span>
  <span class='def def kw'>def</span> <span class='m identifier id'>m</span>
    <span class='memo identifier id'>memo</span><span class='lbrace token'>{</span> <span class='@a ivar id'>@a</span> <span class='rbrace token'>}</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>

<span class='ex identifier id'>ex</span> <span class='assign token'>=</span> <span class='MemoExample constant id'>MemoExample</span><span class='dot token'>.</span><span class='new identifier id'>new</span>

<span class='ex identifier id'>ex</span><span class='dot token'>.</span><span class='a identifier id'>a</span> <span class='assign token'>=</span> <span class='integer val'>10</span>
<span class='ex identifier id'>ex</span><span class='dot token'>.</span><span class='m identifier id'>m</span>  <span class='comment val'>#=&gt; 10</span>

<span class='ex identifier id'>ex</span><span class='dot token'>.</span><span class='a identifier id'>a</span> <span class='assign token'>=</span> <span class='integer val'>20</span>
<span class='ex identifier id'>ex</span><span class='dot token'>.</span><span class='m identifier id'>m</span>  <span class='comment val'>#=&gt; 10</span>
</pre>

<p>NOTE: This is not (presently) a common core extension and is not loaded
automatically when using <tt>require 'facets'</tt>.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


29
30
31
32
33
34
35
36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/core-uncommon/facets/kernel/memo.rb', line 29</span>

<span class='def def kw'>def</span> <span class='memo identifier id'>memo</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
    <span class='args identifier id'>args</span> <span class='assign token'>=</span> <span class='block identifier id'>block</span><span class='dot token'>.</span><span class='binding identifier id'>binding</span><span class='dot token'>.</span><span class='eval identifier id'>eval</span><span class='lparen token'>(</span><span class='string val'>'[self, __method__]'</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='if if kw'>if</span> <span class='$MEMO gvar id'>$MEMO</span><span class='dot token'>.</span><span class='key? fid id'>key?</span><span class='lparen token'>(</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='$MEMO gvar id'>$MEMO</span><span class='lbrack token'>[</span><span class='args identifier id'>args</span><span class='rbrack token'>]</span>
  <span class='else else kw'>else</span>
    <span class='$MEMO gvar id'>$MEMO</span><span class='lbrack token'>[</span><span class='args identifier id'>args</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='block identifier id'>block</span><span class='dot token'>.</span><span class='call identifier id'>call</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="trap_chain-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>trap_chain</strong>(signal_name, *args, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Calling Kernel#trap() by itself will replace any previously registered
handler code. Kernel#trap_chain(), on the other hand, will add the block
you supply to the existing “list” of registered handler blocks. Similar
to the way Kernel#at_exit() works, Kernel#trap_chain() will prepend the
given block to the call chain for the given signal_name. When the signal
occurs, your block will be executed first and then the previously
registered handler will be invoked. This can be called repeatedly to create
a “chain” of handlers.</p>

<p>NOTE: This is not (presently) a common core extension and is not loaded
automatically when using <tt>require 'facets'</tt>.</p>

<p>CREDIT: Tyler Rick</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


15
16
17
18
19
20
21</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/core-uncommon/facets/kernel/trap_chain.rb', line 15</span>

<span class='def def kw'>def</span> <span class='trap_chain identifier id'>trap_chain</span><span class='lparen token'>(</span><span class='signal_name identifier id'>signal_name</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='args identifier id'>args</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='previous_interrupt_handler identifier id'>previous_interrupt_handler</span> <span class='assign token'>=</span> <span class='trap identifier id'>trap</span><span class='lparen token'>(</span><span class='signal_name identifier id'>signal_name</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='trap identifier id'>trap</span><span class='lparen token'>(</span><span class='signal_name identifier id'>signal_name</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
    <span class='block identifier id'>block</span><span class='dot token'>.</span><span class='call identifier id'>call</span>
    <span class='previous_interrupt_handler identifier id'>previous_interrupt_handler</span><span class='dot token'>.</span><span class='call identifier id'>call</span> <span class='unless unless_mod kw'>unless</span> <span class='previous_interrupt_handler identifier id'>previous_interrupt_handler</span> <span class='eq op'>==</span> <span class='string val'>&quot;DEFAULT&quot;</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="Y-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>Y</strong>(*args, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Y-combinator.</p>

<pre class="code"><span class='f identifier id'>f</span> <span class='assign token'>=</span> <span class='Y constant id'>Y</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='n identifier id'>n</span><span class='comma token'>,</span> <span class='acc identifier id'>acc</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='b identifier id'>b</span><span class='bitor op'>|</span>
  <span class='n identifier id'>n</span> <span class='lt op'>&lt;</span> <span class='integer val'>2</span> <span class='question op'>?</span> <span class='acc identifier id'>acc</span> <span class='colon op'>:</span> <span class='b identifier id'>b</span><span class='dot token'>.</span><span class='lparen token'>(</span><span class='n identifier id'>n</span><span class='minus op'>-</span><span class='integer val'>1</span><span class='comma token'>,</span> <span class='n identifier id'>n</span> <span class='mult op'>*</span> <span class='acc identifier id'>acc</span><span class='rparen token'>)</span> 
<span class='end end kw'>end</span>

<span class='f identifier id'>f</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='integer val'>5</span><span class='comma token'>,</span> <span class='integer val'>1</span><span class='rparen token'>)</span> <span class='comment val'>#=&gt; 120</span>
</pre>

<p>NOTE: This is not (presently) a common core extension and is not loaded
automatically when using <tt>require 'facets'</tt>.</p>

<p>CREDIT: Michael Fellinger</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


16
17
18</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/core-uncommon/facets/kernel/y.rb', line 16</span>

<span class='def def kw'>def</span> <span class='Y constant id'>Y</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='y identifier id'>y</span> <span class='assign token'>=</span> <span class='lambda identifier id'>lambda</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='bitor op'>|</span> <span class='block identifier id'>block</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='y identifier id'>y</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Tue May 17 02:26:57 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.7 (ruby-1.8.7).
</div>

  </body>
</html>